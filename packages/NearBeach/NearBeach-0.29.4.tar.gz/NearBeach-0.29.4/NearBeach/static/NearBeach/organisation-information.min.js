"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[4093],{2024:(o,e,n)=>{n.r(e),n.d(e,{default:()=>V});var a=n(6252),t=n(9963);const i={class:"card"},s={class:"card-body"},l=(0,a._)("h1",null,"Organisation Information",-1),r=(0,a._)("hr",null,null,-1),d={class:"row"},u=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Please Note"),(0,a._)("p",{class:"text-instructions"}," Please only use generic information for both the website and email. Do not use any personal details - you can create contacts in the section below. ")],-1),g={class:"col-md-3"},c=["src"],m=(0,a._)("br",null,null,-1),p=(0,a.Uk)("Update Profile Picture"),h={class:"col-md-5"},_={class:"form-group"},M={for:"id_organisation_name"},f=(0,a.Uk)(" Organisation Name "),v={key:0,class:"error"},w=(0,a._)("br",null,null,-1),E={class:"form-group"},b={for:"id_organisation_website"},y=(0,a.Uk)(" Organisation Website "),k={key:0,class:"error"},I=(0,a._)("br",null,null,-1),U={class:"form-group"},N={for:"id_organisation_email"},S=(0,a.Uk)(" Organisation Email "),O={key:0,class:"error"},T=(0,a._)("br",null,null,-1),$=(0,a._)("hr",null,null,-1),L={class:"row submit-row"},R={class:"col-md-12"};var q=n(9669),C=n.n(q),P=n(996),B=n(8765),x=n(4250),A=n(3766),D=n(2587),W=n(3058),Z=n(8416),H=n(106);const F={name:"OrganisationInformation",setup:()=>({v$:(0,A.ZP)()}),components:{NButton:P.Z,NUpload:B.Z},props:{organisationResults:{type:Array,default:()=>[]}},mixins:[W.Z,H.Z,Z.Z],computed:{...(0,x.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},data(){return{organisationNameModel:this.organisationResults[0].fields.organisation_name,organisationEmailModel:this.organisationResults[0].fields.organisation_email,organisationWebsiteModel:this.organisationResults[0].fields.organisation_website}},validations:{organisationNameModel:{required:D.C1,maxLength:(0,D.BS)(255)},organisationWebsiteModel:{required:D.C1,url:D.HQ},organisationEmailModel:{required:D.C1,email:D.Do}},methods:{updateOrganisation:function(){if(this.v$.$touch(),this.v$.$invalid)return void this.showValidationErrorModal();const o=new FormData;o.set("organisation_name",this.organisationNameModel),o.set("organisation_email",this.organisationEmailModel),o.set("organisation_website",this.organisationWebsiteModel),this.showLoadingModal("Organisation"),C().post(`${this.rootUrl}organisation_information/${this.organisationResults[0].pk}/save/`,o).then((o=>{this.closeLoadingModal()})).catch((o=>{this.showErrorModal(o,"organisation",this.organisationResults[0].pk)}))}}},V=(0,n(3744).Z)(F,[["render",function(o,e,n,q,C,P){const B=(0,a.up)("n-button"),x=(0,a.up)("n-upload");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",s,[(0,a.kq)(" TITLE "),l,r,(0,a.kq)(" FIELDS SECTION "),(0,a._)("div",d,[u,(0,a._)("div",g,[(0,a._)("img",{src:`${o.staticUrl}/NearBeach/images/placeholder/product_tour.svg`,alt:"No Profile Picture",class:"organisation-profile-image"},null,8,c),m,(0,a.kq)('<button class="btn btn-primary">Update Profile...</button>'),(0,a.Wm)(x,{action:`${o.rootUrl}organisation_information/${n.organisationResults[0].pk}/update_profile/`,headers:{"X-CSRFTOKEN":o.getToken("csrftoken")},data:{}},{default:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[p])),_:1})])),_:1},8,["action","headers"])]),(0,a._)("div",h,[(0,a.kq)(" ORGANISATION NAME "),(0,a._)("div",_,[(0,a._)("label",M,[f,q.v$.organisationNameModel.$error.length>0?((0,a.wg)(),(0,a.iD)("span",v," Please suppy a title. ")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{id:"id_organisation_name","onUpdate:modelValue":e[0]||(e[0]=o=>C.organisationNameModel=o),type:"text",class:"form-control"},null,512),[[t.vModelText,C.organisationNameModel]])]),w,(0,a.kq)(" ORGANISATION WEBSITE "),(0,a._)("div",E,[(0,a._)("label",b,[y,q.v$.organisationWebsiteModel.$error.length>0?((0,a.wg)(),(0,a.iD)("span",k," Please supply a properly formatted URL ")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{id:"id_organisation_website","onUpdate:modelValue":e[1]||(e[1]=o=>C.organisationWebsiteModel=o),type:"text",class:"form-control"},null,512),[[t.vModelText,C.organisationWebsiteModel]])]),I,(0,a.kq)(" ORGANISATION EMAIL "),(0,a._)("div",U,[(0,a._)("label",N,[S,q.v$.organisationEmailModel.$error.length>0?((0,a.wg)(),(0,a.iD)("span",O," Please supply a valid Email ")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{id:"id_organisation_email","onUpdate:modelValue":e[2]||(e[2]=o=>C.organisationEmailModel=o),type:"text",class:"form-control"},null,512),[[t.vModelText,C.organisationEmailModel]])])])]),T,(0,a.kq)(" NEED TO APPLY PERMISSIONS "),(0,a.kq)(" Submit Button "),$,(0,a._)("div",L,[(0,a._)("div",R,[(0,a._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[3]||(e[3]=(...o)=>P.updateOrganisation&&P.updateOrganisation(...o))},"Update Organisation")])])])])}]])},3058:(o,e,n)=>{n.d(e,{Z:()=>t});var a=n(5169);const t={methods:{showErrorModal:function(o,e,n){new a.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${o}`,new a.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new a.u_(document.getElementById("errorModal")).show()}}}},106:(o,e,n)=>{n.d(e,{Z:()=>a});const a={methods:{getToken:function(o){var e=new RegExp(o+"=([^;]+)").exec(document.cookie);return null!=e?encodeURIComponent(e[1]):null}}}},8416:(o,e,n)=>{n.d(e,{Z:()=>t});var a=n(5169);const t={methods:{closeLoadingModal:function(){var o=new a.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{o.hide()}),1e3)},showLoadingModal:function(o){new a.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${o} details`}}}}}]);