"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6367],{6367:(t,s,e)=>{e.d(s,{Z:()=>Gt});var o=e(6252),i=e(3577);const a=(0,o.Uk)(" Groups"),r={class:"text-instructions"},l={class:"table group-and-user-table"},n=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("td",{colspan:"2"},"Group Name")])],-1),d={key:0,class:"remove-link"},u={class:"row submit-row"},c={class:"col-md-12"},p=(0,o._)("hr",null,null,-1),h=(0,o.Uk)(" Users"),g={class:"text-instructions"},m={key:0,class:"alert alert-dark"},_={key:1,class:"user-card-layouts"},b=["src"],U={class:"user-details"},v=(0,o._)("br",null,null,-1),f=(0,o._)("div",{class:"spacer"},null,-1),y={key:0,class:"remove-user"},w={class:"row submit-row"},L={class:"col-md-12"};var k=e(3058),D=e(5808),S=e(6542),$=e(9669),G=e.n($),I=e(5169);const M={class:"modal fade",id:"addGroupModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},x={class:"modal-dialog modal-lg"},A={class:"modal-content"},C={class:"modal-header"},N=(0,o.Uk)(" Add Group Wizard"),W=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addGroupCloseButton"},[(0,o._)("span",{"aria-hidden":"true"})],-1),B={class:"modal-body"},q={key:0,class:"row"},E={class:"col-md-4"},R=(0,o._)("strong",null,"Add Groups",-1),Z={class:"text-instructions"},O={class:"text-instructions"},F={class:"col-md-8"},T={key:1,class:"row"},j=(0,o._)("div",{class:"col-md-6"},[(0,o._)("strong",null,"Sorry - no results"),(0,o._)("p",{class:"text-instructions"},[(0,o.Uk)(" This could be because "),(0,o._)("ul",null,[(0,o._)("li",null,"There are no more groups left to add")])])],-1),z={class:"col-md-6 no-search"},P=["src"],J={class:"modal-footer"},H=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),K=["disabled"];var Y=e(9860),Q=e(4250);const V=e(9669),X={name:"AddGroupWizard",components:{Icon:S.JO,NSelect:Y.Z},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,Q.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[k.Z,D.Z],data:()=>({groupFixList:[],groupModel:[]}),methods:{addGroup:function(){const t=new FormData;this.groupModel.forEach((s=>{t.append("group_list",s)})),V.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_group/`,t).then((t=>{this.$emit("update_group_list",t.data),document.getElementById("addGroupCloseButton").click(),this.getGroupList()})).catch((t=>{this.showErrorModal(t,this.destination)}))},getGroupList:function(){V.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/group_list_all/`).then((t=>{this.groupFixList=t.data.map((t=>({value:t.pk,label:t.fields.group_name})))})).catch((t=>{this.showErrorModal(t,this.destination)}))}},mounted(){setTimeout((()=>{this.getGroupList()}),200)}};var tt=e(3744);const st=(0,tt.Z)(X,[["render",function(t,s,e,a,r,l){const n=(0,o.up)("Icon"),d=(0,o.up)("n-select");return(0,o.wg)(),(0,o.iD)("div",M,[(0,o._)("div",x,[(0,o._)("div",A,[(0,o._)("div",C,[(0,o._)("h2",null,[(0,o.Wm)(n,{icon:t.icons.groupPresentation},null,8,["icon"]),N]),W]),(0,o._)("div",B,[r.groupFixList.length>0?((0,o.wg)(),(0,o.iD)("div",q,[(0,o._)("div",E,[R,(0,o._)("p",Z," Use the following multiple select to select which groups you want to add to this "+(0,i.toDisplayString)(e.destination)+". ",1),(0,o._)("p",O," Please note: A user's group has to be added to the "+(0,i.toDisplayString)(e.destination)+" before the user can be added. ",1)]),(0,o._)("div",F,[(0,o.Wm)(d,{options:r.groupFixList,value:r.groupModel,"onUpdate:value":s[0]||(s[0]=t=>r.groupModel=t),multiple:""},null,8,["options","value"])])])):((0,o.wg)(),(0,o.iD)("div",T,[j,(0,o._)("div",z,[(0,o._)("img",{src:`${t.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,P)])]))]),(0,o._)("div",J,[H,(0,o._)("button",{type:"button",class:"btn btn-primary",disabled:0==r.groupModel.length,onClick:s[1]||(s[1]=(...t)=>l.addGroup&&l.addGroup(...t))},"Add Group(s)",8,K)])])])])}]]),et={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ot={class:"modal-dialog modal-lg"},it={class:"modal-content"},at={class:"modal-header"},rt=(0,o.Uk)(" Add User Wizard"),lt=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addUserCloseButton"},[(0,o._)("span",{"aria-hidden":"true"})],-1),nt={class:"modal-body"},dt={key:0,class:"row"},ut={class:"col-md-4"},ct=(0,o._)("strong",null,"Add Users",-1),pt={class:"text-instructions"},ht={class:"text-instructions"},gt={class:"col-md-8"},mt={key:1,class:"row"},_t={class:"col-md-6"},bt=(0,o._)("strong",null,"Sorry - no results",-1),Ut={class:"text-instructions"},vt=(0,o.Uk)(" This could be because "),ft=(0,o._)("li",null,"There are no more users left to add",-1),yt={class:"col-md-6 no-search"},wt=["src"],Lt={class:"modal-footer"},kt=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),Dt=["disabled"],St={name:"AddUserWizard",components:{Icon:S.JO,NSelect:Y.Z},props:{destination:{type:String,default:""},locationId:{type:Number,default:0},refreshUserList:{type:Boolean,default:!1}},mixins:[k.Z,D.Z],computed:{...(0,Q.Se)({rootUrl:"getRootUrl",staticURL:"getStaticUrl"})},data:()=>({userFixList:[],userModel:[]}),methods:{addUser:function(){const t=new FormData;this.userModel.forEach((s=>{t.append("user_list",s)})),G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_user/`,t).then((t=>{this.$emit("update_user_list",t.data),document.getElementById("addUserCloseButton").click(),this.userModel=[],this.getUserList()})).catch((t=>{this.showErrorModal(t,this.destination)}))},getUserList:function(){G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/user_list_all/`).then((t=>{this.userFixList=t.data.map((t=>({value:t.id,label:`${t.username}: ${t.first_name} ${t.last_name}`})))}))}},watch:{refreshUserList:function(){this.refreshUserList&&this.getUserList(),this.$emit("reset_refresh_user_list")}},mounted(){setTimeout((()=>{this.getUserList()}),200)}},$t={name:"GroupsAndUsersModule",components:{AddGroupWizard:st,AddUserWizard:(0,tt.Z)(St,[["render",function(t,s,e,a,r,l){const n=(0,o.up)("Icon"),d=(0,o.up)("n-select");return(0,o.wg)(),(0,o.iD)("div",et,[(0,o._)("div",ot,[(0,o._)("div",it,[(0,o._)("div",at,[(0,o._)("h2",null,[(0,o.Wm)(n,{icon:t.icons.userIcon},null,8,["icon"]),rt]),lt]),(0,o._)("div",nt,[r.userFixList.length>0?((0,o.wg)(),(0,o.iD)("div",dt,[(0,o._)("div",ut,[ct,(0,o._)("p",pt," Use the following multiple select to select which users you want to add to this "+(0,i.toDisplayString)(e.destination)+". ",1),(0,o._)("p",ht," Please note: A user's group has to be added to the "+(0,i.toDisplayString)(e.destination)+" before the user can be added. ",1)]),(0,o._)("div",gt,[(0,o.Wm)(d,{options:r.userFixList,value:r.userModel,"onUpdate:value":s[0]||(s[0]=t=>r.userModel=t),multiple:""},null,8,["options","value"])])])):((0,o.wg)(),(0,o.iD)("div",mt,[(0,o._)("div",_t,[bt,(0,o._)("p",Ut,[vt,(0,o._)("ul",null,[ft,(0,o._)("li",null," The user you are after is in a group not current added to this "+(0,i.toDisplayString)(e.destination),1)])])]),(0,o._)("div",yt,[(0,o._)("img",{src:`${t.staticURL}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,wt)])]))]),(0,o._)("div",Lt,[kt,(0,o._)("button",{type:"button",class:"btn btn-primary",disabled:0===r.userModel.length,onClick:s[1]||(s[1]=(...t)=>l.addUser&&l.addUser(...t))},"Add User(s)",8,Dt)])])])])}]]),Icon:S.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,Q.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"})},mixins:[k.Z,D.Z],data:()=>({groupList:[],refreshUserListBoolean:!1,userList:[]}),methods:{addNewGroup:function(){new I.u_(document.getElementById("addGroupModal")).show()},addNewUser:function(){new I.u_(document.getElementById("addUserModal")).show()},getGroupList:function(){G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/group_list/`).then((t=>{this.groupList=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},getUserList:function(){G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/user_list/`).then((t=>{this.userList=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},removeGroup:function(t){const s=new FormData;s.set("group_id",t),G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_group/`,s).then((()=>{let s=JSON.parse(JSON.stringify(this.groupList));this.groupList=s.filter((s=>s.pk!==t))})).catch((t=>{this.showErrorModal(t,this.destination)}))},removeUser:function(t){this.userList=this.userList.filter((s=>s.username!==t));const s=new FormData;s.set("username",t),G().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_user/`,s).catch((t=>{this.showErrorModal(t,this.destination)}))},resetRefreshUserList:function(){this.refreshUserListBoolean=!1},updateGroupList:function(t){this.groupList=t,this.refreshUserListBoolean=!0},updateUserList:function(t){this.userList=t}},mounted(){setTimeout((()=>{this.getGroupList(),this.getUserList()}),200)}},Gt=(0,tt.Z)($t,[["render",function(t,s,e,k,D,S){const $=(0,o.up)("Icon"),G=(0,o.up)("add-group-wizard"),I=(0,o.up)("add-user-wizard");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.kq)(" GROUPS "),(0,o._)("h2",null,[(0,o.Wm)($,{icon:t.icons.groupPresentation},null,8,["icon"]),a]),(0,o._)("p",r," The following list are all the Groups connected to this "+(0,i.toDisplayString)(e.destination)+". Users will have to be included in these groups to be added to this "+(0,i.toDisplayString)(e.destination),1),(0,o._)("table",l,[n,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(D.groupList,(s=>((0,o.wg)(),(0,o.iD)("tr",{key:s.pk},[(0,o._)("td",null,(0,i.toDisplayString)(s.fields.group_name),1),(0,o._)("td",null,[t.userLevel>=2?((0,o.wg)(),(0,o.iD)("span",d,[D.groupList.length>1?((0,o.wg)(),(0,o.j4)($,{key:0,icon:t.icons.trashCan,onClick:t=>S.removeGroup(s.pk)},null,8,["icon","onClick"])):(0,o.kq)("v-if",!0)])):(0,o.kq)("v-if",!0)])])))),128))])]),(0,o.kq)(" ADD GROUP "),(0,o.kq)(" TO DO - limit it to certain users "),(0,o._)("div",u,[(0,o._)("div",c,[t.userLevel>1?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:s[0]||(s[0]=(...t)=>S.addNewGroup&&S.addNewGroup(...t))},"Add Group to "+(0,i.toDisplayString)(e.destination),1)):(0,o.kq)("v-if",!0)])]),p,(0,o.kq)(" USERS "),(0,o._)("h2",null,[(0,o.Wm)($,{icon:t.icons.userIcon},null,8,["icon"]),h]),(0,o._)("p",g," The following are a list of users who are connected to this "+(0,i.toDisplayString)(e.destination)+". Please note - users have to be a part of the groups list above. ",1),0==D.userList.length?((0,o.wg)(),(0,o.iD)("div",m," Sorry - there are no current users active. ")):((0,o.wg)(),(0,o.iD)("div",_,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(D.userList,(s=>((0,o.wg)(),(0,o.iD)("div",{key:s.username,class:"user-card"},[(0,o._)("img",{src:`${t.staticUrl}/NearBeach/images/placeholder/people_tax.svg`,alt:"default profile",class:"default-user-profile"},null,8,b),(0,o._)("div",U,[(0,o._)("strong",null,(0,i.toDisplayString)(s.first_name)+" "+(0,i.toDisplayString)(s.last_name),1),v,(0,o.Uk)(" "+(0,i.toDisplayString)(s.username)+" ",1),f,(0,o.Uk)(" "+(0,i.toDisplayString)(s.email),1)]),t.userLevel>=3?((0,o.wg)(),(0,o.iD)("div",y,[(0,o.Wm)($,{icon:t.icons.trashCan,onClick:t=>S.removeUser(s.username)},null,8,["icon","onClick"])])):(0,o.kq)("v-if",!0)])))),128))])),(0,o.kq)(" TO DO - limit it to certain users "),(0,o._)("div",w,[(0,o._)("div",L,[t.userLevel>1?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:s[1]||(s[1]=(...t)=>S.addNewUser&&S.addNewUser(...t))},"Add User to "+(0,i.toDisplayString)(e.destination),1)):(0,o.kq)("v-if",!0)])]),(0,o.kq)(" MODALS "),(0,o.kq)(" ADD GROUPS WIZARD "),(0,o.Wm)(G,{destination:e.destination,"location-id":e.locationId,onUpdate_group_list:s[2]||(s[2]=t=>S.updateGroupList(t))},null,8,["destination","location-id"]),(0,o.kq)(" ADD USER WIZARD "),(0,o.Wm)(I,{destination:e.destination,"location-id":e.locationId,"refresh-user-list":D.refreshUserListBoolean,onUpdate_user_list:s[3]||(s[3]=t=>S.updateUserList(t)),onReset_refresh_user_list:s[4]||(s[4]=t=>S.resetRefreshUserList(t))},null,8,["destination","location-id","refresh-user-list"])])}]])}}]);