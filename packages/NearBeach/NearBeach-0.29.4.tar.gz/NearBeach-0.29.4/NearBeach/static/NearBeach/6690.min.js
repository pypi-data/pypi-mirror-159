"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6690],{7267:(t,e,o)=>{o.d(e,{Z:()=>f});var n,i=o(6252),d=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],s=function(t){return-1!==d.map((function(t){return t.toLowerCase()})).indexOf(t.toLowerCase())},l=0,a=function(t){var e=Date.now();return t+"_"+Math.floor(1e9*Math.random())+ ++l+String(e)},r=function(t){return void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" ")},c=function(){return{listeners:[],scriptId:a("tiny-script"),scriptLoaded:!1}},u=(n=c(),{load:function(t,e,o){n.scriptLoaded?o():(n.listeners.push(o),t.getElementById(n.scriptId)||function(t,e,o,i){var d=e.createElement("script");d.referrerPolicy="origin",d.type="application/javascript",d.id=t,d.src=o;var s=function(){d.removeEventListener("load",s),n.listeners.forEach((function(t){return t()})),n.scriptLoaded=!0};d.addEventListener("load",s),e.head&&e.head.appendChild(d)}(n.scriptId,t,e))},reinitialize:function(){n=c()}}),m=function(){var t="undefined"!=typeof window?window:o.g;return t&&t.tinymce?t.tinymce:null},p={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},h=o(2262),g=function(){return g=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},g.apply(this,arguments)};const f=(0,i.aZ)({props:p,setup:function(t,e){var o=t.init?g({},t.init):{},n=(0,h.BK)(t),d=n.disabled,l=n.modelValue,c=n.tagName,p=(0,h.iH)(null),f=null,_=t.id||a("tiny-vue"),y=t.init&&t.init.inline||t.inline,b=!!e.attrs["onUpdate:modelValue"],v=!0,D=t.initialValue?t.initialValue:"",w="",k=function(){var n,d,a,c=(n=v,b?function(){return(null==l?void 0:l.value)?l.value:""}:function(){return n?D:w}),u=g(g({},o),{readonly:t.disabled,selector:"#"+_,plugins:(d=o.plugins,a=t.plugins,r(d).concat(r(a))),toolbar:t.toolbar||o.toolbar,inline:y,setup:function(n){f=n,n.on("init",(function(o){return function(t,e,o,n,d,l){n.setContent(l()),o.attrs["onUpdate:modelValue"]&&function(t,e,o,n){var d=t.modelEvents?t.modelEvents:null,s=Array.isArray(d)?d.join(" "):d;(0,i.YP)(n,(function(e,n){o&&"string"==typeof e&&e!==n&&e!==o.getContent({format:t.outputFormat})&&o.setContent(e)})),o.on(s||"change input undo redo",(function(){e.emit("update:modelValue",o.getContent({format:t.outputFormat}))}))}(e,o,n,d),function(t,e,o){Object.keys(e).filter(s).forEach((function(n){var i=e[n];"function"==typeof i&&("onInit"===n?i(t,o):o.on(n.substring(2),(function(t){return i(t,o)})))}))}(t,o.attrs,n)}(o,t,e,n,l,c)})),"function"==typeof o.setup&&o.setup(n)}});(function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()})(p.value)&&(p.value.style.visibility=""),m().init(u),v=!1};return(0,i.YP)(d,(function(t){null!==f&&f.setMode(t?"readonly":"design")})),(0,i.YP)(c,(function(t){var e;b||(w=f.getContent()),null===(e=m())||void 0===e||e.remove(f),(0,i.Y3)((function(){return k()}))})),(0,i.bv)((function(){if(null!==m())k();else if(p.value&&p.value.ownerDocument){var e=t.cloudChannel?t.cloudChannel:"5",o=t.apiKey?t.apiKey:"no-api-key",n=null==t.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+o+"/tinymce/"+e+"/tinymce.min.js":t.tinymceScriptSrc;u.load(p.value.ownerDocument,n,k)}})),(0,i.Jd)((function(){null!==m()&&m().remove(f)})),y||((0,i.dl)((function(){v||k()})),(0,i.se)((function(){var t;b||(w=f.getContent()),null===(t=m())||void 0===t||t.remove(f)}))),e.expose({rerender:function(t){var e;w=f.getContent(),null===(e=m())||void 0===e||e.remove(f),o=g(g({},o),t),(0,i.Y3)((function(){return k()}))}}),function(){return y?function(t,e,o,n){return t(n||"div",{id:e,ref:o})}(i.h,_,p,t.tagName):(0,i.h)("textarea",{id:_,visibility:"hidden",ref:p})}}})},8798:(t,e,o)=>{o.d(e,{Z:()=>f});var n=o(6252),i=o(3577);const d={class:"customer-modules"},s={class:"card-body"},l={class:"single-customer-card"},a=["src"],r={class:"customer-card-name"},c=["href"],u={class:"customer-card-email"};var m=o(6542),p=o(5808),h=o(4250);const g={name:"CustomersListModule",components:{Icon:m.JO},props:{customerResults:{type:Array,default:()=>[]}},computed:{...(0,h.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"}),defaultCustomerImage:function(){return`${this.staticUrl}/NearBeach/images/placeholder/people_tax.svg`}},mixins:[p.Z],data:()=>({}),methods:{getCustomerImage:function(t){return""===t.fields.customer_profile_picture?this.defaultCustomerImage:t.fields.customer_profile_picture}}},f=(0,o(3744).Z)(g,[["render",function(t,e,o,m,p,h){const g=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",d,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.customerResults,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.pk,class:"card card-customer"},[(0,n._)("div",s,[(0,n._)("div",l,[(0,n._)("img",{src:h.getCustomerImage(e),alt:"default profile picture"},null,8,a),(0,n._)("div",r,[(0,n._)("a",{href:`${t.rootUrl}customer_information/${e.pk}/`},(0,i.toDisplayString)(e.fields.customer_first_name)+" "+(0,i.toDisplayString)(e.fields.customer_last_name),9,c)]),(0,n._)("div",u,[(0,n.Wm)(g,{icon:t.icons.mailIcon},null,8,["icon"]),(0,n.Uk)(" "+(0,i.toDisplayString)(e.fields.customer_email),1)])])])])))),128))])}]])},4246:(t,e,o)=>{o.d(e,{Z:()=>ee});var n=o(6252),i=o(3577);const d=(0,n.Uk)(" Documents"),s={class:"text-instructions"},l={key:0,class:"module-spacer"},a=[(0,n._)("div",{class:"alert alert-dark"},"Sorry - there are no documents or folders uploaded.",-1)],r={key:1,class:"document-widget"},c=(0,n._)("p",{class:"text-instructions"}," Go to Parent Directory... ",-1),u=["onClick"],m={class:"text-instructions"},p=["href"],h={class:"text-instructions"},g=(0,n._)("hr",null,null,-1),f={class:"btn-group save-changes"},_={key:0,class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},y={class:"dropdown-menu"};var b=o(9669),v=o.n(b),D=o(5169),w=o(6542),k=o(9963);const U={class:"modal fade",id:"addFolderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},L={class:"modal-dialog modal-lg"},M={class:"modal-content"},F={class:"modal-header"},I=(0,n.Uk)(" Add Folder Wizard"),x=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addFolderCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),S={class:"modal-body"},C={class:"row"},T=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Creating a folder"),(0,n._)("p",{class:"text-instructions"},' Give the folder an appropriate name. When done, click on the "Save" button. It will be added to the current folder. ')],-1),N={class:"col-md-8"},E={class:"form-group"},A=(0,n._)("label",{for:"folder_description"},"Folder Name",-1),Z={class:"modal-footer"},R=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),B=["disabled"];var $=o(4250),O=o(3058),W=o(5808);const P={name:"AddFolderWizard",components:{Icon:w.JO},props:{currentFolder:{type:String,default:"/"},destination:{type:String,default:"/"},existingFolders:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[O.Z,W.Z],data:()=>({disableAddFolderButton:!0,folderDescriptionModel:""}),computed:{...(0,$.Se)({rootUrl:"getRootUrl"})},methods:{addFolder:function(){const t=new FormData;t.set("folder_description",this.folderDescriptionModel),null!==this.currentFolder&&""!=this.currentFolder&&t.set("parent_folder",this.currentFolder),v().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_folder/`,t).then((t=>{this.$emit("update_folder_list",t.data),this.folderDescriptionModel="",document.getElementById("addFolderCloseButton").click()})).catch((t=>{this.showErrorModal(t,this.destination)}))}},updated(){var t=this.existingFolders.filter((t=>t.fields.folder_description==this.folderDescriptionModel));this.disableAddFolderButton=t.length>0||""==this.folderDescriptionModel}};var H=o(3744);const q=(0,H.Z)(P,[["render",function(t,e,o,i,d,s){const l=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("div",L,[(0,n._)("div",M,[(0,n._)("div",F,[(0,n._)("h2",null,[(0,n.Wm)(l,{icon:t.icons.userIcon},null,8,["icon"]),I]),x]),(0,n._)("div",S,[(0,n._)("div",C,[T,(0,n._)("div",N,[(0,n._)("div",E,[A,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>d.folderDescriptionModel=t),class:"form-control",id:"folder_description",maxlength:"50"},null,512),[[k.vModelText,d.folderDescriptionModel]])])])])]),(0,n._)("div",Z,[R,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:d.disableAddFolderButton,onClick:e[1]||(e[1]=(...t)=>s.addFolder&&s.addFolder(...t))}," Add Folder ",8,B)])])])])}]]),z={class:"modal fade",id:"addLinkModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},j={class:"modal-dialog modal-lg"},Y={class:"modal-content"},V={class:"modal-header"},K=(0,n.Uk)(" Add Link Wizard"),G=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addLinkCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),J={class:"modal-body"},Q={class:"row"},X=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Add Link"),(0,n._)("p",{class:"text-instruction"}," Add hyperlinks to other documents and sources located in on the internet/cloud. ")],-1),tt={class:"col-md-8"},et={class:"form-group"},ot={for:"document_url_location"},nt=(0,n.Uk)(" Document URL "),it={key:0,class:"error"},dt={key:1,class:"error"},st={class:"form-group"},lt={for:"document_description"},at=(0,n.Uk)(" Document Description "),rt={key:0,class:"error"},ct={key:1,class:"error"},ut={class:"modal-footer"},mt=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),pt=["disabled"];var ht=o(3766),gt=o(2587);const ft={name:"AddLinkWizard",setup:()=>({v$:(0,ht.ZP)()}),components:{Icon:w.JO},props:{currentFolder:{type:String,default:"/"},destination:{type:String,default:"/"},excludeDocuments:{type:Array,default:()=>[]},existingFolders:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[O.Z,W.Z],data:()=>({linkModel:"",disableAddButton:!0,documentDescriptionModel:"",documentUrlLocationModel:"",duplicateDescription:!1}),validations:{documentDescriptionModel:{required:gt.C1},documentUrlLocationModel:{required:gt.C1,url:gt.HQ}},computed:{...(0,$.Se)({rootUrl:"getRootUrl"})},methods:{addLink:function(){const t=new FormData;t.set("document_description",this.documentDescriptionModel),t.set("document_url_location",this.documentUrlLocationModel),null!==this.currentFolder&&""!=this.currentFolder&&t.set("parent_folder",this.currentFolder),v().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_link/`,t).then((t=>{this.$emit("update_document_list",t.data),this.documentDescriptionModel="",this.documentUrlLocationModel="",document.getElementById("addLinkCloseButton").click()})).catch((t=>{this.showErrorModal(t,this.destination)}))}},updated(){var t=this.excludeDocuments.filter((t=>t.document_key__document_description===this.documentDescriptionModel));this.duplicateDescription=t.length>0,this.v$.$touch(),this.disableAddButton=this.v$.$invalid||t.length>0}},_t=(0,H.Z)(ft,[["render",function(t,e,o,i,d,s){const l=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",z,[(0,n._)("div",j,[(0,n._)("div",Y,[(0,n._)("div",V,[(0,n._)("h2",null,[(0,n.Wm)(l,{icon:t.icons.userIcon},null,8,["icon"]),K]),G]),(0,n._)("div",J,[(0,n._)("div",Q,[X,(0,n._)("div",tt,[(0,n._)("div",et,[(0,n._)("label",ot,[nt,!i.v$.documentUrlLocationModel.required&&i.v$.documentUrlLocationModel.$dirty?((0,n.wg)(),(0,n.iD)("span",it," Please suppy a URL.")):(0,n.kq)("v-if",!0),!i.v$.documentUrlLocationModel.url&&i.v$.documentUrlLocationModel.$dirty?((0,n.wg)(),(0,n.iD)("span",dt," Please suppy a proper URL.")):(0,n.kq)("v-if",!0)]),(0,n.wy)((0,n._)("input",{id:"document_url_location","onUpdate:modelValue":e[0]||(e[0]=t=>d.documentUrlLocationModel=t),class:"form-control"},null,512),[[k.vModelText,d.documentUrlLocationModel]])]),(0,n._)("div",st,[(0,n._)("label",lt,[at,!i.v$.documentDescriptionModel.required&&i.v$.documentDescriptionModel.$dirty?((0,n.wg)(),(0,n.iD)("span",rt," Please suppy a description of the link.")):(0,n.kq)("v-if",!0),d.duplicateDescription?((0,n.wg)(),(0,n.iD)("span",ct," Sorry - but this is a duplicated description.")):(0,n.kq)("v-if",!0)]),(0,n.wy)((0,n._)("input",{id:"document_description","onUpdate:modelValue":e[1]||(e[1]=t=>d.documentDescriptionModel=t),class:"form-control",maxlength:"50"},null,512),[[k.vModelText,d.documentDescriptionModel]])])])])]),(0,n._)("div",ut,[mt,(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=(...t)=>s.addLink&&s.addLink(...t)),disabled:d.disableAddButton}," Add Link ",8,pt)])])])])}]]),yt={class:"modal fade",id:"uploadDocumentModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},bt={class:"modal-dialog modal-lg"},vt={class:"modal-content"},Dt={class:"modal-header"},wt=(0,n.Uk)(" Upload Document Wizard"),kt=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"uploadDocumentCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),Ut={class:"modal-body"},Lt={class:"row"},Mt={class:"col-md-4"},Ft=(0,n._)("strong",null,"Uploading File",-1),It={class:"text-instructions"},xt={key:0},St={key:1},Ct={key:2},Tt={class:"col-md-8"},Nt={key:0,class:"form-file"},Et={class:"mb-3"},At={for:"document",class:"form-label"},Zt=(0,n.Uk)(" Please upload a file"),Rt=(0,n._)("br",null,null,-1),Bt={key:0,class:"alert alert-warning"},$t=["accept"],Ot={key:1,class:"form-group"},Wt={class:"form-group"},Pt=(0,n._)("label",{for:"documentDescription"},"Document Description",-1),Ht=(0,n._)("br",null,null,-1),qt={class:"form-row"},zt={key:2},jt={key:0,class:"alert alert-warning"},Yt=(0,n._)("div",{class:"spinner-border text-primary",role:"status"},[(0,n._)("span",{class:"sr-only"},"Loading...")],-1),Vt=(0,n._)("div",{class:"alert alert-success"}," The document has been uploaded. The server is currently writing the file to disk. Please be patient - this modal will close automatically. Thank you ",-1),Kt={class:"modal-footer"},Gt=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),Jt=["disabled"],Qt={name:"UploadDocumentWizard",components:{Icon:w.JO},props:{acceptedDocuments:{type:String,default:"image/*,text/*,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"},currentFolder:{type:String,default:""},destination:{type:String,default:""},excludeDocuments:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[O.Z,W.Z],data:()=>({disableUploadButton:!0,documentModel:[],documentDescriptionModel:"",uploadPercentage:"",maxUploadSize:0,maxUploadString:"No Upload Limit",maxUploadWarning:!1}),computed:{...(0,$.Se)({staticUrl:"getStaticUrl",rootUrl:"getRootUrl"})},methods:{handleFileUploads:function(t){t[0].size*(0!=this.maxUploadSize)>this.maxUploadSize?this.maxUploadWarning=!0:(this.maxUploadWarning=!1,this.documentModel=t[0],this.documentDescriptionModel=t[0].name)},resetForm:function(){this.documentModel="",this.documentDescriptionModel="",this.uploadPercentage=""},uploadFile:function(){const t=new FormData;t.set("document",this.documentModel,this.documentDescriptionModel),t.set("document_description",this.documentDescriptionModel),""!=this.currentFolder&&null!==this.currentFolder&&t.set("parent_folder",this.currentFolder);const e={onUploadProgress:t=>{this.uploadPercentage=parseFloat(t.loaded)/parseFloat(t.total)}};v().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/upload/`,t,e).then((t=>{this.$emit("update_document_list",t.data),document.getElementById("uploadDocumentCloseButton").click(),this.resetForm()})).catch((t=>{this.showErrorModal(t,this.destination)}))}},watch:{maxUploadSize:function(){if(0===this.maxUploadSize)return"No Upload Limit";const t=Math.floor(Math.log(this.maxUploadSize)/Math.log(1024));this.maxUploadString=`Max Upload Size: ${parseFloat((this.maxUploadSize/Math.pow(1024,t)).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}`}},updated(){var t=this.excludeDocuments.filter((t=>t.document_key__document_description==this.documentDescriptionModel));this.disableUploadButton=""==this.documentModel||0==this.documentDescriptionModel.length||t.length>0},mounted(){setTimeout((()=>{v().post(`${this.rootUrl}documentation/get/max_upload/`).then((t=>{this.maxUploadSize=t.data.max_upload_size})).catch((t=>{this.showErrorModal(t,this.destination)}))}),200)}},Xt=(0,H.Z)(Qt,[["render",function(t,e,o,d,s,l){const a=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",yt,[(0,n._)("div",bt,[(0,n._)("div",vt,[(0,n._)("div",Dt,[(0,n._)("h2",null,[(0,n.Wm)(a,{icon:t.icons.userIcon},null,8,["icon"]),wt]),kt]),(0,n._)("div",Ut,[(0,n._)("div",Lt,[(0,n._)("div",Mt,[Ft,(0,n._)("p",It," You will be able to upload a file against this "+(0,i.toDisplayString)(o.destination)+". It will appear in the current folder. ",1),0===s.documentModel.length?((0,n.wg)(),(0,n.iD)("p",xt,' 1. Please click on "Upload File" button to upload a file ')):""===s.uploadPercentage?((0,n.wg)(),(0,n.iD)("p",St,' 2. Please modify the document descript to be more human readable. Or click the "Reset" button to remove the uploaded file. ')):((0,n.wg)(),(0,n.iD)("p",Ct," 3. Document is currently uploading. Please be patient. "))]),(0,n._)("div",Tt,[0===s.documentModel.length?((0,n.wg)(),(0,n.iD)("div",Nt,[(0,n._)("div",Et,[(0,n._)("label",At,[Zt,Rt,(0,n.Uk)(" "+(0,i.toDisplayString)(s.maxUploadString)+" ",1),s.maxUploadWarning?((0,n.wg)(),(0,n.iD)("div",Bt," Sorry - file too large ")):(0,n.kq)("v-if",!0)]),(0,n._)("input",{type:"file",class:"form-control",id:"document",accept:o.acceptedDocuments,onChange:e[0]||(e[0]=t=>l.handleFileUploads(t.target.files))},null,40,$t)])])):""==s.uploadPercentage?((0,n.wg)(),(0,n.iD)("div",Ot,[(0,n.kq)(" DOCUMENT DESCRIPTION "),(0,n._)("div",Wt,[Pt,(0,n.wy)((0,n._)("input",{id:"documentDescription","onUpdate:modelValue":e[1]||(e[1]=t=>s.documentDescriptionModel=t),type:"text",class:"form-control"},null,512),[[k.vModelText,s.documentDescriptionModel]])]),(0,n.kq)(" RESET FORM BUTTON "),Ht,(0,n._)("div",qt,[(0,n._)("button",{onClick:e[2]||(e[2]=(...t)=>l.resetForm&&l.resetForm(...t)),class:"btn btn-warning"}," Reset Form ")])])):((0,n.wg)(),(0,n.iD)("div",zt,[(0,n.kq)(" THE UPLOAD SPINNER "),parseFloat(s.uploadPercentage).toFixed(0)<1?((0,n.wg)(),(0,n.iD)("div",jt,[(0,n.Uk)(" Uploading "+(0,i.toDisplayString)((100*parseFloat(s.uploadPercentage)).toFixed(2))+"% ",1),Yt])):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.kq)(" THE FINAL WRITING "),Vt],2112))]))])])]),(0,n._)("div",Kt,[Gt,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:s.disableUploadButton,onClick:e[3]||(e[3]=(...t)=>l.uploadFile&&l.uploadFile(...t))}," Upload File ",8,Jt)])])])])}]]),te={name:"DocumentsModule",components:{AddFolderWizard:q,AddLinkWizard:_t,Icon:w.JO,UploadDocumentWizard:Xt},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},data:()=>({currentFolder:null,documentList:[],documentFilteredList:[],folderList:[],folderFilteredList:[]}),mixins:[W.Z],computed:{...(0,$.Se)({userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{addFolder:function(){new D.u_(document.getElementById("addFolderModal")).show()},addLink:function(){new D.u_(document.getElementById("addLinkModal")).show()},getDocumentList:function(){v().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/list/files/`).then((t=>{this.documentList=t.data,this.updateDocumentFilteredList()}))},getFolderList:function(){v().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/list/folders/`).then((t=>{this.folderList=t.data,this.updateFolderFilteredList()}))},getIcon:function(t){if(""!=t.document_key__document_url_location&&null!==t.document_key__document_url_location)return this.icons.linkOut;var e=t.document_key__document.split(".");switch(e[e.length-1]){case"jpg":case"png":case"bmp":return this.icons.imageIcon;case"doc":case"docx":return this.icons.microsoftWord;case"xls":case"xlsx":return this.icons.microsoftExcel;case"ppt":case"pptx":return this.icons.microsoftPowerpoint;case"pdf":return this.icons.documentPdf;default:return this.icons.documentText}},goToParentDirectory:function(){var t=this.folderList.filter((t=>t.pk==this.currentFolder))[0];this.updateCurrentFolder(t.fields.parent_folder)},shortName:function(t){return t.length<=50?t:`${t.substring(0,47)}...`},updateCurrentFolder:function(t){this.currentFolder=t,this.updateDocumentFilteredList(),this.updateFolderFilteredList()},updateDocumentList:function(t){this.documentList.push(t[0]),this.updateDocumentFilteredList()},updateDocumentFilteredList:function(){this.documentFilteredList=this.documentList.filter((t=>t.folder==this.currentFolder))},updateFolderList:function(t){this.folderList.push(t[0]),this.updateFolderFilteredList()},updateFolderFilteredList:function(){this.folderFilteredList=this.folderList.filter((t=>t.fields.parent_folder==this.currentFolder))},uploadDocument:function(){new D.u_(document.getElementById("uploadDocumentModal")).show()}},mounted(){setTimeout((()=>{this.getDocumentList(),this.getFolderList()}),200)}},ee=(0,H.Z)(te,[["render",function(t,e,o,b,v,D){const w=(0,n.up)("Icon"),k=(0,n.up)("add-folder-wizard"),U=(0,n.up)("add-link-wizard"),L=(0,n.up)("upload-document-wizard");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h2",null,[(0,n.Wm)(w,{icon:t.icons.bxBriefcase},null,8,["icon"]),d]),(0,n._)("p",s," The following is a folder structure of all documents uploaded to this "+(0,i.toDisplayString)(o.destination),1),(0,n.kq)(" DOCUMENT FOLDER TREE "),v.documentList.length+v.folderList.length==0?((0,n.wg)(),(0,n.iD)("div",l,a)):((0,n.wg)(),(0,n.iD)("div",r,[(0,n.kq)(" GO TO PARENT DIRECTORY "),null!=this.currentFolder?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:e[0]||(e[0]=t=>D.goToParentDirectory()),class:"document-child"},[(0,n.Wm)(w,{icon:t.icons.arrowUp,width:"80px",height:"80px"},null,8,["icon"]),c])):(0,n.kq)("v-if",!0),(0,n.kq)(" RENDER THE FOLDERS "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(v.folderFilteredList,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.pk,onClick:t=>D.updateCurrentFolder(e.pk),class:"document-child"},[(0,n.Wm)(w,{icon:t.icons.folderIcon,width:"80px",height:"80px"},null,8,["icon"]),(0,n._)("p",m,(0,i.toDisplayString)(D.shortName(e.fields.folder_description)),1)],8,u)))),128)),(0,n.kq)(" RENDER THE FILES "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(v.documentFilteredList,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.document_key_id,class:"document-child"},[(0,n._)("a",{href:`/private/${t.document_key_id}/`,rel:"noopener noreferrer",target:"_blank"},[(0,n.Wm)(w,{icon:D.getIcon(t),width:"80px",height:"80px"},null,8,["icon"]),(0,n._)("p",h,(0,i.toDisplayString)(D.shortName(t.document_key__document_description)),1)],8,p)])))),128))])),(0,n.kq)(" ADD DOCUMENTS AND FOLDER BUTTON "),g,(0,n._)("div",f,[t.userLevel>1?((0,n.wg)(),(0,n.iD)("button",_," New Document/File ")):(0,n.kq)("v-if",!0),(0,n._)("ul",y,[(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:e[1]||(e[1]=(...t)=>D.uploadDocument&&D.uploadDocument(...t))}," Upload Document ")]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:e[2]||(e[2]=(...t)=>D.addLink&&D.addLink(...t))}," Add Link ")]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:e[3]||(e[3]=(...t)=>D.addFolder&&D.addFolder(...t))}," Add Folder ")])])]),(0,n.kq)(" MODALS "),(0,n.kq)(" ADD FOLDER ID "),(0,n.Wm)(k,{destination:o.destination,"location-id":o.locationId,"current-folder":v.currentFolder,"existing-folders":v.folderFilteredList,onUpdate_folder_list:e[4]||(e[4]=t=>D.updateFolderList(t))},null,8,["destination","location-id","current-folder","existing-folders"]),(0,n.kq)(" ADD LINK WIZARD "),(0,n.Wm)(U,{destination:o.destination,"location-id":o.locationId,"current-folder":v.currentFolder,"exclude-documents":v.documentFilteredList,onUpdate_document_list:e[5]||(e[5]=t=>D.updateDocumentList(t))},null,8,["destination","location-id","current-folder","exclude-documents"]),(0,n.kq)(" UPLOAD DOCUMENT WIZARD "),(0,n.Wm)(L,{destination:o.destination,"location-id":o.locationId,"current-folder":v.currentFolder,"exclude-documents":v.documentFilteredList,onUpdate_document_list:e[6]||(e[6]=t=>D.updateDocumentList(t))},null,8,["destination","location-id","current-folder","exclude-documents"])])}]])},1271:(t,e,o)=>{o.d(e,{Z:()=>h});var n=o(6252),i=o(3577);const d={key:0,class:"module-spacer"},s={class:"alert alert-dark"},l={key:1},a={class:"table"},r=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("td",null,"Note")])],-1),c=["innerHTML"],u=(0,n._)("div",{class:"spacer"},null,-1),m={class:"small-text"},p={name:"ListNotes",props:{destination:{type:String,default:""},noteHistoryResults:{type:Array,default:function(){return[]}}}},h=(0,o(3744).Z)(p,[["render",function(t,e,o,p,h,g){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.kq)(" NOTE HISTORY "),0==o.noteHistoryResults.length?((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",s," Sorry - but there are no notes for this "+(0,i.toDisplayString)(o.destination)+". ",1)])):((0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("table",a,[r,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.noteHistoryResults,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.pk},[(0,n._)("td",null,[(0,n._)("div",{innerHTML:t.fields.object_note},null,8,c),u,(0,n._)("p",m,(0,i.toDisplayString)(t.fields.date_created),1)])])))),128))])])]))])}]])},4527:(t,e,o)=>{o.d(e,{Z:()=>W});var n=o(6252),i=o(5169),d=o(3058),s=o(5808),l=o(9669),a=o.n(l),r=o(3577);const c=(0,n._)("h2",null,"Assigned Tags",-1),u={class:"text-instructions"},m={class:"tag-list"},p=["onClick"],h=(0,n._)("hr",null,null,-1),g={class:"row submit-row"},f={class:"col-md-12"};var _=o(6542);const y={class:"modal fade",id:"addTagModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},b={class:"modal-dialog"},v={class:"modal-content"},D={class:"modal-header"},w=(0,n.Uk)(" Add Tags Wizard"),k=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addTagsCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),U={class:"modal-body"},L={class:"row"},M={class:"col-md-4"},F=(0,n._)("strong",null,"Add Tag",-1),I={class:"text-instructions"},x={class:"col-md-8"},S=(0,n._)("label",null,"All Tag List",-1),C={class:"modal-footer"},T=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);var N=o(9860),E=o(4250);const A={name:"AddTagWizard",components:{Icon:_.JO,NSelect:N.Z},props:{assignedTags:{type:Array,default:()=>[]},destination:String,locationId:Number},mixins:[d.Z,s.Z],data:()=>({allTagList:[],tagModel:[]}),computed:{...(0,E.Se)({rootUrl:"getRootUrl"}),tagList:function(){return this.allTagList.filter((t=>this.assignedTags.findIndex((e=>e.pk==t.value))<0))}},methods:{addTag:function(){const t=new FormData;this.tagModel.forEach((e=>{t.append("tag_id",e)})),a().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_tags/`,t).then((t=>{this.$emit("add_tags",t.data),document.getElementById("addTagsCloseButton").click(),this.tagModel=[]}))},getTagList:function(){a().post(`${this.rootUrl}object_data/tag_list_all/`).then((t=>{this.allTagList=t.data.map((t=>({value:t.pk,label:t.fields.tag_name})))})).catch((t=>{}))}},mounted(){setTimeout((()=>{this.getTagList()}),200)}};var Z=o(3744);const R=(0,Z.Z)(A,[["render",function(t,e,o,i,d,s){const l=(0,n.up)("Icon"),a=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",y,[(0,n._)("div",b,[(0,n._)("div",v,[(0,n._)("div",D,[(0,n._)("h2",null,[(0,n.Wm)(l,{icon:t.icons.usersIcon},null,8,["icon"]),w]),k]),(0,n._)("div",U,[(0,n._)("div",L,[(0,n._)("div",M,[F,(0,n._)("p",I," Use the dropdown to select one or many lables to add to the "+(0,r.toDisplayString)(o.destination)+". ",1)]),(0,n._)("div",x,[S,(0,n.Wm)(a,{label:"tag",multiple:"",options:s.tagList,value:d.tagModel,"onUpdate:value":e[0]||(e[0]=t=>d.tagModel=t)},null,8,["options","value"])])])]),(0,n._)("div",C,[T,(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>s.addTag&&s.addTag(...t))},"Add Tag")])])])])}]]),B=o(9669),$={name:"ListTagsModule",components:{AddTagWizard:R,Icon:_.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},data:()=>({tagList:[]}),mixins:[s.Z],computed:{...(0,E.Se)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{addTags:function(t){this.tagList=t},createNewTag:function(){new i.u_(document.getElementById("addTagModal")).show()},getAssignedTags:function(){B.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/tag_list/`).then((t=>{this.tagList=t.data})).catch((t=>{}))},removeTag:function(t){const e=new FormData;e.set("tag",t),e.set("object_enum",this.destination),e.set("object_id",this.locationId),B.post(`${this.rootUrl}object_data/delete_tag/`,e).then((e=>{this.tagList=this.tagList.filter((e=>e.pk!==t))})).catch((t=>{}))}},mounted(){setTimeout((()=>{this.getAssignedTags()}),200)}},O={name:"MiscModule",components:{ListTagsModule:(0,Z.Z)($,[["render",function(t,e,o,i,d,s){const l=(0,n.up)("Icon"),a=(0,n.up)("add-tag-wizard");return(0,n.wg)(),(0,n.iD)("div",null,[c,(0,n._)("p",u," Here are all tags associated with this "+(0,r.toDisplayString)(o.destination)+'. You can add more tags by clicking on the "Add Tag" button. ',1),(0,n._)("div",m,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.tagList,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.pk,class:"single-tag",style:(0,r.normalizeStyle)(`background-color: ${e.fields.tag_colour};`)},[(0,n.Uk)((0,r.toDisplayString)(e.fields.tag_name)+" ",1),t.userLevel>1?((0,n.wg)(),(0,n.iD)("span",{key:0,onClick:t=>s.removeTag(e.pk)},[(0,n.Wm)(l,{icon:t.icons.xCircle},null,8,["icon"])],8,p)):(0,n.kq)("v-if",!0)],4)))),128))]),(0,n.kq)(" ADD TAG BUTTON "),h,(0,n._)("div",g,[(0,n._)("div",f,[t.userLevel>1?((0,n.wg)(),(0,n.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>s.createNewTag&&s.createNewTag(...t))},"Add Tag to "+(0,r.toDisplayString)(o.destination),1)):(0,n.kq)("v-if",!0)])]),(0,n.kq)(" ADD TAG MODULE "),(0,n.Wm)(a,{destination:o.destination,"location-id":o.locationId,"assigned-tags":d.tagList,onAdd_tags:e[1]||(e[1]=t=>s.addTags(t))},null,8,["destination","location-id","assigned-tags"])])}]])},props:["destination","locationId"],mixins:[d.Z,s.Z],computed:{...(0,E.Se)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},data:()=>({noteHistoryResults:[]}),methods:{createNewNote:function(){new i.u_(document.getElementById("newNoteModal")).show()},getNoteHistoryResults:function(){a().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/note_list/`).then((t=>{this.noteHistoryResults=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateNoteHistoryResults:function(t){this.noteHistoryResults.push(t[0])}},mounted(){setTimeout((()=>{this.getNoteHistoryResults()}),200)}},W=(0,Z.Z)(O,[["render",function(t,e,o,i,d,s){const l=(0,n.up)("list-tags-module");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(l,{destination:o.destination,"location-id":o.locationId},null,8,["destination","location-id"])])}]])},9555:(t,e,o)=>{o.d(e,{Z:()=>E});var n=o(6252),i=o(3577);const d=(0,n.Uk)(" Note History"),s={class:"text-instructions"},l=(0,n._)("hr",null,null,-1),a={class:"row submit-row"},r={class:"col-md-12"};var c=o(5169),u=o(3058),m=o(5808),p=o(9669),h=o.n(p),g=o(6542),f=o(1271);const _={class:"modal fade",id:"newNoteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},y={class:"modal-dialog modal-lg",role:"document"},b={class:"modal-content"},v={class:"modal-header"},D=(0,n.Uk)(" New Note"),w=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newNoteCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),k={class:"modal-body"},U=(0,n._)("p",{class:"text-instructions"}," Use the text editor to type out your note. Click on the submit button to submit the note. ",-1),L={class:"modal-footer"},M=["disabled"],F=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var I=o(7267),x=o(4250);const S={name:"NewHistoryNoteWizard",components:{editor:I.Z,Icon:g.JO},props:["locationId","destination"],mixins:[u.Z,m.Z],data:()=>({newNoteModel:""}),computed:{...(0,x.Se)({rootUrl:"getRootUrl"})},methods:{submitNote:function(){const t=new FormData;t.set("destination",this.destination),t.set("location_id",this.locationId),t.set("note",this.newNoteModel),h().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_notes/`,t).then((t=>{this.$emit("update_note_history_results",t.data),document.getElementById("newNoteCloseButton").click()})).catch((t=>{this.showErrorModal(t,this.destination)}))}}};var C=o(3744);const T=(0,C.Z)(S,[["render",function(t,e,o,i,d,s){const l=(0,n.up)("Icon"),a=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.kq)(" NEW HISTORY NOTE "),(0,n._)("div",_,[(0,n._)("div",y,[(0,n._)("div",b,[(0,n._)("div",v,[(0,n._)("h2",null,[(0,n.Wm)(l,{icon:t.icons.noteAdd},null,8,["icon"]),D]),w]),(0,n._)("div",k,[U,(0,n.Wm)(a,{init:{height:300,menubar:!1,plugins:["lists","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:d.newNoteModel,"onUpdate:modelValue":e[0]||(e[0]=t=>d.newNoteModel=t)},null,8,["modelValue"])]),(0,n._)("div",L,[(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:""==d.newNoteModel,onClick:e[1]||(e[1]=(...t)=>s.submitNote&&s.submitNote(...t))}," Submit Note ",8,M),F])])])])],2112)}]]),N={name:"NotesModule",components:{Icon:g.JO,ListNotes:f.Z,NewHistoryNoteWizard:T},props:["destination","locationId"],mixins:[u.Z,m.Z],data:()=>({noteHistoryResults:[]}),computed:{...(0,x.Se)({userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{createNewNote:function(){new c.u_(document.getElementById("newNoteModal")).show()},getNoteHistoryResults:function(){h().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/note_list/`).then((t=>{this.noteHistoryResults=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateNoteHistoryResults:function(t){this.noteHistoryResults.push(t[0])}},mounted(){setTimeout((()=>{this.getNoteHistoryResults()}),200)}},E=(0,C.Z)(N,[["render",function(t,e,o,c,u,m){const p=(0,n.up)("Icon"),h=(0,n.up)("list-notes"),g=(0,n.up)("new-history-note-wizard");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h2",null,[(0,n.Wm)(p,{icon:t.icons.noteAdd},null,8,["icon"]),d]),(0,n._)("p",s," The following are saved notes against this "+(0,i.toDisplayString)(o.destination)+". Add notes by clicking on the button below. ",1),(0,n.Wm)(h,{"note-history-results":u.noteHistoryResults,destination:o.destination},null,8,["note-history-results","destination"]),(0,n.kq)(" ADD NOTE HISTORY "),(0,n.kq)(" TO DO - limit it to certain users "),l,(0,n._)("div",a,[(0,n._)("div",r,[t.userLevel>1?((0,n.wg)(),(0,n.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>m.createNewNote&&m.createNewNote(...t))},"Add Note to "+(0,i.toDisplayString)(o.destination),1)):(0,n.kq)("v-if",!0)])]),(0,n.kq)(" Modals for Notes section "),(0,n.Wm)(g,{"location-id":o.locationId,destination:o.destination,onUpdate_note_history_results:e[1]||(e[1]=t=>m.updateNoteHistoryResults(t))},null,8,["location-id","destination"])])}]])},3058:(t,e,o)=>{o.d(e,{Z:()=>i});var n=o(5169);const i={methods:{showErrorModal:function(t,e,o){new n.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${t}`,new n.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new n.u_(document.getElementById("errorModal")).show()}}}},5808:(t,e,o)=>{o.d(e,{Z:()=>I});var n=o(3985),i=o(5555),d=o(1826),s=o(6443),l=o(1327),a=o(8521),r=o(1056),c=o(4324),u=o(9672),m=o(9867),p=o(1239),h=o(5004),g=o(1321),f=o(1216),_=o(5550),y=o(7702),b=o(7903),v=o(2606),D=o(3843),w=o(2393),k=o(3360),U=o(9714),L=o(1323),M=o(2610),F=o(5968);const I={data:()=>({icons:{arrowUp:n.Z,bugIcon:i.Z,bxBriefcase:d.Z,cardChecklist:s.Z,clipboardIcon:l.Z,documentPdf:a.Z,documentText:r.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:m.Z,infoCircle:p.Z,linkIcon:h.Z,linkIcon2:g.Z,linkOut:f.Z,mailIcon:_.Z,microsoftExcel:y.Z,microsoftPowerpoint:b.Z,microsoftWord:v.Z,noteAdd:D.Z,objectStorage:w.Z,passwordIcon:k.Z,trashCan:U.Z,userIcon:L.Z,usersIcon:M.Z,xCircle:F.Z}})}}}]);