"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1773],{1773:(t,e,i)=>{i.r(e),i.d(e,{default:()=>ht});var s=i(6252),l=i(3577);const n=(0,s.Uk)(" Bugs List"),a={class:"text-instructions"},o={key:0,class:"spacer"},u={class:"alert alert-dark"},r={key:1},d={class:"table"},c=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td",null,"Bug Description"),(0,s._)("td",null,"Status")])],-1),g=["href"],h=(0,s._)("div",{class:"spacer"},null,-1),_={class:"small-text"},b={key:0,class:"remove-link"},m=(0,s._)("hr",null,null,-1),p={class:"row submit-row"},y={class:"col-md-12"};var v=i(9669),B=i.n(v),f=i(5169),w=i(6542),k=i(9963);const S={class:"modal fade",id:"addBugModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},D={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},L={class:"modal-content"},C={class:"modal-header"},M=(0,s.Uk)(" Add Bugs Wizard"),U=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addBugsCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),T={class:"modal-body"},I={class:"row"},$={class:"col-md-4"},x=(0,s._)("strong",null,"Adding Bugs",-1),q={class:"text-instructions"},O={class:"col-md-8"},A={class:"form-group"},N=(0,s._)("label",null,"Bug Client",-1),R=(0,s._)("br",null,null,-1),W={class:"form-group"},j=(0,s._)("label",null,"Search Keywords",-1),E=["disabled"],Z=(0,s._)("br",null,null,-1),H={key:0,class:"no-search"},z=(0,s._)("strong",null,"Currently Searching for Bugs",-1),K=(0,s._)("br",null,null,-1),F=["src"],P={key:1,class:"no-search"},J=(0,s._)("strong",null,"No Search Results Sorry",-1),Y=(0,s._)("br",null,null,-1),G=["src"],V={key:2,id:"bug_results_div"},Q={class:"table"},X=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td"),(0,s._)("td",null,"Bug Description"),(0,s._)("td",null,"Bug Status")])],-1),tt=["id"],et=["onClick"],it=(0,s._)("div",{class:"spacer"},null,-1),st={class:"small-text"},lt={class:"small-text"},nt=(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1);var at=i(3058),ot=i(5808),ut=i(9860),rt=i(4250);const dt={name:"AddBugWizard",components:{Icon:w.JO,NSelect:ut.Z},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,rt.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[at.Z,ot.Z],data:()=>({bugClientModel:"",bugClientList:[],bugResults:[],searchModel:"",searchOn:!1,searchTimer:""}),methods:{loadBugClientList:function(){B().post(`${this.rootUrl}object_data/bug_client_list/`).then((t=>{this.bugClientList=t.data.map((t=>({value:t.pk,label:t.fields.bug_client_name})))}))},startSearchTimer:function(){""!=this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout((()=>{this.startSearch()}),700)},startSearch:function(){if(""===this.searchModel)return;this.searchOn=!0;const t=new FormData;t.set("bug_client_id",this.bugClientModel),t.set("search",this.searchModel),B().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/query_bug_client/`,t).then((t=>{this.bugResults=t.data,this.searchOn=!1})).catch((t=>{this.showErrorModal(t,this.destination)}))},submitBug:function(t){var e=document.getElementById(`bug_no_${t}`);e.innerHTML="Adding Bug";var i=this.bugResults.filter((e=>e.id==t));const s=new FormData;s.set("bug_client",this.bugClientModel),s.set("bug_id",t),s.set("bug_description",i[0].summary),s.set("bug_status",i[0].status),B().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_bug/`,s).then((t=>{this.$emit("append_bug_list",t.data),e.innerHTML="Done"})).catch((t=>{this.showErrorModal(t,this.destination)}))}},mounted(){["requirement_item"].indexOf(this.locationId)<0||setTimeout((()=>{this.loadBugClientList()}),200)}};var ct=i(3744);const gt={name:"BugsModule",components:{AddBugWizard:(0,ct.Z)(dt,[["render",function(t,e,i,n,a,o){const u=(0,s.up)("Icon"),r=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",S,[(0,s._)("div",D,[(0,s._)("div",L,[(0,s._)("div",C,[(0,s._)("h2",null,[(0,s.Wm)(u,{icon:t.icons.usersIcon},null,8,["icon"]),M]),U]),(0,s._)("div",T,[(0,s._)("div",I,[(0,s._)("div",$,[x,(0,s._)("p",q," Select which bug client you want to search data from. Then use keywords or bug id to search for the required bugs. Once the search results appear, select those appropriate bugs that you want to link to the "+(0,l.toDisplayString)(i.destination)+". ",1)]),(0,s._)("div",O,[(0,s.kq)(" Bug Client List "),(0,s._)("div",A,[N,(0,s.Wm)(r,{options:a.bugClientList,label:"bug_client_name",option:"bug_client_id",value:a.bugClientModel,"onUpdate:value":e[0]||(e[0]=t=>a.bugClientModel=t)},null,8,["options","value"])]),R,(0,s.kq)(" Search Keywords "),(0,s._)("div",W,[j,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>a.searchModel=t),class:"form-control",disabled:""==a.bugClientModel,onKeydown:e[2]||(e[2]=(...t)=>o.startSearchTimer&&o.startSearchTimer(...t)),maxlength:"50"},null,40,E),[[k.vModelText,a.searchModel]])]),Z,(0,s.kq)(" The Search Results "),a.searchOn?((0,s.wg)(),(0,s.iD)("div",H,[z,K,(0,s._)("img",{src:`${t.staticUrl}/NearBeach/images/placeholder/online_connection.svg`,alt:"Placeholder Search Image"},null,8,F)])):0==a.bugResults.length?((0,s.wg)(),(0,s.iD)("div",P,[J,Y,(0,s._)("img",{src:`${t.staticUrl}/NearBeach/images/placeholder/road_to_knowledge.svg`,alt:"Placeholder Search Image"},null,8,G)])):((0,s.wg)(),(0,s.iD)("div",V,[(0,s._)("table",Q,[X,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.bugResults,(t=>((0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",{id:`bug_no_${t.id}`},[(0,s._)("a",{href:"javascript:void(0)",onClick:e=>o.submitBug(t.id)}," Add Bug ",8,et)],8,tt),(0,s._)("td",null,[(0,s.Uk)((0,l.toDisplayString)(t.summary)+" ",1),it,(0,s._)("p",st,"Assigned to: "+(0,l.toDisplayString)(t.assigned_to),1),(0,s._)("p",lt,"Bug No. "+(0,l.toDisplayString)(t.id)+" | Priority. "+(0,l.toDisplayString)(t.priority),1)]),(0,s._)("td",null,(0,l.toDisplayString)(t.status),1)])))),256))])])]))])])]),nt])])])}]]),Icon:w.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},mixins:[at.Z,ot.Z],data:()=>({bugList:[]}),computed:{...(0,rt.Se)({userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{addNewBug:function(){new f.u_(document.getElementById("addBugModal")).show()},appendBugList:function(t){this.bugList.push(t[0].fields)},getBugHyperLink:function(t){return"Bugzilla"==t.bug_client__list_of_bug_client__bug_client_name?`${t.bug_client__bug_client_url}/show_bug.cgi?id=${t.bug_code}`:"javascript:void(0)"},getBugList:function(){"requirement_item"!==this.destination&&B().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/bug_list/`).then((t=>{this.bugList=[],t.data.forEach((t=>{this.bugList.push(t)}))})).catch((t=>{this.showErrorModal(t,this.destination)}))},removeBug:function(t){const e=new FormData;e.set("bug_id",t),B().post(`${this.rootUrl}object_data/delete_bug/`,e).then((()=>{this.bugList=this.bugList.filter((e=>e.bug_id!==t))}))}},mounted(){["requirement_item"].indexOf(this.locationId)<0||setTimeout((()=>{this.getBugList()}),200)}},ht=(0,ct.Z)(gt,[["render",function(t,e,i,v,B,f){const w=(0,s.up)("Icon"),k=(0,s.up)("add-bug-wizard");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,[(0,s.Wm)(w,{icon:t.icons.bugIcon},null,8,["icon"]),n]),(0,s._)("p",a," The following is a list of bugs associated with this "+(0,l.toDisplayString)(i.destination),1),(0,s.kq)(" TABLE OF BUGS "),0===B.bugList.length?((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",u,"Sorry - there are no bugs associated with this "+(0,l.toDisplayString)(i.destination),1)])):((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("table",d,[c,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.bugList,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.pk},[(0,s._)("td",null,[(0,s._)("a",{href:f.getBugHyperLink(e),rel:"noopener noreferrer",target:"_blank"},[(0,s._)("p",null,(0,l.toDisplayString)(e.bug_description),1),h,(0,s._)("p",_," Bug No. "+(0,l.toDisplayString)(e.bug_code)+" - "+(0,l.toDisplayString)(e.bug_client__bug_client_name),1)],8,g)]),(0,s._)("td",null,[(0,s.Uk)((0,l.toDisplayString)(e.bug_status)+" ",1),t.userLevel>=2?((0,s.wg)(),(0,s.iD)("span",b,[(0,s.Wm)(w,{icon:t.icons.trashCan,onClick:t=>f.removeBug(e.bug_id)},null,8,["icon","onClick"])])):(0,s.kq)("v-if",!0)])])))),128))])])])),(0,s.kq)(" Add Bug Button "),(0,s.kq)(" TO DO - limit it to certain users "),m,(0,s._)("div",p,[(0,s._)("div",y,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>f.addNewBug&&f.addNewBug(...t))}," Add Bug ")):(0,s.kq)("v-if",!0)])]),(0,s.kq)(" Modals "),(0,s.Wm)(k,{destination:i.destination,"location-id":i.locationId,onAppend_bug_list:e[1]||(e[1]=t=>f.appendBugList(t))},null,8,["destination","location-id"])])}]])}}]);