import{S as U,i as Y,s as G,J as X,O as M,P as j,a as w,d as v,b as m,f as y,g as V,I as b,L as Z,M as $,N as x,q as P,o as R,a1 as ce,a2 as O,a3 as W,w as F,x as N,y as T,B as H,t as B,h as D,j as J,V as _e,l as ee,a7 as ge,e as E,k as te,c as I,m as ne,R as me,a8 as pe,E as ve,a4 as ae}from"../chunks/index-1d53bd1b.js";import{d as A}from"../chunks/stores-21ed9236.js";import{o as be,e as we,f as ke,c as ye,l as re,D as Ee,L as Ie}from"../chunks/ScaledSvg.svelte_svelte_type_style_lang-634255d1.js";import"../chunks/index-b75aa3f4.js";function Be(t,e,a){t=+t,e=+e,a=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+a;for(var n=-1,r=Math.max(0,Math.ceil((e-t)/a))|0,l=new Array(r);++n<r;)l[n]=t+n*a;return l}function he(){var t=be().unknown(void 0),e=t.domain,a=t.range,n=0,r=1,l,u,o=!1,d=0,i=0,f=.5;delete t.unknown;function s(){var _=e().length,h=r<n,g=h?r:n,p=h?n:r;l=(p-g)/Math.max(1,_-d+i*2),o&&(l=Math.floor(l)),g+=(p-g-l*(_-d))*f,u=l*(1-d),o&&(g=Math.round(g),u=Math.round(u));var z=Be(_).map(function(C){return g+l*C});return a(h?z.reverse():z)}return t.domain=function(_){return arguments.length?(e(_),s()):e()},t.range=function(_){return arguments.length?([n,r]=_,n=+n,r=+r,s()):[n,r]},t.rangeRound=function(_){return[n,r]=_,n=+n,r=+r,o=!0,s()},t.bandwidth=function(){return u},t.step=function(){return l},t.round=function(_){return arguments.length?(o=!!_,s()):o},t.padding=function(_){return arguments.length?(d=Math.min(1,i=+_),s()):d},t.paddingInner=function(_){return arguments.length?(d=Math.min(1,_),s()):d},t.paddingOuter=function(_){return arguments.length?(i=+_,s()):i},t.align=function(_){return arguments.length?(f=Math.max(0,Math.min(1,_)),s()):f},t.copy=function(){return he(e(),[n,r]).round(o).paddingInner(d).paddingOuter(i).align(f)},we.apply(s(),arguments)}var De=t=>ke(t[t.length-1]),Me=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ye),je=De(Me);const Oe=t=>({element:t&1}),le=t=>({element:t[0]}),ze=t=>({element:t&1}),fe=t=>({element:t[0]});function Ce(t){let e,a,n,r,l;const u=t[12].defs,o=X(u,t,t[11],fe),d=t[12].default,i=X(d,t,t[11],le);return{c(){e=M("svg"),a=M("defs"),o&&o.c(),n=M("g"),i&&i.c(),this.h()},l(f){e=j(f,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var s=w(e);a=j(s,"defs",{});var _=w(a);o&&o.l(_),_.forEach(v),n=j(s,"g",{class:!0,transform:!0});var h=w(n);i&&i.l(h),h.forEach(v),s.forEach(v),this.h()},h(){m(n,"class","layercake-layout-svg_g"),m(n,"transform",r="translate("+t[7].left+", "+t[7].top+")"),m(e,"class","layercake-layout-svg svelte-17l4rdd"),m(e,"viewBox",t[4]),m(e,"width",t[5]),m(e,"height",t[6]),y(e,"z-index",t[2],!1),y(e,"pointer-events",t[3]===!1?"none":null,!1)},m(f,s){V(f,e,s),b(e,a),o&&o.m(a,null),b(e,n),i&&i.m(n,null),t[13](n),t[14](e),l=!0},p(f,[s]){o&&o.p&&(!l||s&2049)&&Z(o,u,f,f[11],l?x(u,f[11],s,ze):$(f[11]),fe),i&&i.p&&(!l||s&2049)&&Z(i,d,f,f[11],l?x(d,f[11],s,Oe):$(f[11]),le),(!l||s&128&&r!==(r="translate("+f[7].left+", "+f[7].top+")"))&&m(n,"transform",r),(!l||s&16)&&m(e,"viewBox",f[4]),(!l||s&32)&&m(e,"width",f[5]),(!l||s&64)&&m(e,"height",f[6]),s&4&&y(e,"z-index",f[2],!1),s&8&&y(e,"pointer-events",f[3]===!1?"none":null,!1)},i(f){l||(P(o,f),P(i,f),l=!0)},o(f){R(o,f),R(i,f),l=!1},d(f){f&&v(e),o&&o.d(f),i&&i.d(f),t[13](null),t[14](null)}}}function Se(t,e,a){let n,r,l,{$$slots:u={},$$scope:o}=e,{element:d=void 0}=e,{innerElement:i=void 0}=e,{zIndex:f=void 0}=e,{pointerEvents:s=void 0}=e,{viewBox:_=void 0}=e;const{containerWidth:h,containerHeight:g,padding:p}=ce("LayerCake");O(t,h,c=>a(5,n=c)),O(t,g,c=>a(6,r=c)),O(t,p,c=>a(7,l=c));function z(c){W[c?"unshift":"push"](()=>{i=c,a(1,i)})}function C(c){W[c?"unshift":"push"](()=>{d=c,a(0,d)})}return t.$$set=c=>{"element"in c&&a(0,d=c.element),"innerElement"in c&&a(1,i=c.innerElement),"zIndex"in c&&a(2,f=c.zIndex),"pointerEvents"in c&&a(3,s=c.pointerEvents),"viewBox"in c&&a(4,_=c.viewBox),"$$scope"in c&&a(11,o=c.$$scope)},[d,i,f,s,_,n,r,l,h,g,p,o,u,z,C]}class Pe extends U{constructor(e){super(),Y(this,e,Se,Ce,G,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function oe(t,e,a){const n=t.slice();return n[12]=e[a][0],n[13]=e[a][1],n}function ie(t,e,a){const n=t.slice();return n[16]=e[a],n}function se(t){let e,a,n=t[12]+"",r,l,u=t[16].s_enter+"",o,d,i,f,s,_;return{c(){e=M("rect"),a=M("title"),r=B(n),l=B(" (t = "),o=B(u),d=B(")"),this.h()},l(h){e=j(h,"rect",{x:!0,y:!0,width:!0,height:!0,style:!0});var g=w(e);a=j(g,"title",{});var p=w(a);r=D(p,n),l=D(p," (t = "),o=D(p,u),d=D(p,")"),p.forEach(v),g.forEach(v),this.h()},h(){m(e,"x",i=100+t[5](t[16].r_enter)),m(e,"y",f=t[6](t[16].name)),m(e,"width",s=t[5](t[16].r_end)-t[5](t[16].r_enter)),m(e,"height",_=t[3]/t[0].length*.9),y(e,"fill",t[4](t[16].r_end-t[16].r_enter)),y(e,"stroke-width","0.25"),y(e,"stroke","rgb(0,0,0)")},m(h,g){V(h,e,g),b(e,a),b(a,r),b(a,l),b(a,o),b(a,d)},p(h,g){g&2&&n!==(n=h[12]+"")&&J(r,n),g&2&&u!==(u=h[16].s_enter+"")&&J(o,u),g&34&&i!==(i=100+h[5](h[16].r_enter))&&m(e,"x",i),g&66&&f!==(f=h[6](h[16].name))&&m(e,"y",f),g&34&&s!==(s=h[5](h[16].r_end)-h[5](h[16].r_enter))&&m(e,"width",s),g&9&&_!==(_=h[3]/h[0].length*.9)&&m(e,"height",_),g&18&&y(e,"fill",h[4](h[16].r_end-h[16].r_enter))},d(h){h&&v(e)}}}function de(t){let e,a,n=t[12]+"",r,l,u=t[13],o=[];for(let d=0;d<u.length;d+=1)o[d]=se(ie(t,u,d));return{c(){e=M("g");for(let d=0;d<o.length;d+=1)o[d].c();a=M("text"),r=B(n),this.h()},l(d){e=j(d,"g",{});var i=w(e);for(let s=0;s<o.length;s+=1)o[s].l(i);a=j(i,"text",{x:!0,y:!0});var f=w(a);r=D(f,n),f.forEach(v),i.forEach(v),this.h()},h(){m(a,"x","0"),m(a,"y",l=t[6](t[12])+25)},m(d,i){V(d,e,i);for(let f=0;f<o.length;f+=1)o[f].m(e,null);b(e,a),b(a,r)},p(d,i){if(i&123){u=d[13];let f;for(f=0;f<u.length;f+=1){const s=ie(d,u,f);o[f]?o[f].p(s,i):(o[f]=se(s),o[f].c(),o[f].m(e,a))}for(;f<o.length;f+=1)o[f].d(1);o.length=u.length}i&2&&n!==(n=d[12]+"")&&J(r,n),i&66&&l!==(l=d[6](d[12])+25)&&m(a,"y",l)},d(d){d&&v(e),_e(o,d)}}}function Re(t){let e,a=Object.entries(t[1]),n=[];for(let r=0;r<a.length;r+=1)n[r]=de(oe(t,a,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ee()},l(r){for(let l=0;l<n.length;l+=1)n[l].l(r);e=ee()},m(r,l){for(let u=0;u<n.length;u+=1)n[u].m(r,l);V(r,e,l)},p(r,l){if(l&123){a=Object.entries(r[1]);let u;for(u=0;u<a.length;u+=1){const o=oe(r,a,u);n[u]?n[u].p(o,l):(n[u]=de(o),n[u].c(),n[u].m(e.parentNode,e))}for(;u<n.length;u+=1)n[u].d(1);n.length=a.length}},d(r){_e(n,r),r&&v(e)}}}function Ve(t){let e,a;return e=new Pe({props:{viewBox:"0 0 "+t[2]+" "+t[3],$$slots:{default:[Re]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,r){T(e,n,r),a=!0},p(n,[r]){const l={};r&12&&(l.viewBox="0 0 "+n[2]+" "+n[3]),r&524411&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){a||(P(e.$$.fragment,n),a=!0)},o(n){R(e.$$.fragment,n),a=!1},d(n){H(e,n)}}}function Le(t){var e=1/0,a=-1/0;for(const[n,r]of Object.entries(t))for(const l of r)l.r_enter<e&&(e=l.r_enter),l.r_end>a&&(a=l.r_end);return[e,a]}function qe(t){var e=1/0,a=-1/0;for(const[n,r]of Object.entries(t))for(const l of r)l.r_end-l.r_enter<e&&(e=l.r_end-l.r_enter),l.r_end-l.r_enter>a&&(a=l.r_end-l.r_enter);return[e,a]}function Ae(t,e,a){let n,r,l,u,o,d,i,f,s;const{data:_,width:h,height:g}=ce("LayerCake");return O(t,_,p=>a(1,i=p)),O(t,h,p=>a(2,f=p)),O(t,g,p=>a(3,s=p)),t.$$.update=()=>{t.$$.dirty&2&&a(0,n=Object.keys(i)),t.$$.dirty&9&&a(6,r=he().domain(n).range([s,0])),t.$$.dirty&2&&a(11,[l,u]=Le(i),l,(a(10,u),a(1,i))),t.$$.dirty&3076&&a(5,o=re().domain([l,u]).range([75,f-100])),t.$$.dirty&2&&a(4,d=p=>je(re().domain(qe(i)).range([1,0])(p)))},[n,i,f,s,d,o,r,_,h,g,u,l]}class Fe extends U{constructor(e){super(),Y(this,e,Ae,Ve,G,{})}}function Ne(t){let e,a;return{c(){e=E("p"),a=B(`Drag 'n' drop a "profile.txt" file here, or click to select a "profile.txt" file`)},l(n){e=I(n,"P",{});var r=w(e);a=D(r,`Drag 'n' drop a "profile.txt" file here, or click to select a "profile.txt" file`),r.forEach(v)},m(n,r){V(n,e,r),b(e,a)},p:ve,d(n){n&&v(e)}}}function Te(t){let e,a;return e=new Fe({}),{c(){F(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,r){T(e,n,r),a=!0},i(n){a||(P(e.$$.fragment,n),a=!0)},o(n){R(e.$$.fragment,n),a=!1},d(n){H(e,n)}}}function He(t){let e,a,n,r,l,u,o,d,i,f,s,_,h,g,p;l=new Ee({props:{multiple:"false",$$slots:{default:[Ne]},$$scope:{ctx:t}}}),l.$on("drop",t[1]);function z(c){t[3](c)}let C={$$slots:{default:[Te]},$$scope:{ctx:t}};return t[0].profile!==void 0&&(C.data=t[0].profile),s=new Ie({props:C}),W.push(()=>ge(s,"data",z)),{c(){e=E("div"),a=E("div"),n=E("div"),r=E("div"),F(l.$$.fragment),u=te(),o=E("button"),d=B("Clear"),i=te(),f=E("div"),F(s.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var k=w(e);a=I(k,"DIV",{class:!0});var L=w(a);n=I(L,"DIV",{class:!0});var S=w(n);r=I(S,"DIV",{class:!0});var q=w(r);N(l.$$.fragment,q),u=ne(q),o=I(q,"BUTTON",{type:!0,class:!0});var K=w(o);d=D(K,"Clear"),K.forEach(v),q.forEach(v),S.forEach(v),L.forEach(v),i=ne(k),f=I(k,"DIV",{class:!0});var Q=w(f);N(s.$$.fragment,Q),Q.forEach(v),k.forEach(v),this.h()},h(){m(o,"type","button"),m(o,"class","inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"),m(r,"class","flex space-x-4"),m(n,"class","py-2 inline-block w-full sm:px-6 lg:px-8"),m(a,"class","overflow-x-auto"),m(f,"class","flex flex-grow my-4 w-full place-items-center"),m(e,"class","container flex w-7/8 flex-col mt-6 svelte-a4p85k")},m(c,k){V(c,e,k),b(e,a),b(a,n),b(n,r),T(l,r,null),b(r,u),b(r,o),b(o,d),b(e,i),b(e,f),T(s,f,null),h=!0,g||(p=me(o,"click",t[2]),g=!0)},p(c,[k]){const L={};k&64&&(L.$$scope={dirty:k,ctx:c}),l.$set(L);const S={};k&64&&(S.$$scope={dirty:k,ctx:c}),!_&&k&1&&(_=!0,S.data=c[0].profile,pe(()=>_=!1)),s.$set(S)},i(c){h||(P(l.$$.fragment,c),P(s.$$.fragment,c),h=!0)},o(c){R(l.$$.fragment,c),R(s.$$.fragment,c),h=!1},d(c){c&&v(e),H(l),H(s),g=!1,p()}}}const ue="http://127.0.0.1:5000/api";function We(t,e,a){let n;O(t,A,i=>a(0,n=i));let r={accepted:[],rejected:[]};async function l(){ae(A,n.profile=await(await fetch(`${ue}/profiler`)).json(),n)}async function u(i){const{acceptedFiles:f,fileRejections:s}=i.detail;r.accepted=[...r.accepted,...f],r.rejected=[...r.rejected,...s];var _=new FormData;_.append("file",r.accepted[0]),await fetch(`${ue}/profiler`,{method:"POST",body:_}),await l()}async function o(i){ae(A,n.profile=[],n)}function d(i){t.$$.not_equal(n.profile,i)&&(n.profile=i,A.set(n))}return[n,u,o,d]}class Ke extends U{constructor(e){super(),Y(this,e,We,He,G,{})}}export{Ke as default};
