"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_actionCreators_members_tsx-app_components_acl_feature_tsx-app_components_dropdownMenuCont-518855"],{"./app/actionCreators/members.tsx":(e,t,o)=>{o.d(t,{M4:()=>a,MA:()=>l,R_:()=>u,hS:()=>d}),o("../node_modules/core-js/modules/es.error.cause.js"),o("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=o("../node_modules/@sentry/hub/esm/exports.js"),s=o("./app/actions/memberActions.tsx"),r=o("./app/stores/memberListStore.tsx");function i(e){return{...e.user,role:e.role}}async function l(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=`/organizations/${t}/users/`,l=o?{project:o}:{};try{const a=await e.requestPromise(s,{method:"GET",query:l});a||n.$e((e=>{e.setExtras({orgId:t,projectIds:o}),n.Tb(new Error("Members is undefined"))}));const d=null==a?void 0:a.filter((e=>{let{user:t}=e;return t}));return d?(r.Z.loadInitialData(d.map(i)),a):[]}catch(e){n.rJ({resp:e}),n.Tb(e)}return[]}function a(e){return e.reduce(((e,t)=>{for(const o of t.projects)e.hasOwnProperty(o)||(e[o]=[]),e[o].push(t.user);return e}),{})}async function d(e,t){let{orgId:o,memberId:n,data:r}=t;s.Z.update(n,r);const i=`/organizations/${o}/members/${n}/`;try{const t=await e.requestPromise(i,{method:"PUT",data:r});return s.Z.updateSuccess(t),t}catch(e){throw s.Z.updateError(e),e}}async function u(e,t){let{orgId:o,memberId:n,regenerate:r,data:i}=t;s.Z.resendMemberInvite(o,i);const l=`/organizations/${o}/members/${n}/`;try{const t=await e.requestPromise(l,{method:"PUT",data:{regenerate:r,reinvite:!0}});return s.Z.resendMemberInviteSuccess(t),t}catch(e){throw s.Z.resendMemberInviteError(e),e}}},"./app/components/acl/feature.tsx":(e,t,o)=>{o.d(t,{Z:()=>f});var n=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(o("../node_modules/core-js/modules/es.array.includes.js"),o("../node_modules/react/index.js")),r=o("./app/stores/hookStore.tsx"),i=o("./app/utils/isRenderFunc.tsx"),l=o("./app/utils/withConfig.tsx"),a=o("./app/utils/withOrganization.tsx"),d=o("./app/utils/withProject.tsx"),u=o("./app/components/alert.tsx"),c=o("./app/locale.tsx"),m=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=()=>(0,m.tZ)(u.Z,{type:"info",showIcon:!0,children:(0,c.t)("This feature is coming soon!")});p.displayName="ComingSoon";const h=p;class g extends s.Component{getAllFeatures(){const{organization:e,project:t,config:o}=this.props;return{configFeatures:o.features?Array.from(o.features):[],organization:e&&e.features||[],project:t&&t.features||[]}}hasFeature(e,t){const o=e.match(/^projects:(.+)/),n=e.match(/^organizations:(.+)/),{configFeatures:s,organization:r,project:i}=t;return!!s.includes(e)||(o?i.includes(o[1]):n?r.includes(n[1]):r.includes(e)||i.includes(e))}render(){const{children:e,features:t,renderDisabled:o,hookName:n,organization:s,project:l,requireAll:a}=this.props,d=this.getAllFeatures(),u=!t||t[a?"every":"some"]((e=>this.hasFeature(e,d)));let c=!1!==o&&("function"==typeof o?o:()=>(0,m.tZ)(h,{}));if(n){const e=r.Z.get(n);e.length>0&&(c=e[0])}const p={organization:s,project:l,features:t,hasFeature:u};return u||!1===c?(0,i.l)(e)?e({renderDisabled:o,...p}):u&&e?e:null:c({children:e,...p})}}g.displayName="Feature",(0,n.Z)(g,"defaultProps",{renderDisabled:!1,requireAll:!0});const f=(0,a.Z)((0,d.Z)((0,l.Z)(g)))},"./app/components/dropdownMenuControlV2.tsx":(e,t,o)=>{o.d(t,{Z:()=>T});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(o("../node_modules/core-js/modules/web.dom-collections.iterator.js"),o("../node_modules/react/index.js")),r=o("../node_modules/@react-aria/button/dist/module.js"),i=o("../node_modules/@react-aria/menu/dist/module.js"),l=o("../node_modules/@react-aria/utils/dist/module.js"),a=o("../node_modules/@react-stately/collections/dist/module.js"),d=o("../node_modules/@react-stately/menu/dist/module.js"),u=o("./app/components/dropdownButtonV2.tsx"),c=o("../node_modules/@react-aria/focus/dist/module.js"),m=o("../node_modules/@react-aria/interactions/dist/module.js"),p=o("../node_modules/@react-aria/overlays/dist/module.js"),h=o("../node_modules/@react-aria/separator/dist/module.js"),g=o("../node_modules/@react-stately/tree/dist/module.js"),f=o("./app/components/links/link.tsx"),y=o("./app/components/menuListItem.tsx"),b=o("./app/icons/index.tsx"),v=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Z=e=>{var t;let{node:o,isLastNode:n,state:r,onClose:a,closeOnSelect:d,isSubmenuTrigger:u=!1,submenuTriggerRef:c,renderAs:p="li",...h}=e;const[g,Z]=(0,s.useState)(!1),w=(0,s.useRef)(null),x=r.disabledKeys.has(o.key),S=r.selectionManager.focusedKey===o.key,{key:P,onAction:j,to:k,label:M,showDividers:_,...C}=o.value,z=null!=c?c:w,{hoverProps:O}=(0,m.XI)({onHoverChange:Z});(0,s.useEffect)((()=>{if(g&&S){if(u)return void r.selectionManager.select(o.key);r.selectionManager.clearSelection()}}),[g,S]);const{keyboardProps:D}=(0,m.v5)({onKeyDown:e=>{if("Enter"===e.key&&k){var t,n;const o=new MouseEvent("click",{ctrlKey:e.ctrlKey,metaKey:e.metaKey});return null===(t=z.current)||void 0===t||null===(n=t.querySelector(`${y.i}`))||void 0===n||n.dispatchEvent(o),void a()}"ArrowRight"===e.key&&u?r.selectionManager.select(o.key):e.continuePropagation()}}),{menuItemProps:I,labelProps:R,descriptionProps:T}=(0,i.iX)({key:o.key,onAction:()=>{k||(u?r.selectionManager.select(o.key):null==j||j(P))},closeOnSelect:!k&&d,onClose:a,isDisabled:x},r,z),N=(0,l.dG)(h,I,O,D),A=null!==(t=o.rendered)&&void 0!==t?t:M,E=_&&!n,F={as:k?f.Z:"div",to:k};return(0,v.tZ)(y.Z,{ref:z,as:p,"data-test-id":P,label:A,isDisabled:x,isFocused:S,showDivider:E,innerWrapProps:F,labelProps:R,detailsProps:T,...N,...C,...u&&{role:"menuitemradio",trailingItems:(0,v.BX)(s.Fragment,{children:[C.trailingItems,(0,v.tZ)(b.g6,{size:"xs",direction:"right","aria-hidden":"true"})]})}})};Z.displayName="MenuItem";const w=Z;var x=o("./app/styles/space.tsx");function S(e){let{node:t,children:o}=e;const{itemProps:n,headingProps:s,groupProps:r}=(0,i.x7)({heading:t.rendered,"aria-label":t["aria-label"]});return(0,v.BX)(j,{...n,children:[t.rendered&&(0,v.tZ)(k,{...s,children:t.rendered}),(0,v.tZ)(M,{...r,children:o})]})}S.displayName="MenuSection";const P=S,j=(0,n.Z)("li",{target:"emi8ono2"})({name:"ffhm6p",styles:"list-style-type:none"}),k=(0,n.Z)("span",{target:"emi8ono1"})("display:inline-block;font-weight:600;font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.subText),";text-transform:uppercase;white-space:nowrap;margin:",(0,x.Z)(1)," ",(0,x.Z)(1.5)," ",(0,x.Z)(.5),";padding-right:",(0,x.Z)(1),";",j,":first-of-type &{margin-top:",(0,x.Z)(.5),";}"),M=(0,n.Z)("ul",{target:"emi8ono0"})({name:"1kz5jpr",styles:"list-style-type:none;padding:0;margin:0"});function _(e){var t,o;let{offset:n=8,crossOffset:r=0,containerPadding:a=0,placement:d="bottom left",closeOnSelect:u=!0,triggerRef:f,triggerWidth:y,isSubmenu:b,menuTitle:Z,closeRootMenu:x,closeCurrentSubmenu:S,isDismissable:j=!0,shouldCloseOnBlur:k=!0,...M}=e;const _=(0,g.D)({...M,selectionMode:"single"}),C=(0,s.useMemo)((()=>[..._.collection]),[_.collection]),R=(0,s.useRef)(null),{menuProps:N}=(0,i.H9)({...M,selectionMode:"single"},_,R),{separatorProps:A}=(0,h.z)({elementType:"li"}),{keyboardProps:E}=(0,m.v5)({onKeyDown:e=>{b&&"ArrowLeft"===e.key?null==S||S():e.continuePropagation()}}),F=(0,s.useRef)(null),{overlayProps:B}=(0,p.Ir)({onClose:x,shouldCloseOnBlur:k,isDismissable:j,isOpen:!0,shouldCloseOnInteractOutside:e=>{var t;return e&&f.current!==e&&!(null!==(t=f.current)&&void 0!==t&&t.contains(e))}},F),{overlayProps:K,placement:$}=(0,p.tN)({targetRef:f,overlayRef:F,offset:n,crossOffset:r,placement:d,containerPadding:a,isOpen:!0,boundaryElement:null!==(t=document.querySelector(".app"))&&void 0!==t?t:void 0}),[q,W]=(0,s.useState)(!0);(0,s.useEffect)((()=>{const e=!C.some((e=>e.hasChildNodes&&!e.value.isSubmenu?[...e.childNodes].some((e=>_.selectionManager.isSelected(`${e.key}`))):_.selectionManager.isSelected(`${e.key}`)));W(e)}),[C,_.selectionManager]);const L={...N,...!q&&{onKeyUp:()=>null,onKeyDown:()=>null}},X=e=>e.map(((t,o)=>{var n;const r=e.length-1===o,i=!r&&("section"===t.type||"section"===(null===(n=e[o+1])||void 0===n?void 0:n.type));let l;return l="section"===t.type?(0,v.tZ)(P,{node:t,children:X([...t.childNodes])}):t.value.isSubmenu?((e,t)=>(0,v.tZ)(T,{items:e.value.children,trigger:o=>{let{props:n,ref:s}=o;return(0,v.tZ)(w,{renderAs:"div",node:e,isLastNode:t,state:_,isSubmenuTrigger:!0,submenuTriggerRef:s,...n})},menuTitle:e.value.submenuTitle,placement:"right top",offset:-4,crossOffset:-8,closeOnSelect:u,isOpen:_.selectionManager.isSelected(e.key),isSubmenu:!0,closeRootMenu:x,closeCurrentSubmenu:()=>_.selectionManager.clearSelection(),renderWrapAs:"li"}))(t,r):((e,t)=>(0,v.tZ)(w,{node:e,isLastNode:t,state:_,onClose:x,closeOnSelect:u}))(t,r),(0,v.BX)(s.Fragment,{children:[l,i&&(0,v.tZ)(I,{...A})]},t.key)}));return(0,v.tZ)(c.MT,{restoreFocus:!0,autoFocus:!0,children:(0,v.tZ)(z,{ref:F,placementProp:$,...(0,l.dG)(B,K,E),children:(0,v.BX)(O,{ref:R,...L,style:{maxHeight:null===(o=K.style)||void 0===o?void 0:o.maxHeight,minWidth:y},children:[Z&&(0,v.tZ)(D,{children:Z}),X(C)]})})})}_.displayName="Menu";const C=_,z=(0,n.Z)("div",{target:"e1747fp53"})("max-width:24rem;border-radius:",(e=>e.theme.borderRadius),";background:",(e=>e.theme.backgroundElevated),";box-shadow:0 0 0 1px ",(e=>e.theme.translucentBorder),",",(e=>e.theme.dropShadowHeavy),";font-size:",(e=>e.theme.fontSizeMedium),";margin:",(0,x.Z)(1)," 0;",(e=>"top"===e.placementProp&&"margin-bottom: 0;")," ",(e=>"bottom"===e.placementProp&&"margin-top: 0;"),"z-index:",(e=>e.theme.zIndex.dropdown),"!important;"),O=(0,n.Z)("ul",{target:"e1747fp52"})("margin:0;padding:",(0,x.Z)(.5)," 0;font-size:",(e=>e.theme.fontSizeMedium),";overflow-x:hidden;overflow-y:auto;&:focus{outline:none;}"),D=(0,n.Z)("div",{target:"e1747fp51"})("font-weight:600;font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.headingColor),";white-space:nowrap;padding:",(0,x.Z)(.25)," ",(0,x.Z)(1.5)," ",(0,x.Z)(.75),";margin-bottom:",(0,x.Z)(.5),";border-bottom:solid 1px ",(e=>e.theme.innerBorder),";"),I=(0,n.Z)("li",{target:"e1747fp50"})("list-style-type:none;border-top:solid 1px ",(e=>e.theme.innerBorder),";margin:",(0,x.Z)(.5)," ",(0,x.Z)(1.5),";");function R(e){let{items:t,trigger:o,triggerLabel:n,triggerProps:c={},isDisabled:m,isSubmenu:p=!1,closeRootMenu:h,closeCurrentSubmenu:g,renderWrapAs:f="div",className:y,...b}=e;const Z=(0,s.useRef)(null),w=null!=m?m:!t||0===t.length,x=(0,d.W)(b),{menuTriggerProps:S,menuProps:P}=(0,i.u4)({type:"menu",isDisabled:w},x,Z),{buttonProps:j}=(0,r.U)({isDisabled:w,...S,...p&&{onKeyUp:e=>e.continuePropagation(),onKeyDown:e=>e.continuePropagation(),onPress:()=>null,onPressStart:()=>null,onPressEnd:()=>null}},Z),[k,M]=(0,s.useState)(),_=(0,s.useCallback)((async()=>{var e;await new Promise((e=>window.setTimeout(e)));const t=null===(e=Z.current)||void 0===e?void 0:e.offsetWidth;!p&&t&&M(t)}),[p]);return(0,l.yU)({ref:Z,onResize:_}),(0,s.useEffect)((()=>{void 0===window.ResizeObserver&&_()}),[_]),(0,v.BX)(N,{className:y,as:f,role:"presentation",children:[o?o({props:{...c,...j,isOpen:x.isOpen},ref:Z}):(0,v.tZ)(u.Z,{ref:Z,isOpen:x.isOpen,...c,...j,children:n}),x.isOpen?(0,v.tZ)(C,{...b,...P,triggerRef:Z,triggerWidth:k,isSubmenu:p,isDismissable:!p&&b.isDismissable,shouldCloseOnBlur:!p&&b.shouldCloseOnBlur,closeRootMenu:null!=h?h:x.close,closeCurrentSubmenu:g,items:function e(t){return t.filter((e=>!e.hidden)).map((t=>({...t,...t.children?{children:e(t.children)}:{}})))}(t),children:e=>e.children&&e.children.length>0&&!e.isSubmenu?(0,v.tZ)(a.$0,{title:e.label,items:e.children,children:e=>(0,v.tZ)(a.ck,{...e,children:e.label})},e.key):(0,v.tZ)(a.ck,{...e,children:e.label})}):null]})}R.displayName="MenuControl";const T=R,N=(0,n.Z)("div",{target:"e1dayana0"})({name:"ffhm6p",styles:"list-style-type:none"})}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_members_tsx-app_components_acl_feature_tsx-app_components_dropdownMenuCont-518855.99b78c000a497d9b2f36e80d22ee572a.js.map