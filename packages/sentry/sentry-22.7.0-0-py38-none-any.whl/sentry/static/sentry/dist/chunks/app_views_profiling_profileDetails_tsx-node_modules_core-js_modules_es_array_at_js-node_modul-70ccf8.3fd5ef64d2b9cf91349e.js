"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_profileDetails_tsx-node_modules_core-js_modules_es_array_at_js-node_modul-70ccf8","node_modules_core-js_modules_es_array_at_js-node_modules_core-js_modules_es_string_at-alterna-5bc09d"],{"./app/utils/profiling/units/units.ts":(e,t,s)=>{s.d(t,{ab:()=>a,s4:()=>n}),s("../node_modules/core-js/modules/es.error.cause.js");const o={nanoseconds:1e-9,microseconds:1e-6,milliseconds:.001,seconds:1},r=(e,t,s)=>e.toFixed(s)+t;function n(e){const t=o[e];if(void 0===t)throw new Error(`Cannot format from unit ${e}, duration mapping is not defined`);return e=>{const s=e*t;return s>=1?r(s,"s",2):s/.001>=1?r(s/.001,"ms",2):s/1e-6>=1?r(s/1e-6,"μs",2):r(s/1e-9,"ns",2)}}function i(e,t){return Math.floor(e).toString().padStart(t,"0")}function a(e){const t=o[e];if(void 0===t)throw new Error(`Cannot format from unit ${e}, duration mapping is not defined`);return e=>{const s=e*t,o=1e3*s;return`${i(s/60,2)}:${i(s%60,2)}.${i(o%1e3,3)}`}}},"./app/utils/useEffectAfterFirstRender.ts":(e,t,s)=>{s.d(t,{K:()=>n});var o=s("../node_modules/react/index.js");const r=[],n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;const s=(0,o.useRef)(!0);(0,o.useEffect)((()=>{s.current?s.current=!1:e()}),t)}},"./app/views/profiling/profileDetails.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),n=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/fuse.js/dist/fuse.esm.js"),a=s("../node_modules/query-string/index.js"),l=s("./app/components/gridEditable/index.tsx"),u=s("./app/components/layouts/thirds.tsx"),d=s("./app/components/pagination.tsx"),c=s("./app/components/searchBar.tsx"),m=s("./app/components/sentryDocumentTitle.tsx"),p=s("./app/locale.tsx"),f=s("./app/styles/space.tsx"),g=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),h=s("./app/utils/discover/styles.tsx"),y=s("./app/utils/profiling/routes.tsx"),j=s("./app/utils/profiling/units/units.ts"),_=s("./app/utils/queryString.tsx"),w=s("./app/utils/useEffectAfterFirstRender.ts"),x=s("./app/utils/useLocation.tsx"),b=s("./app/utils/useOrganization.tsx"),v=s("./app/utils/useParams.tsx"),Z=s("./app/views/profiling/profileGroupProvider.tsx"),k=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function q(e){const t=[];return e.forEach((e=>{e.selfWeight>0&&t.push(e)}),(()=>{})),t.sort(((e,t)=>t.selfWeight-e.selfWeight)).slice(0,500).map((t=>({symbol:t.frame.name,image:t.frame.image,thread:e.threadId,type:t.frame.is_application?"application":"system","self weight":t.selfWeight,"total weight":t.totalWeight})))}const $=50;function S(){const e=(0,x.T)(),[t]=(0,Z.useProfileGroup)(),s=(0,b.Z)();(0,r.useEffect)((()=>{(0,g.Z)("profiling_views.profile_summary",{organization:s})}),[s]);const o=(0,r.useMemo)((()=>{const t=(0,_.ro)(e.query.cursor,"");return parseInt(t,10)||0}),[e.query.cursor]),f=(0,r.useMemo)((()=>(0,_.ro)(e.query.query,"")),[e]),h=(0,r.useMemo)((()=>"resolved"===t.type?t.data.profiles.flatMap(q).sort(((e,t)=>t["self weight"]-e["self weight"])):[]),[t]),y=(0,r.useMemo)((()=>new i.default(h,{keys:["symbol"],threshold:.3})),[h]),j=(0,r.useCallback)((e=>e?y.search(e).map((e=>e.item)).sort(((e,t)=>t["self weight"]-e["self weight"])):h),[y,h]),[v,S]=(0,r.useState)((()=>j(f)));(0,w.K)((()=>{S(j(f))}),[h]);const E=(0,r.useMemo)((()=>{const t=o>=$?"true":"false",s=o>=$?o-$:0,r={...e.query,cursor:s},n=`<${e.pathname}${a.stringify(r)}>; rel="previous"; results="${t}"; cursor="${s}"`,i=o+$<v.length?"true":"false",l=o+$<v.length?o+$:0,u={...e.query,cursor:l};return`${n},<${e.pathname}${a.stringify(u)}>; rel="next"; results="${i}"; cursor="${l}"`}),[o,e,v]),z=(0,r.useCallback)((t=>{n.browserHistory.replace({...e,query:{...e.query,query:t,cursor:void 0}}),S(j(t))}),[e,j]);return(0,k.tZ)(r.Fragment,{children:(0,k.tZ)(m.Z,{title:(0,p.t)("Profiling — Details"),orgSlug:s.slug,children:(0,k.tZ)(u.uT,{children:(0,k.BX)(u.or,{fullWidth:!0,children:[(0,k.tZ)(W,{children:(0,k.tZ)(c.Z,{defaultQuery:"",query:f,placeholder:(0,p.t)("Search for frames"),onChange:z})}),(0,k.tZ)(l.ZP,{title:(0,p.t)("Slowest Functions"),isLoading:"loading"===t.type,error:"errored"===t.type,data:v.slice(o,o+$),columnOrder:I.map((e=>T[e])),columnSortBy:[],grid:{renderBodyCell:C},location:e}),(0,k.tZ)(d.Z,{pageLinks:E})]})})})})}S.displayName="ProfileDetails";const W=(0,o.Z)("div",{target:"ecwa59y0"})("display:grid;gap:",(0,f.Z)(2),";grid-template-columns:auto;margin-bottom:",(0,f.Z)(2),";");function C(e,t,s,o){return(0,k.tZ)(z,{column:e,dataRow:t,rowIndex:s,columnIndex:o})}C.displayName="renderFunctionCell";const E=(0,j.s4)("nanoseconds");function z(e){let{column:t,dataRow:s}=e;const o=s[t.key],{orgId:r,projectId:i,eventId:a}=(0,v.U)();switch(t.key){case"self weight":case"total weight":return(0,k.tZ)(h.Hw,{children:E(o)});case"image":return(0,k.tZ)(h.W2,{children:null!=o?o:"Unknown"});case"thread":return(0,k.tZ)(h.W2,{children:(0,k.tZ)(n.Link,{to:(0,y.J)({orgSlug:r,projectSlug:i,profileId:a,query:{tid:s.thread}}),children:o})});default:return(0,k.tZ)(h.W2,{children:o})}}const I=["symbol","image","thread","type","self weight","total weight"],T={symbol:{key:"symbol",name:(0,p.t)("Symbol"),width:l.z7},image:{key:"image",name:(0,p.t)("Binary"),width:l.z7},thread:{key:"thread",name:(0,p.t)("Thread"),width:l.z7},type:{key:"type",name:(0,p.t)("Type"),width:l.z7},"self weight":{key:"self weight",name:(0,p.t)("Self Weight"),width:l.z7},"total weight":{key:"total weight",name:(0,p.t)("Total Weight"),width:l.z7}},M=S},"../node_modules/core-js/modules/es.array.at.js":(e,t,s)=>{var o=s("../node_modules/core-js/internals/export.js"),r=s("../node_modules/core-js/internals/to-object.js"),n=s("../node_modules/core-js/internals/length-of-array-like.js"),i=s("../node_modules/core-js/internals/to-integer-or-infinity.js"),a=s("../node_modules/core-js/internals/add-to-unscopables.js");o({target:"Array",proto:!0},{at:function(e){var t=r(this),s=n(t),o=i(e),a=o>=0?o:s+o;return a<0||a>=s?void 0:t[a]}}),a("at")},"../node_modules/core-js/modules/es.string.at-alternative.js":(e,t,s)=>{var o=s("../node_modules/core-js/internals/export.js"),r=s("../node_modules/core-js/internals/function-uncurry-this.js"),n=s("../node_modules/core-js/internals/require-object-coercible.js"),i=s("../node_modules/core-js/internals/to-integer-or-infinity.js"),a=s("../node_modules/core-js/internals/to-string.js"),l=s("../node_modules/core-js/internals/fails.js"),u=r("".charAt);o({target:"String",proto:!0,forced:l((function(){return"\ud842"!=="𠮷".at(-2)}))},{at:function(e){var t=a(n(this)),s=t.length,o=i(e),r=o>=0?o:s+o;return r<0||r>=s?void 0:u(t,r)}})}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_profileDetails_tsx-node_modules_core-js_modules_es_array_at_js-node_modul-70ccf8.3803a7ed96d779d666d1c804b4d71ef1.js.map