"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_widgetBuilder_addToDashboardModal_tsx"],{"./app/components/modals/widgetBuilder/addToDashboardModal.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z,modalCss:()=>C});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/react/index.js")),d=a("./app/actionCreators/dashboards.tsx"),i=a("./app/actionCreators/indicator.tsx"),r=a("./app/components/button.tsx"),l=a("./app/components/buttonBar.tsx"),n=a("./app/components/forms/selectControl.tsx"),p=a("./app/locale.tsx"),u=a("./app/styles/space.tsx"),c=a("./app/utils/handleXhrErrorResponse.tsx"),h=a("./app/utils/useApi.tsx"),g=a("./app/views/dashboardsV2/types.tsx"),m=a("./app/views/dashboardsV2/widgetBuilder/utils.tsx"),b=a("./app/views/dashboardsV2/widgetCard/index.tsx"),w=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x=(0,p.t)("Select a dashboard");function y(e){let{Header:t,Body:a,Footer:s,closeModal:l,organization:u,router:y,selection:Z,widget:C,widgetAsQueryParams:A}=e;const B=(0,h.Z)(),[D,_]=(0,o.useState)(null),[j,S]=(0,o.useState)(null);(0,o.useEffect)((()=>{let e=!1;return(0,d.j2)(B,u.slug).then((t=>{e||_(t)})),()=>{e=!0}}),[B,u.slug]);const k=null!==j;return(0,w.BX)(o.Fragment,{children:[(0,w.tZ)(t,{closeButton:!0,children:(0,w.tZ)("h4",{children:(0,p.t)("Add to Dashboard")})}),(0,w.BX)(a,{children:[(0,w.tZ)(v,{children:(0,w.tZ)(n.Z,{disabled:null===D,menuPlacement:"auto",name:"dashboard",placeholder:(0,p.t)("Select Dashboard"),value:j,options:D&&[{label:(0,p.t)("+ Create New Dashboard"),value:"new"},...D.map((e=>{let{title:t,id:a,widgetDisplay:s}=e;return{label:t,value:a,isDisabled:s.length>=g.ZU,tooltip:s.length>=g.ZU&&(0,p._N)("Max widgets ([maxWidgets]) per dashboard reached.",{maxWidgets:g.ZU}),tooltipOptions:{position:"right"}}}))],onChange:e=>{e.disabled||S(e.value)}})}),(0,p.t)("This is a preview of how the widget will appear in your dashboard."),(0,w.tZ)(b.Z,{api:B,organization:u,currentWidgetDragging:!1,isEditing:!1,isSorting:!1,widgetLimitReached:!1,selection:Z,widget:C,showStoredAlert:!0})]}),(0,w.tZ)(s,{children:(0,w.BX)(f,{gap:1.5,children:[(0,w.tZ)(r.ZP,{onClick:async function(){if(null===j||j===m.i0)return;let e=C.queries[0].orderby;g.FO.AREA&&C.queries[0].columns.length||(e="");const t=C.queries[0],a={...C,title:""===C.title?(0,p.t)("All Events"):C.title,queries:[{...t,orderby:e}]};try{const e=await(0,d.AK)(B,u.slug,j),t={...e,widgets:[...e.widgets,a]};await(0,d.Y)(B,u.slug,t),l(),(0,i.S9)((0,p.t)("Successfully added widget to dashboard"))}catch(e){const t=(0,p.t)("Unable to add widget to dashboard");(0,c.Z)(t)(e),(0,i.Iw)(t)}},disabled:!k||j===m.i0,title:k?void 0:x,children:(0,p.t)("Add + Stay in Discover")}),(0,w.tZ)(r.ZP,{priority:"primary",onClick:function(){const e=j===m.i0?`/organizations/${u.slug}/dashboards/new/widget/new/`:`/organizations/${u.slug}/dashboard/${j}/widget/new/`;y.push({pathname:e,query:A}),l()},disabled:!k,title:k?void 0:x,children:(0,p.t)("Open in Widget Builder")})]})})]})}y.displayName="AddToDashboardModal";const Z=y,v=(0,s.Z)("div",{target:"erdydty1"})("margin-bottom:",(0,u.Z)(2),";"),f=(0,s.Z)(l.ZP,{target:"erdydty0"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-rows:repeat(2, 1fr);gap:",(0,u.Z)(1.5),";width:100%;>button{width:100%;}}"),C={name:"jzg5s9",styles:"max-width:700px;margin:70px auto"}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_widgetBuilder_addToDashboardModal_tsx.df0cfbb4f66edf620ad9d5b86b1d5bec.js.map