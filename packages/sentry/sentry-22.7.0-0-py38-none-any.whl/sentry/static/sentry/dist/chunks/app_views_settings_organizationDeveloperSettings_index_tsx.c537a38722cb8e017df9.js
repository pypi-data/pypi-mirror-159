(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationDeveloperSettings_index_tsx"],{"./app/components/confirmDelete.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s("../node_modules/react/index.js"),i=s("./app/components/alert.tsx"),o=s("./app/components/confirm.tsx"),a=s("./app/components/forms/controls/input.tsx"),r=s("./app/components/forms/field/index.tsx"),l=s("./app/locale.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=e=>{let{message:t,confirmInput:s,...c}=e;return(0,p.tZ)(o.Z,{...c,bypass:!1,disableConfirmButton:!0,renderMessage:e=>{let{disableConfirmButton:o}=e;return(0,p.BX)(n.Fragment,{children:[(0,p.tZ)(i.Z,{type:"error",children:t}),(0,p.tZ)(r.Z,{flexibleControlStateSize:!0,inline:!1,label:(0,l.t)("Please enter %s to confirm the deletion",(0,p.tZ)("code",{children:s})),children:(0,p.tZ)(a.Z,{type:"text",placeholder:s,onChange:e=>o(e.target.value!==s)})})]})}})};c.displayName="ConfirmDelete";const d=c},"./app/components/sentryAppIcon.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s("./app/components/avatar/sentryAppAvatar.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const o=e=>{let{sentryApp:t,size:s}=e;return(0,i.tZ)(n.Z,{sentryApp:t,size:s,isColor:!0})};o.displayName="SentryAppIcon";const a=o},"./app/utils/routeTitle.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;const i=`${e} - ${t}`,o=n?`${i} - ${n}`:i;return s?`${o} - Sentry`:o}},"./app/views/asyncView.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s("./app/components/asyncComponent.tsx"),i=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends n.Z{getTitle(){return""}render(){return(0,o.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/organizationIntegrations/createIntegrationButton.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var n=s("./app/actionCreators/modal.tsx"),i=s("./app/components/acl/access.tsx"),o=s("./app/components/button.tsx"),a=s("./app/locale.tsx"),r=s("./app/utils/analytics/integrations/platformAnalyticsEvents.ts"),l=s("./app/utils/integrationUtil.tsx"),p=s("./app/utils/withOrganization.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{organization:t,analyticsView:s}=e;const p=(0,a.t)("Manager or Owner permissions are required to create a new integration");return(0,c.tZ)(i.Z,{organization:t,access:["org:write"],children:e=>{let{hasAccess:i}=e;return(0,c.tZ)(o.ZP,{size:"sm",priority:"primary",disabled:!i,title:i?void 0:p,onClick:()=>{(0,n.openCreateNewIntegrationModal)({organization:t}),(0,l.Db)(r.dX.OPEN_CREATE_MODAL,{organization:t,view:s})},children:(0,a.t)("Create New Integration")})}})}d.displayName="CreateIntegrationButton";const u=(0,p.Z)(d)},"./app/views/organizationIntegrations/exampleIntegrationButton.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s("./app/components/button.tsx"),i=s("./app/icons/index.tsx"),o=s("./app/locale.tsx"),a=s("./app/utils/analytics/integrations/platformAnalyticsEvents.ts"),r=s("./app/utils/integrationUtil.tsx"),l=s("./app/utils/withOrganization.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{organization:t,analyticsView:s,...l}=e;return(0,p.tZ)(n.ZP,{size:"sm",external:!0,href:a.Uk[a.dX.EXAMPLE_SOURCE],onClick:()=>{(0,r.Db)(a.dX.EXAMPLE_SOURCE,{organization:t,view:s})},icon:(0,p.tZ)(i.Uv,{}),...l,children:(0,o.t)("View Example App")})}c.displayName="ExampleIntegrationButton";const d=(0,l.Z)(c)},"./app/views/settings/organizationDeveloperSettings/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ie});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("./app/actionCreators/indicator.tsx"),r=s("./app/locale.tsx"),l=s("./app/components/links/externalLink.tsx"),p=s("./app/components/navTabs.tsx"),c=s("./app/components/panels/index.tsx"),d=s("./app/styles/space.tsx"),u=s("./app/utils/analytics/integrations/platformAnalyticsEvents.ts"),h=s("./app/utils/integrationUtil.tsx"),m=s("./app/utils/routeTitle.tsx"),g=s("./app/utils/withOrganization.tsx"),x=s("./app/views/asyncView.tsx"),Z=s("./app/views/organizationIntegrations/createIntegrationButton.tsx"),b=s("./app/views/organizationIntegrations/exampleIntegrationButton.tsx"),y=s("./app/views/settings/components/emptyMessage.tsx"),f=s("./app/views/settings/components/settingsPageHeader.tsx"),v=s("./app/actionCreators/modal.tsx"),w=s("./app/components/links/link.tsx"),_=(s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/lodash/intersection.js")),j=s.n(_),z=s("./app/components/forms/form.tsx"),k=s("./app/components/forms/jsonForm.tsx"),S=s("./app/components/forms/model.tsx"),C=s("./app/constants/index.tsx"),I=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class A extends S.Z{getTransformedData(){const e=this.getData();return{questionnaire:Array.from(this.fieldDescriptor.values()).map((t=>({question:t.meta||t.label,answer:e[t.name]})))}}}class P extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"form",new A),(0,n.Z)(this,"handleSubmitSuccess",(()=>{(0,a.S9)((0,r.t)("Request to publish %s successful.",this.props.app.slug)),this.props.closeModal()})),(0,n.Z)(this,"handleSubmitError",(e=>{var t;(0,a.Iw)((0,r._N)("Request to publish [app] fails. [detail]",{app:this.props.app.slug,detail:null==e||null===(t=e.responseJSON)||void 0===t?void 0:t.detail}))}))}get formFields(){const{app:e}=this.props,t=(e=>{const t=[];for(const s of C.yh){let n;for(const t in s.choices){const i=s.choices[t],o=j()(i.scopes,e);o.length>0&&o.length===i.scopes.length&&(!n||o.length>n.scopes.length)&&(n=i)}if(n){const e=n.label.replace("Read & Write","Write");t.push(`${s.resource} ${e}`)}}return t})(e.scopes),s="Please justify why you are requesting each of the following permissions: ",n=`${s}${t.join(", ")}.`,i=(0,I.BX)(o.Fragment,{children:[(0,I.tZ)(B,{children:s}),t.map(((e,t)=>(0,I.BX)(o.Fragment,{children:[t>0&&", "," ",(0,I.tZ)(R,{children:e})]},e))),"."]}),a=[{type:"textarea",required:!0,label:"What does your integration do? Please be as detailed as possible.",autosize:!0,rows:1,inline:!1,name:"question0"},{type:"textarea",required:!0,label:"What value does it offer customers?",autosize:!0,rows:1,inline:!1,name:"question1"},{type:"textarea",required:!0,label:"Do you operate the web service your integration communicates with?",autosize:!0,rows:1,inline:!1,name:"question2"}];return t.length>0&&a.push({type:"textarea",required:!0,label:i,autosize:!0,rows:1,inline:!1,meta:n,name:"question3"}),a}render(){const{app:e,Header:t,Body:s}=this.props,n=`/sentry-apps/${e.slug}/publish-request/`,i=[{title:(0,r.t)("Questions to answer"),fields:this.formFields}];return(0,I.BX)(o.Fragment,{children:[(0,I.tZ)(t,{children:(0,r.t)("Publish Request Questionnaire")}),(0,I.BX)(s,{children:[(0,I.tZ)(D,{children:(0,r.t)("Please fill out this questionnaire in order to get your integration evaluated for publication.\n              Once your integration has been approved, users outside of your organization will be able to install it.")}),(0,I.tZ)(z.Z,{allowUndo:!0,apiMethod:"POST",apiEndpoint:n,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:this.handleSubmitError,model:this.form,submitLabel:(0,r.t)("Request Publication"),onCancel:()=>this.props.closeModal(),children:(0,I.tZ)(k.Z,{forms:i})})]})]})}}P.displayName="SentryAppPublishRequestModal";const D=(0,i.Z)("div",{target:"e14x9wf02"})("margin:",(0,d.Z)(1.5)," 0px;font-size:18px;"),B=(0,i.Z)("span",{target:"e14x9wf01"})({name:"1gt2cgk",styles:"line-height:24px"}),R=(0,i.Z)("code",{target:"e14x9wf00"})({name:"1gt2cgk",styles:"line-height:24px"});var E=s("./app/components/sentryAppIcon.tsx"),q=s("./app/components/acl/access.tsx"),X=s("./app/components/button.tsx"),N=s("./app/components/confirmDelete.tsx"),T=s("./app/icons/index.tsx");const O=e=>{let{org:t,app:s,showPublish:n,showDelete:i,onPublish:o,onDelete:a,disablePublishReason:l,disableDeleteReason:p}=e;const c=(0,I.tZ)(M,{size:"xs",icon:(0,I.tZ)(T.BW,{}),to:`/settings/${t.slug}/developer-settings/${s.slug}/dashboard/`,children:(0,r.t)("Dashboard")}),d=n?(0,I.tZ)(M,{disabled:!!l,title:l,icon:(0,I.tZ)(T.XK,{}),size:"xs",onClick:o,children:(0,r.t)("Publish")}):null,u=(0,r.t)(`Deleting ${s.slug} will also delete any and all of its installations.          This is a permanent action. Do you wish to continue?`),h=i?p?(0,I.tZ)(M,{disabled:!0,title:p,size:"xs",icon:(0,I.tZ)(T.Fz,{}),"aria-label":"Delete"}):a&&(0,I.tZ)(N.Z,{message:u,confirmInput:s.slug,priority:"danger",onConfirm:()=>a(s),children:(0,I.tZ)(M,{size:"xs",icon:(0,I.tZ)(T.Fz,{}),"aria-label":"Delete"})}):null;return(0,I.BX)($,{children:[c,d,h]})};O.displayName="ActionButtons";const $=(0,i.Z)("div",{target:"eg64e9n1"})("flex-direction:row;display:flex;&>*{margin-left:",(0,d.Z)(.5),";}"),M=(0,i.Z)(X.ZP,{target:"eg64e9n0"})("color:",(e=>e.theme.subText),";"),V=O,F=e=>{let{organization:t,app:s,onClickRemove:n,onClickPublish:i}=e;const o="internal"===s.status;return(0,I.tZ)(q.Z,{access:["org:admin"],organization:t,children:e=>{let{hasAccess:a}=e,l="",p="";return"published"===s.status?(l=(0,r.t)("Published integrations cannot be re-published."),p=(0,r.t)("Published integrations cannot be removed.")):a||(l=(0,r.t)("Organization owner permissions are required for this action."),p=(0,r.t)("Organization owner permissions are required for this action.")),(0,I.tZ)(V,{org:t,app:s,showPublish:!o,showDelete:!0,onPublish:i,onDelete:n,disablePublishReason:l,disableDeleteReason:p})}})};F.displayName="SentryApplicationRowButtons";const U=F;class L extends o.PureComponent{constructor(){super(...arguments),(0,n.Z)(this,"handlePublish",(()=>{const{app:e}=this.props;(0,v.openModal)((t=>(0,I.tZ)(P,{app:e,...t})))}))}get isInternal(){return"internal"===this.props.app.status}hideStatus(){return this.isInternal}renderStatus(){const{app:e}=this.props;return this.hideStatus()?null:(0,I.tZ)(te,{status:e.status})}render(){const{app:e,organization:t,onRemoveApp:s}=this.props;return(0,I.tZ)(Q,{"data-test-id":e.slug,children:(0,I.BX)(J,{children:[(0,I.tZ)(E.Z,{sentryApp:e,size:36}),(0,I.BX)(K,{children:[(0,I.tZ)(Y,{hideStatus:this.hideStatus(),children:(0,I.tZ)(w.Z,{to:`/settings/${t.slug}/developer-settings/${e.slug}/`,children:e.name})}),(0,I.tZ)(G,{children:this.renderStatus()})]}),(0,I.tZ)(H,{children:(0,I.tZ)(U,{organization:t,app:e,onClickRemove:s,onClickPublish:this.handlePublish})})]})})}}L.displayName="SentryApplicationRow";const W=(0,i.Z)("div",{target:"e1go2kpk8"})({name:"zjik7",styles:"display:flex"}),H=(0,i.Z)("div",{target:"e1go2kpk7"})(""),Q=(0,i.Z)(c.Lv,{target:"e1go2kpk6"})({name:"ehbzc8",styles:"flex-direction:column;padding:5px"}),J=(0,i.Z)(W,{target:"e1go2kpk5"})({name:"1yplio6",styles:"justify-content:center;padding:10px"}),K=(0,i.Z)("div",{target:"e1go2kpk4"})({name:"3mxc9l",styles:"padding-left:15px;padding-right:15px;flex:1"}),G=(0,i.Z)(W,{target:"e1go2kpk3"})({name:"p4xtjg",styles:"align-items:center;margin-top:6px;font-size:0.8em"}),Y=(0,i.Z)("div",{target:"e1go2kpk2"})("margin-top:",(e=>e.hideStatus?"10px":"0px"),";"),ee=(0,i.Z)(W,{target:"e1go2kpk1"})({name:"1h3rtzg",styles:"align-items:center"}),te=(0,i.Z)((e=>{let{status:t,...s}=e;return(0,I.tZ)(ee,{children:(0,I.tZ)("div",{...s,children:(0,r.t)(`${t}`)})})}),{target:"e1go2kpk0"})("color:",(e=>"published"===e.status?e.theme.success:e.theme.gray300),";font-weight:light;margin-right:",(0,d.Z)(.75),";");class se extends x.Z{constructor(){super(...arguments),(0,n.Z)(this,"analyticsView","developer_settings"),(0,n.Z)(this,"removeApp",(e=>{const t=this.state.applications.filter((t=>t.slug!==e.slug));(function(e,t){(0,a.E3)();const s=e.requestPromise(`/sentry-apps/${t.slug}/`,{method:"DELETE"});return s.then((()=>{(0,a.S9)((0,r.t)("%s successfully removed.",t.slug))}),(()=>{(0,a.B8)(),(0,a.Iw)((0,r.t)("Unable to remove %s integration",t.slug))})),s})(this.api,e).then((()=>{this.setState({applications:t})}),(()=>{}))})),(0,n.Z)(this,"onTabChange",(e=>{this.setState({tab:e})})),(0,n.Z)(this,"renderApplicationRow",(e=>{const{organization:t}=this.props;return(0,I.tZ)(L,{app:e,organization:t,onRemoveApp:this.removeApp},e.uuid)}))}getDefaultState(){const{location:e}=this.props,t=["public","internal"].find((t=>{var s;return t===(null==e||null===(s=e.query)||void 0===s?void 0:s.type)}))||"internal";return{...super.getDefaultState(),applications:[],tab:t}}get tab(){return this.state.tab}getTitle(){const{orgId:e}=this.props.params;return(0,m.Z)((0,r.t)("Developer Settings"),e,!1)}getEndpoints(){const{orgId:e}=this.props.params;return[["applications",`/organizations/${e}/sentry-apps/`]]}renderInternalIntegrations(){const e=this.state.applications.filter((e=>"internal"===e.status)),t=0===e.length;return(0,I.BX)(c.s_,{children:[(0,I.tZ)(c.V9,{children:(0,r.t)("Internal Integrations")}),(0,I.tZ)(c.N,{children:t?(0,I.tZ)(y.Z,{children:(0,r.t)("No internal integrations have been created yet.")}):e.map(this.renderApplicationRow)})]})}renderPublicIntegrations(){const e=this.state.applications.filter((e=>"internal"!==e.status)),t=0===e.length;return(0,I.BX)(c.s_,{children:[(0,I.tZ)(c.V9,{children:(0,r.t)("Public Integrations")}),(0,I.tZ)(c.N,{children:t?(0,I.tZ)(y.Z,{children:(0,r.t)("No public integrations have been created yet.")}):e.map(this.renderApplicationRow)})]})}renderTabContent(e){return"internal"===e?this.renderInternalIntegrations():this.renderPublicIntegrations()}renderBody(){const{organization:e}=this.props,t=[["internal",(0,r.t)("Internal Integration")],["public",(0,r.t)("Public Integration")]];return(0,I.BX)("div",{children:[(0,I.tZ)(f.Z,{title:(0,r.t)("Developer Settings"),body:(0,I.BX)(o.Fragment,{children:[(0,r.t)("Create integrations that interact with Sentry using the REST API and webhooks. "),(0,I.tZ)("br",{}),(0,r._N)("For more information [link: see our docs].",{link:(0,I.tZ)(l.Z,{href:u.Uk[u.dX.DOCS],onClick:()=>{(0,h.Db)(u.dX.DOCS,{organization:e,view:this.analyticsView})}})})]}),action:(0,I.BX)(ne,{children:[(0,I.tZ)(b.Z,{analyticsView:this.analyticsView,style:{marginRight:(0,d.Z)(1)}}),(0,I.tZ)(Z.Z,{analyticsView:this.analyticsView})]})}),(0,I.tZ)(p.Z,{underlined:!0,children:t.map((e=>{let[t,s]=e;return(0,I.tZ)("li",{className:this.tab===t?"active":"",onClick:()=>this.onTabChange(t),children:(0,I.tZ)("a",{children:s})},t)}))}),this.renderTabContent(this.tab)]})}}const ne=(0,i.Z)("div",{target:"ekicjwg0"})({name:"zjik7",styles:"display:flex"}),ie=(0,g.Z)(se)},"../node_modules/lodash/_baseIntersection.js":(e,t,s)=>{var n=s("../node_modules/lodash/_SetCache.js"),i=s("../node_modules/lodash/_arrayIncludes.js"),o=s("../node_modules/lodash/_arrayIncludesWith.js"),a=s("../node_modules/lodash/_arrayMap.js"),r=s("../node_modules/lodash/_baseUnary.js"),l=s("../node_modules/lodash/_cacheHas.js"),p=Math.min;e.exports=function(e,t,s){for(var c=s?o:i,d=e[0].length,u=e.length,h=u,m=Array(u),g=1/0,x=[];h--;){var Z=e[h];h&&t&&(Z=a(Z,r(t))),g=p(Z.length,g),m[h]=!s&&(t||d>=120&&Z.length>=120)?new n(h&&Z):void 0}Z=e[0];var b=-1,y=m[0];e:for(;++b<d&&x.length<g;){var f=Z[b],v=t?t(f):f;if(f=s||0!==f?f:0,!(y?l(y,v):c(x,v,s))){for(h=u;--h;){var w=m[h];if(!(w?l(w,v):c(e[h],v,s)))continue e}y&&y.push(v),x.push(f)}}return x}},"../node_modules/lodash/_castArrayLikeObject.js":(e,t,s)=>{var n=s("../node_modules/lodash/isArrayLikeObject.js");e.exports=function(e){return n(e)?e:[]}},"../node_modules/lodash/intersection.js":(e,t,s)=>{var n=s("../node_modules/lodash/_arrayMap.js"),i=s("../node_modules/lodash/_baseIntersection.js"),o=s("../node_modules/lodash/_baseRest.js"),a=s("../node_modules/lodash/_castArrayLikeObject.js"),r=o((function(e){var t=n(e,a);return t.length&&t[0]===e[0]?i(t):[]}));e.exports=r}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationDeveloperSettings_index_tsx.8fecbebeb897674cf7a97b7dbf45902b.js.map