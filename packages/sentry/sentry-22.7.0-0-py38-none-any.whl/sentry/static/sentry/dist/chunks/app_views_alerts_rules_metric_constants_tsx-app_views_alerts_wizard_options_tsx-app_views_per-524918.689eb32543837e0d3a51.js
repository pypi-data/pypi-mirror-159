"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_rules_metric_constants_tsx-app_views_alerts_wizard_options_tsx-app_views_per-524918"],{"./app/utils/performance/anomalies/anomaliesQuery.tsx":(e,t,n)=>{n.d(t,{Z:()=>u}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/utils/discover/genericDiscoverQuery.tsx"),a=n("./app/utils/withApi.tsx"),s=n("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){return e.data.forEach((e=>e[0]=1e3*e[0])),e}function l(e){const t={...e};return e.y&&e.yhat_lower&&e.yhat_upper&&e.anomalies?(t.y=o(e.y),t.yhat_upper=o(e.yhat_upper),t.yhat_lower=o(e.yhat_lower),t.anomalies=((n=e.anomalies).forEach((e=>{e.start=1e3*e.start,e.end=1e3*e.end})),n),t):t;var n}function c(e){return e.organization.features.includes(s.uT)?(0,i.tZ)(r.ZP,{route:"transaction-anomaly-detection",...e,children:t=>{let{tableData:n,...r}=t;return e.children({data:n&&n.y?l(n):null,...r})}}):(0,i.tZ)("div",{children:e.children({data:null,isLoading:!1,error:null,pageLinks:null})})}c.displayName="AnomaliesSeriesQuery";const u=(0,a.Z)(c)},"./app/utils/performance/suspectSpans/suspectSpansQuery.tsx":(e,t,n)=>{n.d(t,{Z:()=>p});var r=n("../node_modules/lodash/omit.js"),a=n.n(r),s=n("./app/utils.tsx"),i=n("./app/utils/discover/genericDiscoverQuery.tsx"),o=n("./app/utils/withApi.tsx"),l=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){const{perSuspect:t,spanOps:n,spanGroups:r,minExclusiveTime:a,maxExclusiveTime:i}=e,o={perSuspect:t,spanOp:n,spanGroup:r,min_exclusive_time:a,max_exclusive_time:i};(0,s.ri)(o.perSuspect)||delete o.perSuspect,(0,s.ri)(o.spanOp)||delete o.spanOp,(0,s.ri)(o.spanGroup)||delete o.spanGroup;const l=e.eventView.getEventsAPIPayload(e.location);return{...o,...l}}function u(e){return(0,l.tZ)(i.ZP,{route:"events-spans-performance",getRequestPayload:c,...a()(e,"children"),children:t=>{let{tableData:n,...r}=t;return e.children({suspectSpans:n,...r})}})}u.displayName="SuspectSpansQuery";const p=(0,o.Z)(u)},"./app/views/alerts/rules/metric/constants.tsx":(e,t,n)=>{n.d(t,{H9:()=>_,Hq:()=>N,KP:()=>S,Ng:()=>p,P1:()=>m,Q6:()=>R,Vr:()=>u,W7:()=>w,XU:()=>y,Yp:()=>E,b1:()=>o,bp:()=>f,ep:()=>Z,hh:()=>d,kV:()=>c,nM:()=>T,rQ:()=>x,wT:()=>l,yq:()=>g}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/locale.tsx"),a=n("./app/utils/performance/vitals/constants.tsx"),s=n("./app/views/alerts/rules/metric/types.tsx"),i=n("./app/views/alerts/utils/index.tsx");const o=1,l=60,c=10080,u="count()",p="p95(transaction.duration)",d={[s.qz.ERRORS]:"event.type:error",[s.qz.TRANSACTIONS]:"event.type:transaction"},m={[s.Yh.ERROR_DEFAULT]:"event.type:[error, default]",[s.Yh.ERROR]:"event.type:error",[s.Yh.DEFAULT]:"event.type:default",[s.Yh.TRANSACTION]:"event.type:transaction"},g={aggregations:["count","count_unique"],fields:["user"]},h=["avg","percentile","p50","p75","p95","p99","p100"],v=[...h,"failure_rate","apdex","count"],f=["dataset","eventTypes","aggregate","query","timeWindow","thresholdPeriod","projects","environment","resolveThreshold","thresholdType","owner","name","projectId","comparisonDelta"],y=["alertThreshold","label"],x=["type","targetType","targetIdentifier","inputChannelId","options"],S=[{value:5,label:(0,r.t)("same time 5 minutes ago")},{value:15,label:(0,r.t)("same time 15 minutes ago")},{value:60,label:(0,r.t)("same time one hour ago")},{value:1440,label:(0,r.t)("same time one day ago")},{value:10080,label:(0,r.t)("same time one week ago")},{value:43200,label:(0,r.t)("same time one month ago")}];function T(e,t){return"custom"===e&&t===s.qz.ERRORS?g:{aggregations:"apdex"===e||"custom"===e?v:h,fields:["transaction.duration"],measurementKeys:Object.keys(a.r9)}}const E={aggregations:v,fields:["transaction.duration"],measurementKeys:Object.keys(a.r9)};function w(e){return{label:e,alertThreshold:"",actions:[]}}function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{dataset:s.qz.ERRORS,eventTypes:[s.GM.ERROR],aggregate:u,query:"",timeWindow:60,thresholdPeriod:1,triggers:[w(s.F4.CRITICAL),w(s.F4.WARNING)],projects:[],environment:null,resolveThreshold:"",thresholdType:s.lT.ABOVE,...e}}function _(e){var t;const n=(0,i.A4)(e.query),r=n?i.Ey[n.source]:i.Ey.error;let a=e.getYAxis();return"transactions"===r.dataset&&/^p\d{2,3}\(\)/.test(e.getYAxis())&&(a=e.getYAxis().slice(0,3)+"(transaction.duration)"),{...Z(),...r,query:null!==(t=null==n?void 0:n.query)&&void 0!==t?t:e.query,aggregate:a,environment:e.environment.length?e.environment[0]:null}}function R(e){const{eventTypes:t,aggregate:n,dataset:r}=e,a={};return(0,i.Eb)(n)&&(a.thresholdType=s.lT.BELOW,a.timeWindow=s.Tb.ONE_HOUR),n.includes("apdex")&&(a.thresholdType=s.lT.BELOW),{...Z(a),eventTypes:[t],aggregate:n,dataset:r}}function N(e,t){return(0,i.Eb)(e)||t===s.t6.CHANGE?"%":e.includes("measurements.cls")?"":e.includes("duration")||e.includes("measurements")?"ms":""}},"./app/views/alerts/rules/metric/types.tsx":(e,t,n)=>{n.d(t,{F4:()=>s,GM:()=>l,LO:()=>g,Lm:()=>h,Tb:()=>d,Us:()=>m,XH:()=>p,Yh:()=>c,hd:()=>v,lK:()=>u,lT:()=>a,qz:()=>o,t6:()=>i});var r=n("./app/locale.tsx");let a,s,i,o,l,c,u,p,d,m;!function(e){e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW"}(a||(a={})),function(e){e.CRITICAL="critical",e.WARNING="warning",e.RESOLVE="resolve"}(s||(s={})),function(e){e.COUNT="count",e.CHANGE="change"}(i||(i={})),function(e){e.ERRORS="events",e.TRANSACTIONS="transactions",e.SESSIONS="sessions",e.METRICS="metrics"}(o||(o={})),function(e){e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction",e.USER="user",e.SESSION="session"}(l||(l={})),function(e){e.ERROR_DEFAULT="error_default",e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(c||(c={})),function(e){e.CRASH_FREE_SESSIONS="percentage(sessions_crashed, sessions) AS _crash_rate_alert_aggregate",e.CRASH_FREE_USERS="percentage(users_crashed, users) AS _crash_rate_alert_aggregate"}(u||(u={})),function(e){e.SIX_HOURS="6h",e.ONE_DAY="1d",e.THREE_DAYS="3d",e.SEVEN_DAYS="10000m",e.FOURTEEN_DAYS="14d",e.THIRTY_DAYS="30d"}(p||(p={})),function(e){e[e.ONE_MINUTE=1]="ONE_MINUTE",e[e.FIVE_MINUTES=5]="FIVE_MINUTES",e[e.TEN_MINUTES=10]="TEN_MINUTES",e[e.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",e[e.THIRTY_MINUTES=30]="THIRTY_MINUTES",e[e.ONE_HOUR=60]="ONE_HOUR",e[e.TWO_HOURS=120]="TWO_HOURS",e[e.FOUR_HOURS=240]="FOUR_HOURS",e[e.ONE_DAY=1440]="ONE_DAY"}(d||(d={})),function(e){e.EMAIL="email",e.SLACK="slack",e.PAGERDUTY="pagerduty",e.MSTEAMS="msteams",e.SENTRY_APP="sentry_app"}(m||(m={}));const g={[m.EMAIL]:(0,r.t)("Emai​l"),[m.SLACK]:(0,r.t)("Slack"),[m.PAGERDUTY]:(0,r.t)("Pagerduty"),[m.MSTEAMS]:(0,r.t)("MS Teams"),[m.SENTRY_APP]:(0,r.t)("Notification")};let h;!function(e){e.SPECIFIC="specific",e.USER="user",e.TEAM="team",e.SENTRY_APP="sentry_app"}(h||(h={}));const v={[h.USER]:(0,r.t)("Member"),[h.TEAM]:(0,r.t)("Team")}},"./app/views/alerts/types.tsx":(e,t,n)=>{let r,a,s,i,o,l;n.d(t,{Gb:()=>o,XO:()=>l,lm:()=>a,ok:()=>r,vt:()=>s}),function(e){e.METRIC="metric",e.ISSUE="issue"}(r||(r={})),function(e){e[e.CREATED=0]="CREATED",e[e.DETECTED=1]="DETECTED",e[e.STATUS_CHANGE=2]="STATUS_CHANGE",e[e.COMMENT=3]="COMMENT",e[e.STARTED=4]="STARTED"}(a||(a={})),function(e){e[e.OPENED=1]="OPENED",e[e.CLOSED=2]="CLOSED",e[e.WARNING=10]="WARNING",e[e.CRITICAL=20]="CRITICAL"}(s||(s={})),function(e){e[e.MANUAL=1]="MANUAL",e[e.RULE_UPDATED=2]="RULE_UPDATED",e[e.RULE_TRIGGERED=3]="RULE_TRIGGERED"}(i||(i={})),function(e){e[e.PENDING=0]="PENDING",e[e.SNAPSHOT=4]="SNAPSHOT",e[e.DISABLED=5]="DISABLED"}(o||(o={})),function(e){e.METRIC="alert_rule",e.ISSUE="rule"}(l||(l={}))},"./app/views/alerts/utils/index.tsx":(e,t,n)=>{n.d(t,{A4:()=>h,CM:()=>d,Eb:()=>v,Ey:()=>m,Gm:()=>p,Gu:()=>E,KC:()=>g,LI:()=>_,QR:()=>T,Vc:()=>f,g2:()=>w,lR:()=>y,qn:()=>x,t3:()=>S}),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.replace.js");var r=n("../node_modules/lodash/round.js"),a=n.n(r),s=n("./app/locale.tsx"),i=n("./app/types/index.tsx"),o=n("./app/utils.tsx"),l=(n("./app/utils/dates.tsx"),n("./app/utils/discover/charts.tsx")),c=n("./app/views/alerts/rules/metric/types.tsx"),u=n("./app/views/alerts/types.tsx");function p(e){return!e.hasOwnProperty("triggers")}const d={[c.qz.ERRORS]:(0,s.t)("Errors"),[c.qz.TRANSACTIONS]:(0,s.t)("Transactions"),[c.Yh.ERROR_DEFAULT]:"event.type:error OR event.type:default",[c.Yh.ERROR]:"event.type:error",[c.Yh.DEFAULT]:"event.type:default",[c.Yh.TRANSACTION]:"event.type:transaction"},m={[c.Yh.ERROR_DEFAULT]:{dataset:c.qz.ERRORS,eventTypes:[c.GM.ERROR,c.GM.DEFAULT]},[c.Yh.ERROR]:{dataset:c.qz.ERRORS,eventTypes:[c.GM.ERROR]},[c.Yh.DEFAULT]:{dataset:c.qz.ERRORS,eventTypes:[c.GM.DEFAULT]},[c.Yh.TRANSACTION]:{dataset:c.qz.TRANSACTIONS,eventTypes:[c.GM.TRANSACTION]}};function g(e,t){return e===c.qz.TRANSACTIONS?c.Yh.TRANSACTION:t?t.includes(c.GM.DEFAULT)&&t.includes(c.GM.ERROR)?c.Yh.ERROR_DEFAULT:t.includes(c.GM.DEFAULT)?c.Yh.DEFAULT:c.Yh.ERROR:c.Yh.ERROR}function h(e){let t=e.match(/\(?\bevent\.type:(error|default|transaction)\)?\WOR\W\(?event\.type:(error|default|transaction)\)?/i);return t?"default,error"!==t.slice(1,3).sort().join(",")?null:{source:c.Yh.ERROR_DEFAULT,query:e.replace(t[0],"").trim()}:(t=e.match(/(^|\s)event\.type:(error|default|transaction)/i),t&&c.Yh[t[2].toUpperCase()]?{source:c.Yh[t[2].toUpperCase()],query:e.replace(t[0],"").trim()}:null)}function v(e){return Object.values(c.lK).includes(e)}const f={[c.lK.CRASH_FREE_SESSIONS]:i.kI.SESSIONS,[c.lK.CRASH_FREE_USERS]:i.kI.USERS};function y(e,t,n){return v(n)?(0,o.ri)(e)?`${a()(e,2)}%`:"―":(0,l.gu)(e,t)}function x(e,t,n){return v(n)?(0,o.ri)(e)?`${e}%`:"―":(0,l.CX)(e,t)}const S=1.03;function T(e){return v(e)}function E(e,t){return`/organizations/${e.slug}/alerts/rules/details/${t.alertRule.status===u.Gb.SNAPSHOT&&t.alertRule.originalAlertRuleId?t.alertRule.originalAlertRuleId:t.alertRule.id}/`}function w(e){return Array.isArray(e)||""===e?"all":["open","closed"].includes(e)?e:"all"}const Z=["myteams","unassigned"];function _(e){return void 0===e?Z:""===e?[]:Array.isArray(e)?e:[e]}},"./app/views/alerts/wizard/options.tsx":(e,t,n)=>{n.d(t,{A_:()=>i,F4:()=>l,F7:()=>c,FZ:()=>o,LH:()=>u,gb:()=>s,mp:()=>p}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/locale.tsx"),a=n("./app/views/alerts/rules/metric/types.tsx");const s={issues:(0,r.t)("Issues"),num_errors:(0,r.t)("Number of Errors"),users_experiencing_errors:(0,r.t)("Users Experiencing Errors"),throughput:(0,r.t)("Throughput"),trans_duration:(0,r.t)("Transaction Duration"),apdex:(0,r.t)("Apdex"),failure_rate:(0,r.t)("Failure Rate"),lcp:(0,r.t)("Largest Contentful Paint"),fid:(0,r.t)("First Input Delay"),cls:(0,r.t)("Cumulative Layout Shift"),custom:(0,r.t)("Custom Metric"),crash_free_sessions:(0,r.t)("Crash Free Session Rate"),crash_free_users:(0,r.t)("Crash Free User Rate")},i=e=>[{categoryHeading:(0,r.t)("Errors"),options:["issues","num_errors","users_experiencing_errors"]},...e.features.includes("crash-rate-alerts")?[{categoryHeading:(0,r.t)("Sessions"),options:["crash_free_sessions","crash_free_users"]}]:[],{categoryHeading:(0,r.t)("Performance"),options:["throughput","trans_duration","apdex","failure_rate","lcp","fid","cls"]},{categoryHeading:(0,r.t)("Other"),options:["custom"]}],o={num_errors:{aggregate:"count()",dataset:a.qz.ERRORS,eventTypes:a.GM.ERROR},users_experiencing_errors:{aggregate:"count_unique(user)",dataset:a.qz.ERRORS,eventTypes:a.GM.ERROR},throughput:{aggregate:"count()",dataset:a.qz.TRANSACTIONS,eventTypes:a.GM.TRANSACTION},trans_duration:{aggregate:"p95(transaction.duration)",dataset:a.qz.TRANSACTIONS,eventTypes:a.GM.TRANSACTION},apdex:{aggregate:"apdex(300)",dataset:a.qz.TRANSACTIONS,eventTypes:a.GM.TRANSACTION},failure_rate:{aggregate:"failure_rate()",dataset:a.qz.TRANSACTIONS,eventTypes:a.GM.TRANSACTION},lcp:{aggregate:"p95(measurements.lcp)",dataset:a.qz.TRANSACTIONS,eventTypes:a.GM.TRANSACTION},fid:{aggregate:"p95(measurements.fid)",dataset:a.qz.TRANSACTIONS,eventTypes:a.GM.TRANSACTION},cls:{aggregate:"p95(measurements.cls)",dataset:a.qz.TRANSACTIONS,eventTypes:a.GM.TRANSACTION},custom:{aggregate:"p95(measurements.fp)",dataset:a.qz.TRANSACTIONS,eventTypes:a.GM.TRANSACTION},crash_free_sessions:{aggregate:a.lK.CRASH_FREE_SESSIONS,dataset:a.qz.SESSIONS,eventTypes:a.GM.SESSION},crash_free_users:{aggregate:a.lK.CRASH_FREE_USERS,dataset:a.qz.SESSIONS,eventTypes:a.GM.USER}},l=o.num_errors,c=new Set(["num_errors","users_experiencing_errors","throughput","apdex","failure_rate","crash_free_sessions","crash_free_users"]),u=new Set(["trans_duration","lcp","fid","cls"]);function p(e){const t=(0,r.t)("over");return"apdex"===e?{labelText:(0,r.t)("Select apdex threshold and time interval"),timeWindowText:t}:c.has(e)?{labelText:(0,r.t)("Select time interval")}:{labelText:(0,r.t)("Select function and time interval"),timeWindowText:t}}},"./app/views/eventsV2/tags.tsx":(e,t,n)=>{n.d(t,{Z:()=>Z});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),i=n("../node_modules/@sentry/hub/esm/exports.js"),o=n("./app/actionCreators/events.tsx"),l=n("./app/components/charts/errorPanel.tsx"),c=n("./app/components/charts/styles.tsx"),u=n("./app/components/emptyStateWarning.tsx"),p=n("./app/components/placeholder.tsx"),d=n("./app/components/tagDistributionMeter.tsx"),m=n("./app/icons/index.tsx"),g=n("./app/locale.tsx"),h=n("./app/styles/space.tsx"),v=n("./app/utils/analytics.tsx"),f=n("./app/utils/discover/eventView.tsx"),y=n("./app/utils/withApi.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class S extends s.Component{constructor(){var e;super(...arguments),e=this,(0,r.Z)(this,"state",{loading:!0,tags:[],totalValues:null,error:""}),(0,r.Z)(this,"shouldRefetchData",(e=>{const t=this.props.eventView.getFacetsAPIPayload(this.props.location),n=e.eventView.getFacetsAPIPayload(e.location);return!(0,f.ze)(t,n)})),(0,r.Z)(this,"fetchData",(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{api:n,organization:r,eventView:a,location:s,confirmedQuery:l}=e.props;if(e.setState({loading:!0,error:"",tags:[]}),t||!1!==l)try{const t=await(0,o.eV)(n,r.slug,a.getFacetsAPIPayload(s));e.setState({loading:!1,tags:t})}catch(t){i.Tb(t),e.setState({loading:!1,error:t})}})),(0,r.Z)(this,"handleTagClick",(e=>{const{organization:t}=this.props;(0,v.ec)({eventKey:"discover_v2.facet_map.clicked",eventName:"Discoverv2: Clicked on a tag on the facet map",tag:e,organization_id:parseInt(t.id,10)})})),(0,r.Z)(this,"renderBody",(()=>{const{loading:e,error:t,tags:n}=this.state;return e?this.renderPlaceholders():t?(0,x.tZ)(l.Z,{height:"132px",children:(0,x.tZ)(m.FC,{color:"gray300",size:"lg"})}):n.length>0?n.map((e=>this.renderTag(e))):(0,x.tZ)(T,{small:!0,children:(0,g.t)("No tags found")})}))}componentDidMount(){this.fetchData(!0)}componentDidUpdate(e){(this.shouldRefetchData(e)||e.confirmedQuery!==this.props.confirmedQuery)&&this.fetchData()}renderTag(e){const{generateUrl:t,totalValues:n}=this.props,r=e.topValues.map((n=>(n.url=t(e.key,n.value),n))),a=r.length>0?Math.max(Number(n),r[0].count):n;return(0,x.tZ)(d.Z,{title:e.key,segments:r,totalValues:Number(a),renderLoading:()=>(0,x.tZ)(E,{height:"16px"}),onTagClick:this.handleTagClick,showReleasePackage:!0},e.key)}renderPlaceholders(){return(0,x.BX)(s.Fragment,{children:[(0,x.tZ)(w,{},"title-1"),(0,x.tZ)(E,{},"bar-1"),(0,x.tZ)(w,{},"title-2"),(0,x.tZ)(E,{},"bar-2"),(0,x.tZ)(w,{},"title-3"),(0,x.tZ)(E,{},"bar-3")]})}render(){return(0,x.BX)(s.Fragment,{children:[(0,x.tZ)(c.OT,{children:(0,g.t)("Tag Summary")}),this.renderBody()]})}}S.displayName="Tags";const T=(0,a.Z)(u.Z,{target:"e1pu9veq2"})({name:"rtpdsm",styles:"height:132px;padding:54px 15%"}),E=(0,a.Z)(p.Z,{target:"e1pu9veq1"})("border-radius:",(e=>e.theme.borderRadius),";height:16px;margin-bottom:",(0,h.Z)(1.5),";"),w=(0,a.Z)(p.Z,{target:"e1pu9veq0"})("width:100px;height:12px;margin-bottom:",(0,h.Z)(.5),";"),Z=(0,y.Z)(S)},"./app/views/performance/transactionSummary/transactionOverview/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>yt}),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react/index.js"),a=n("../node_modules/react-router/es/index.js"),s=n("./app/actionCreators/tags.tsx"),i=n("./app/locale.tsx"),o=n("./app/utils/analytics.tsx"),l=n("./app/utils/discover/discoverQuery.tsx"),c=n("./app/utils/discover/eventView.tsx"),u=n("./app/utils/discover/fields.tsx"),p=n("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),d=n("./app/utils/performance/histogram/index.tsx"),m=n("./app/utils/queryString.tsx"),g=n("./app/utils/tokenizeSearch.tsx"),h=n("./app/utils/useApi.tsx"),v=n("./app/utils/withOrganization.tsx"),f=n("./app/utils/withPageFilters.tsx"),y=n("./app/utils/withProjects.tsx"),x=n("./app/views/performance/utils.tsx"),S=n("./app/views/performance/transactionSummary/filter.tsx"),T=n("./app/views/performance/transactionSummary/pageLayout.tsx"),E=n("./app/views/performance/transactionSummary/tabs.tsx"),w=n("./app/views/performance/transactionSummary/transactionVitals/constants.tsx"),Z=n("./app/views/performance/transactionSummary/transactionOverview/latencyChart/utils.tsx"),_=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),R=n("../node_modules/lodash/omit.js"),N=n.n(R),A=n("./app/components/acl/feature.tsx"),O=n("./app/components/datePageFilter.tsx"),b=n("./app/components/discover/transactionsList.tsx"),C=n("./app/components/environmentPageFilter.tsx"),I=n("./app/components/events/searchBar.tsx"),q=n("./app/components/layouts/thirds.tsx"),z=n("./app/components/organizations/pageFilterBar.tsx"),L=n("./app/components/organizations/pageFilters/parse.tsx"),k=n("./app/constants/index.tsx"),P=n("./app/styles/space.tsx"),j=n("./app/utils.tsx"),D=n("./app/views/eventsV2/table/cellAction.tsx"),F=n("./app/views/eventsV2/tags.tsx"),U=n("./app/views/performance/transactionSummary/utils.tsx"),V=n("./app/views/performance/transactionSummary/transactionOverview/metricEvents/metricsEventsDropdown.tsx"),M=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),B=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),G=n("../node_modules/lodash/pick.js"),Y=n.n(G),H=n("./app/components/button.tsx"),X=n("./app/components/charts/styles.tsx"),$=n("./app/components/emptyStateWarning.tsx"),W=n("./app/components/issues/groupList.tsx"),K=n("./app/components/panels/index.tsx"),Q=n("./app/constants/pageFilters.tsx"),J=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class ee extends r.Component{constructor(){super(...arguments),(0,B.Z)(this,"handleOpenClick",(()=>{const{organization:e}=this.props;(0,o.ec)({eventKey:"performance_views.summary.open_issues",eventName:"Performance Views: Open issues from transaction summary",organization_id:parseInt(e.id,10)})})),(0,B.Z)(this,"renderEmptyMessage",(()=>{const{statsPeriod:e}=this.props,t=e&&k.wh[e],n=t?t.toLowerCase():(0,i.t)("given timeframe");return(0,J.tZ)(K.s_,{children:(0,J.tZ)(K.N,{children:(0,J.tZ)($.Z,{children:(0,J.tZ)("p",{children:(0,i._N)("No new issues for this transaction for the [timePeriod].",{timePeriod:n})})})})})}))}getIssuesEndpoint(){const{transaction:e,organization:t,start:n,end:r,statsPeriod:a,location:s}=this.props,i={start:n,end:r,statsPeriod:a,limit:5,sort:"new",...Y()(s.query,[...Object.values(Q.nF),"cursor"])},o=new g.MY((0,m.ro)(s.query.query,""));return(0,x.m_)(o),o.addFreeText("is:unresolved").setFilterValues("transaction",[e]),{path:`/organizations/${t.slug}/issues/`,queryParams:{...i,query:o.formatString()}}}render(){const{organization:e}=this.props,{path:t,queryParams:n}=this.getIssuesEndpoint(),a={pathname:`/organizations/${e.slug}/issues/`,query:n};return(0,J.BX)(r.Fragment,{children:[(0,J.BX)(te,{children:[(0,J.tZ)(X.OT,{children:(0,i.t)("Related Issues")}),(0,J.tZ)(H.ZP,{"data-test-id":"issues-open",size:"xs",to:a,onClick:this.handleOpenClick,children:(0,i.t)("Open in Issues")})]}),(0,J.tZ)(ne,{children:(0,J.tZ)(W.Z,{orgId:e.slug,endpointPath:t,queryParams:n,query:"",canSelectGroups:!1,renderEmptyMessage:this.renderEmptyMessage,withChart:!1,withPagination:!1})})]})}}ee.displayName="RelatedIssues";const te=(0,_.Z)("div",{target:"el0d6on1"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,P.Z)(1),";"),ne=(0,_.Z)("div",{target:"el0d6on0"})("margin-bottom:",(0,P.Z)(4),";",K.s_,"{margin-bottom:-",(0,P.Z)(1),";}"),re=ee;var ae=n("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),se=n("../node_modules/color/index.js"),ie=n.n(se),oe=n("./app/components/charts/chartZoom.tsx"),le=n("./app/components/charts/components/markPoint.tsx"),ce=n("./app/components/charts/errorPanel.tsx"),ue=n("./app/components/charts/eventsRequest.tsx"),pe=n("./app/components/charts/lineChart.tsx"),de=n("./app/components/charts/transitionChart.tsx"),me=n("./app/components/charts/transparentLoadingMask.tsx"),ge=n("./app/components/charts/utils.tsx"),he=n("./app/components/placeholder.tsx"),ve=n("./app/components/questionTooltip.tsx"),fe=n("./app/icons/index.tsx"),ye=n("./app/utils/dates.tsx"),xe=n("./app/utils/discover/charts.tsx"),Se=n("./app/utils/formatters.tsx"),Te=n("./app/utils/getDynamicText.tsx"),Ee=n("./app/utils/performance/anomalies/anomaliesQuery.tsx"),we=n("./app/views/performance/data.tsx"),Ze=n("./app/views/performance/landing/widgets/utils.tsx"),_e=n("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx");function Re(e){let{organization:t,isLoading:n,error:r,totals:s,start:o,end:l,utc:c,router:u,statsPeriod:p,chartData:d,eventView:g,location:h,transactionName:v}=e;const f=!t.features.includes("performance-frontend-use-events-endpoint"),y=(0,ae.a)();return(0,J.BX)(Oe,{children:[(0,J.BX)(Ce,{top:"0px",children:[(0,J.BX)(be,{children:[(0,i.t)("Apdex"),(0,J.tZ)(ve.Z,{position:"top",title:(0,we.$r)(t,we.V$.APDEX),size:"sm"})]}),(0,J.tZ)(Ae,{"data-test-id":"apdex-summary-value",isLoading:n,error:r,value:s?(0,Se.$1)(f?s.apdex:s["apdex()"],4):null})]}),(0,J.BX)(Ce,{top:"160px",children:[(0,J.BX)(be,{children:[(0,i.t)("Failure Rate"),(0,J.tZ)(ve.Z,{position:"top",title:(0,we.$r)(t,we.V$.FAILURE_RATE),size:"sm"})]}),(0,J.tZ)(Ae,{"data-test-id":"failure-rate-summary-value",isLoading:n,error:r,value:s?(0,Se.rl)(f?s.failure_rate:s["failure_rate()"]):null})]}),(0,J.BX)(Ce,{top:"320px",children:[(0,J.BX)(be,{children:[(0,i.t)("TPM"),(0,J.tZ)(ve.Z,{position:"top",title:(0,we.$r)(t,we.V$.TPM),size:"sm"})]}),(0,J.tZ)(Ae,{"data-test-id":"tpm-summary-value",isLoading:n,error:r,value:s?(0,i._N)("[tpm] tpm",{tpm:(0,Se.$1)(f?s.tpm:s["tpm()"],4)}):null})]}),(0,J.tZ)(Ee.Z,{location:h,organization:t,eventView:g,children:e=>(0,J.tZ)(oe.Z,{router:u,period:p,start:o,end:l,utc:c,xAxisIndex:[0,1,2],children:n=>{const{errored:r,loading:s,reloading:i,chartOptions:o,series:l}=d;if(r)return(0,J.tZ)(ce.Z,{height:"580px",children:(0,J.tZ)(fe.FC,{color:"gray300",size:"lg"})});if(t.features.includes(_e.uT)){const n=l.find((e=>e.seriesName.includes("epm")||e.seriesName.includes("tpm")));n&&e.data&&(n.markPoint=(0,le.Z)({data:e.data.anomalies.map((e=>{var r;return{name:e.id,yAxis:null===(r=n.data.find((t=>{let{name:n}=t;return n>(e.end+e.start)/2})))||void 0===r?void 0:r.value,xAxis:e.start,itemStyle:{borderColor:ie()((0,_e.ES)(e.confidence,y)).string(),color:ie()((0,_e.ES)(e.confidence,y)).alpha(.2).rgb().string()},onClick:()=>{const e=(0,_e.az)({orgSlug:t.slug,query:h.query,projectID:(0,m.ro)(h.query.project),transaction:v});a.browserHistory.push(e)}}})),symbol:"circle",symbolSize:16}))}return(0,J.BX)(de.Z,{loading:s,reloading:i,height:"580px",children:[(0,J.tZ)(me.Z,{visible:i}),(0,Te.Z)({value:(0,J.tZ)(pe.w,{...n,...o,series:l}),fixed:(0,J.tZ)(he.Z,{height:"480px",testId:"skeleton-ui"})})]})}})})]})}function Ne(e){let{location:t,eventView:n,organization:r,router:a,isLoading:s,error:i,totals:o,transactionName:l}=e;const c=(0,h.Z)(),u=(0,ae.a)(),d=(0,p.Eg)(),m=u.charts.getColorPalette(3),g=n.statsPeriod,v=n.start?(0,ye.hC)(n.start):void 0,f=n.end?(0,ye.hC)(n.end):void 0,y=n.project,x=n.environment,S=n.query,T="true"===(0,L.fK)(t.query).utc,E={scale:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},w={height:480,grid:[{top:"60px",left:"10px",right:"10px",height:"100px"},{top:"220px",left:"10px",right:"10px",height:"100px"},{top:"380px",left:"10px",right:"10px",height:"120px"}],axisPointer:{link:[{xAxisIndex:[0,1,2]}]},xAxes:Array.from(new Array(3)).map(((e,t)=>({gridIndex:t,type:"time",show:!1}))),yAxes:[{gridIndex:0,interval:.2,axisLabel:{formatter:e=>`${(0,Se.$1)(e,1)}`,color:u.chartLabel},...E},{gridIndex:1,splitNumber:4,interval:.5,max:1,axisLabel:{formatter:e=>(0,Se.rl)(e,0),color:u.chartLabel},...E},{gridIndex:2,splitNumber:4,axisLabel:{formatter:Se.Du,color:u.chartLabel},...E}],utc:T,isGroupedByDate:!0,showTimeInTooltip:!0,colors:[m[0],m[1],m[2]],tooltip:{trigger:"axis",truncate:80,valueFormatter:xe.CX,nameFormatter:e=>"epm()"===e?"tpm()":e}},Z={api:c,start:v,end:f,period:g,project:y,environment:x,query:S},_={organization:r,router:a,error:i,isLoading:s,start:v,end:f,utc:T,totals:o},R={start:v||null,end:f||null,period:g};return(0,J.tZ)(ue.Z,{...Z,organization:r,interval:(0,ge.ZS)(R),showLoading:!1,includePrevious:!1,yAxis:["apdex()","failure_rate()","epm()"],partial:!0,referrer:"api.performance.transaction-summary.sidebar-chart",queryExtras:(0,Ze.gM)(d),children:e=>{let{results:r,errored:a,loading:s,reloading:i}=e;const o=r?r.map(((e,t)=>({...e,yAxisIndex:t,xAxisIndex:t}))):[];return(0,J.tZ)(Re,{..._,transactionName:l,location:t,eventView:n,chartData:{series:o,errored:a,loading:s,reloading:i,chartOptions:w}})}})}function Ae(e){let{error:t,isLoading:n,value:r,...a}=e;return t?(0,J.tZ)("div",{...a,children:"—"}):n?(0,J.tZ)(he.Z,{height:"24px",...a}):(0,J.tZ)(Ie,{...a,children:r})}Re.displayName="SidebarCharts",Ne.displayName="SidebarChartsContainer",Ae.displayName="ChartSummaryValue";const Oe=(0,_.Z)("div",{target:"ecri4wp3"})({name:"bjn8wh",styles:"position:relative"}),be=(0,_.Z)(X.OT,{target:"ecri4wp2"})({name:"ti75j2",styles:"margin:0"}),Ce=(0,_.Z)("div",{target:"ecri4wp1"})("position:absolute;top:",(e=>e.top),";z-index:1;"),Ie=(0,_.Z)("div",{target:"ecri4wp0"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";"),qe=(0,a.withRouter)(Ne);function ze(e){let{data:t}=e;const n=t.reduce(((e,t)=>t.value+e),0);return(0,J.tZ)(ke,{children:t.map(((e,t)=>(0,J.BX)(r.Fragment,{children:[(0,J.tZ)(Pe,{children:(0,Se.rl)(e.value/n,0)}),(0,J.BX)(je,{"data-test-id":`status-${e.label}`,cursor:e.onClick?"pointer":"default",onClick:e.onClick,children:[(0,J.tZ)(Fe,{style:{width:`${(e.value/n*100).toFixed(2)}%`}}),(0,J.tZ)(De,{children:e.label})]})]},`${t}:${e.label}`)))})}ze.displayName="BreakdownBars";const Le=ze,ke=(0,_.Z)("div",{target:"e1yzi37b4"})("display:grid;grid-template-columns:min-content auto;column-gap:",(0,P.Z)(1),";row-gap:",(0,P.Z)(1),";"),Pe=(0,_.Z)("div",{target:"e1yzi37b3"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";text-align:right;"),je=(0,_.Z)("div",{target:"e1yzi37b2"})("padding-left:",(0,P.Z)(1),";padding-right:",(0,P.Z)(1),";position:relative;cursor:",(e=>e.cursor),";"),De=(0,_.Z)("span",{target:"e1yzi37b1"})("position:relative;color:",(e=>e.theme.textColor),";z-index:2;font-size:",(e=>e.theme.fontSizeSmall),";"),Fe=(0,_.Z)("div",{target:"e1yzi37b0"})("border-radius:2px;background-color:",(e=>e.theme.border),";position:absolute;top:0;left:0;z-index:1;height:100%;width:0%;");var Ue=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx");function Ve(e){let{eventView:t,location:n,organization:s}=e;const o=s.features.includes("performance-frontend-use-events-endpoint"),c=t.withColumns([{kind:"function",function:["count","","",void 0]},{kind:"field",field:"transaction.status"}]).withSorts([{kind:"desc",field:"count"}]);return(0,J.BX)(r.Fragment,{children:[(0,J.BX)(X.OT,{children:[(0,i.t)("Status Breakdown"),(0,J.tZ)(ve.Z,{position:"top",title:(0,we.$r)(s,we.V$.STATUS_BREAKDOWN),size:"sm"})]}),(0,J.tZ)(l.Z,{eventView:c,location:n,orgSlug:s.slug,referrer:"api.performance.status-breakdown",useEvents:o,children:e=>{let{isLoading:r,error:l,tableData:c}=e;if(r)return(0,J.tZ)(he.Z,{height:"124px"});if(l)return(0,J.tZ)(ce.Z,{height:"124px",children:(0,J.tZ)(fe.FC,{color:"gray300",size:"lg"})});if(!c||0===c.data.length)return(0,J.tZ)(Me,{small:!0,children:(0,i.t)("No statuses found")});const u=c.data.map((e=>({label:String(e["transaction.status"]),value:parseInt(String(e[o?"count()":"count"]),10),onClick:()=>{const r=new g.MY(t.query);r.removeFilter("!transaction.status").setFilterValues("transaction.status",[e["transaction.status"]]),a.browserHistory.push({pathname:n.pathname,query:{...n.query,cursor:void 0,query:r.formatString()}}),(0,Ue.Z)("performance_views.transaction_summary.status_breakdown_click",{organization:s,status:e["transaction.status"]})}})));return(0,J.tZ)(Le,{data:u})}})]})}Ve.displayName="StatusBreakdown";const Me=(0,_.Z)($.Z,{target:"e1ilkz930"})({name:"wwhhbg",styles:"height:124px;padding:50px 15%"}),Be=Ve;var Ge=n("./app/components/pagination.tsx"),Ye=n("./app/utils/performance/suspectSpans/suspectSpansQuery.tsx"),He=n("./app/utils/useProjects.tsx"),Xe=n("./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx"),$e=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),We=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx");function Ke(e){var t;const{location:n,organization:a,eventView:s,totals:i,projectId:o,transactionName:l}=e,c=(0,We.TK)(n,"spanSort"),u=(0,m.ro)(null===(t=n.query)||void 0===t?void 0:t.spansCursor),p=s.withColumns([...Object.values($e.g),...Object.values($e.p)].map((e=>({kind:"field",field:e})))).withSorts([{kind:"desc",field:c.field}]),d=We.uQ[c.field];p.fields=d?d.map((e=>({field:e}))):[];const{projects:g}=(0,He.Z)();return(0,J.tZ)(Ye.Z,{location:n,orgSlug:a.slug,eventView:p,limit:4,perSuspect:0,cursor:u,children:e=>{let{suspectSpans:t,isLoading:s,pageLinks:c}=e;return(0,J.BX)(r.Fragment,{children:[(0,J.tZ)(Qe,{location:n,organization:a,projectId:o,transactionName:l,pageLinks:c}),(0,J.tZ)(Xe.Z,{location:n,organization:a,transactionName:l,project:g.find((e=>e.id===o)),isLoading:s,suspectSpans:null!=t?t:[],totals:i,sort:$e.g.SUM_EXCLUSIVE_TIME})]})}})}function Qe(e){const{location:t,organization:n,projectId:r,transactionName:s,pageLinks:o}=e,l=(0,We.hN)({orgSlug:n.slug,transaction:s,projectID:r,query:t.query});return(0,J.BX)(Je,{children:[(0,J.tZ)(X.OT,{children:(0,i.t)("Suspect Spans")}),(0,J.tZ)(H.ZP,{to:l,size:"xs","data-test-id":"suspect-spans-open-tab",children:(0,i.t)("View All Spans")}),(0,J.tZ)(et,{pageLinks:o,onCursor:(e,t,n)=>{a.browserHistory.push({pathname:t,query:{...n,spansCursor:e}})},size:"xs"})]})}Ke.displayName="SuspectSpans",Qe.displayName="SuspectSpansHeader";const Je=(0,_.Z)("div",{target:"e96e1ws1"})("display:grid;grid-template-columns:1fr auto auto;margin-bottom:",(0,P.Z)(1),";align-items:center;"),et=(0,_.Z)(Ge.Z,{target:"e96e1ws0"})("margin:0 0 0 ",(0,P.Z)(1),";");var tt=n("./app/views/performance/transactionSummary/transactionOverview/tagExplorer.tsx"),nt=n("./app/components/links/link.tsx"),rt=n("./app/components/userMisery.tsx"),at=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),st=n("./app/views/performance/vitalDetail/vitalInfo.tsx");function it(e){let{isLoading:t,hasWebVitals:n,error:a,totals:s,location:o,organization:l,transactionName:c,eventView:p}=e;const d=!l.features.includes("performance-frontend-use-events-endpoint");let g=null!==a?(0,J.tZ)("div",{children:"—"}):(0,J.tZ)(he.Z,{height:"34px"});if(!t&&null===a&&s){const e=s.project_threshold_config[1],t=d?s.count_miserable_user:s["count_miserable_user()"],n=d?s.user_misery:s["user_misery()"],r=d?s.count_unique_user:s["count_unique_user()"];g=(0,J.tZ)(rt.Z,{bars:40,barHeight:30,userMisery:n,miseryLimit:e,totalUsers:r,miserableUsers:t})}const h=l.slug,v=(0,at.Pl)({orgSlug:h,transaction:c,projectID:(0,m.ro)(o.query.project),query:o.query});return(0,J.BX)(r.Fragment,{children:[n&&(0,J.BX)(r.Fragment,{children:[(0,J.BX)(ot,{children:[(0,J.BX)(X.OT,{children:[(0,i.t)("Web Vitals"),(0,J.tZ)(ve.Z,{position:"top",title:(0,i.t)('Web Vitals with p75 better than the "poor" threshold, as defined by Google Web Vitals.'),size:"sm"})]}),(0,J.tZ)(nt.Z,{to:v,children:(0,J.tZ)(fe.V$,{})})]}),(0,J.tZ)(st.Z,{location:o,vital:[u.Zl.FCP,u.Zl.LCP,u.Zl.FID,u.Zl.CLS],orgSlug:h,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,project:p.project,hideVitalThresholds:!0,hideDurationDetail:!0}),(0,J.tZ)(U.uI,{})]}),(0,J.BX)(X.OT,{children:[(0,i.t)("User Misery"),(0,J.tZ)(ve.Z,{position:"top",title:(0,we.$r)(l,we.V$.USER_MISERY),size:"sm"})]}),g,(0,J.tZ)(U.uI,{})]})}it.displayName="UserStats";const ot=(0,_.Z)("div",{target:"e11vlg4d0"})({name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}),lt=it;function ct(e){var t;let{eventView:n,location:s,totalValues:l,spanOperationBreakdownFilter:c,organization:p,projects:d,isLoading:g,error:h,projectId:v,transactionName:f,onChangeFilter:y}=e;const T=!p.features.includes("performance-frontend-use-events-endpoint"),E=p.features.includes("performance-chart-interpolation"),Z=(0,m.ro)(s.query.query,""),_=null===l?null:T?l.count:l["count()"],R=(0,x.Ik)(n,d)||null!==l&&w.PE.some((e=>e.vitals.some((e=>{const t=`percentile(${e},${w.GW})`,n=T?(0,u.LY)(t):t;return Number.isFinite(l[n])})))),I=(0,x.iL)(n,d),P=[(0,i.t)("event id"),(0,i.t)("user"),(0,i.t)("total duration"),(0,i.t)("trace id"),(0,i.t)("timestamp")];let B=n.clone();if(p.features.includes("performance-ops-breakdown")){const e=(0,S.Is)(c,s);e&&(n=n.clone(),n.query=`${n.query} ${e}`.trim(),B=n.clone());const t=c===S.f1.None?(0,i.t)("operation duration"):`${c} duration`;P.splice(2,0,t);let r=u.zD;c!==S.f1.None&&(r=(0,S.T$)(c));const a=[...B.fields];a.splice(2,0,{field:r}),c===S.f1.None&&a.push(...u.$4.map((e=>({field:e})))),B.fields=a}const G={generatePerformanceTransactionEventsView:()=>{const e=function(e,t){var n;const{selected:r}=ut(s,{p95:null!==(n=T?null==l?void 0:l.p95:null==l?void 0:l["p95()"])&&void 0!==n?n:0,spanOperationBreakdownFilter:c}),a=e.withSorts([r.sort]);if(c===S.f1.None){const e=[...a.fields.slice(0,t.length)];a.fields=e.filter((e=>{let{field:t}=e;return!(0,u.sU)(t)}))}return a}(B,P);return e.query=Z,e},handleOpenAllEventsClick:function(){(0,o.ec)({eventKey:"performance_views.summary.view_in_transaction_events",eventName:"Performance Views: View in All Events from Transaction Summary",organization_id:parseInt(p.id,10)})}};return(0,J.BX)(r.Fragment,{children:[(0,J.BX)(q.or,{children:[(0,J.BX)(pt,{children:[(0,J.tZ)(S.ZP,{organization:p,currentFilter:c,onChangeFilter:y}),(0,J.BX)(z.Z,{condensed:!0,children:[(0,J.tZ)(C.Z,{}),(0,J.tZ)(O.Z,{alignDropdown:"left"})]}),(0,J.tZ)(dt,{searchSource:"transaction_summary",organization:p,projectIds:n.project,query:Z,fields:n.fields,onSearch:function(e){const t=(0,L.fK)({...s.query||{},query:e}),n=N()(t,"cursor");a.browserHistory.push({pathname:s.pathname,query:n})},maxQueryLength:k.dI}),(0,J.tZ)(V.n,{})]}),(0,J.tZ)(M.Z,{organization:p,location:s,eventView:n,totalValues:_,currentFilter:c,withoutZerofill:E}),(0,J.tZ)(b.Z,{location:s,organization:p,eventView:B,...G,showTransactions:(0,m.ro)(s.query.showTransactions,U.K0.SLOW),breakdown:(0,S.q0)(s),titles:P,handleDropdownChange:function(e){const t={pathname:s.pathname,query:{...s.query,showTransactions:e,transactionCursor:void 0}};a.browserHistory.push(t)},generateLink:{id:(0,U.vd)(f),trace:(0,U.Z6)(n.normalizeDateSelection(s))},handleCellAction:function(e){return(t,r)=>{const i=(0,U.xf)(n.query);(0,D.rh)(i,t,e,r),a.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:i.formatString()}})}},...ut(s,{p95:null!==(t=T?null==l?void 0:l.p95:null==l?void 0:l["p95()"])&&void 0!==t?t:0,spanOperationBreakdownFilter:c}),forceLoading:g}),(0,J.tZ)(A.Z,{requireAll:!1,features:["organizations:performance-suspect-spans-view"],children:(0,J.tZ)(Ke,{location:s,organization:p,eventView:n,totals:(0,j.ri)(null==l?void 0:l["count()"])?{"count()":l["count()"]}:null,projectId:v,transactionName:f})}),(0,J.tZ)(tt.D_,{eventView:n,organization:p,location:s,projects:d,transactionName:f,currentFilter:c}),(0,J.tZ)(re,{organization:p,location:s,transaction:f,start:n.start,end:n.end,statsPeriod:n.statsPeriod})]}),(0,J.BX)(q.MF,{children:[(0,J.tZ)(lt,{organization:p,location:s,isLoading:g,hasWebVitals:R,error:h,totals:l,transactionName:f,eventView:n}),!I&&(0,J.tZ)(Be,{eventView:n,organization:p,location:s}),(0,J.tZ)(U.uI,{}),(0,J.tZ)(qe,{organization:p,isLoading:g,error:h,totals:l,eventView:n,transactionName:f}),(0,J.tZ)(U.uI,{}),(0,J.tZ)(F.Z,{generateUrl:function(e,t){const n=(0,j.ZT)(s.query,{key:(0,u.ZC)(e),value:t});return{...s,query:n}},totalValues:_,eventView:n,organization:p,location:s})]})]})}function ut(e,t){const n=function(e){let{p95:t,spanOperationBreakdownFilter:n}=e;if(n===S.f1.None)return[{sort:{kind:"asc",field:"transaction.duration"},value:U.K0.FASTEST,label:(0,i.t)("Fastest Transactions")},{query:[["transaction.duration",`<=${t.toFixed(0)}`]],sort:{kind:"desc",field:"transaction.duration"},value:U.K0.SLOW,label:(0,i.t)("Slow Transactions (p95)")},{sort:{kind:"desc",field:"transaction.duration"},value:U.K0.OUTLIER,label:(0,i.t)("Outlier Transactions (p100)")},{sort:{kind:"desc",field:"timestamp"},value:U.K0.RECENT,label:(0,i.t)("Recent Transactions")}];const r=(0,S.T$)(n),a=n;return[{sort:{kind:"asc",field:r},value:U.K0.FASTEST,label:(0,i.t)("Fastest %s Operations",a)},{query:[["transaction.duration",`<=${t.toFixed(0)}`]],sort:{kind:"desc",field:r},value:U.K0.SLOW,label:(0,i.t)("Slow %s Operations (p95)",a)},{sort:{kind:"desc",field:r},value:U.K0.OUTLIER,label:(0,i.t)("Outlier %s Operations (p100)",a)},{sort:{kind:"desc",field:"timestamp"},value:U.K0.RECENT,label:(0,i.t)("Recent Transactions")}]}(t),r=(0,m.ro)(e.query.showTransactions,U.K0.SLOW);return{selected:n.find((e=>e.value===r))||n[0],options:n}}ct.displayName="SummaryContent";const pt=(0,_.Z)("div",{target:"ent1li1"})("display:grid;gap:",(0,P.Z)(2),";margin-bottom:",(0,P.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(2, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto auto 1fr;}"),dt=(0,_.Z)(I.Z,{target:"ent1li0"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/4;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),mt=(0,y.Z)(ct);function gt(e){const t=(0,h.Z)(),{location:n,selection:a,organization:i,projects:o}=e;return(0,r.useEffect)((()=>{(0,s.QK)(t,i.slug,a),(0,x.n4)(a)}),[a,i.slug,t]),(0,J.tZ)(p.kP,{children:(0,J.tZ)(T.ZP,{location:n,organization:i,projects:o,tab:E.Z.TransactionSummary,getDocumentTitle:vt,generateEventView:ft,childComponent:ht})})}function ht(e){const{location:t,organization:n,eventView:r,projectId:s,transactionName:i,transactionThreshold:c,transactionThresholdMetric:u}=e,p=n.features.includes("performance-frontend-use-events-endpoint"),m=(0,S.q0)(t),g=function(e,t){const n=w.PE.map((e=>{let{vitals:t}=e;return t})).reduce(((e,t)=>(t.forEach((t=>e.push(t))),e)),[]);return t.withColumns([{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["count","",void 0,void 0]},{kind:"function",function:["count_unique","user",void 0,void 0]},{kind:"function",function:["failure_rate","",void 0,void 0]},{kind:"function",function:["tpm","",void 0,void 0]},{kind:"function",function:["count_miserable","user",void 0,void 0]},{kind:"function",function:["user_misery","",void 0,void 0]},{kind:"function",function:["apdex","",void 0,void 0]},...n.map((e=>({kind:"function",function:["percentile",e,w.GW.toString(),void 0]})))])}(0,r),h=e=>{(0,o.ec)({eventName:"Performance Views: Filter Dropdown",eventKey:"performance_views.filter_dropdown.selection",organization_id:parseInt(n.id,10),action:e});const r={...(0,d.V)(t,[Z.Oo,Z.mo]),...(0,S.bz)(e)};e===S.f1.None&&delete r.breakdown,a.browserHistory.push({pathname:t.pathname,query:r})};return(0,J.tZ)(l.Z,{eventView:g,orgSlug:n.slug,location:t,transactionThreshold:c,transactionThresholdMetric:u,referrer:"api.performance.transaction-summary",useEvents:p,children:e=>{var a,o;let{isLoading:l,error:c,tableData:u}=e;const p=null!==(a=null==u||null===(o=u.data)||void 0===o?void 0:o[0])&&void 0!==a?a:null;return(0,J.tZ)(mt,{location:t,organization:n,eventView:r,projectId:s,transactionName:i,isLoading:l,error:c,totalValues:p,onChangeFilter:h,spanOperationBreakdownFilter:m})}})}function vt(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,i.t)("Performance")].join(" - "):[(0,i.t)("Summary"),(0,i.t)("Performance")].join(" - ")}function ft(e){let{location:t,transactionName:n}=e;const r=(0,m.ro)(t.query.query,""),a=new g.MY(r);return a.setFilterValues("event.type",["transaction"]),a.setFilterValues("transaction",[n]),Object.keys(a.filters).forEach((e=>{(0,u.h1)(e)&&a.removeFilter(e)})),c.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:["id","user.display","transaction.duration","trace","timestamp"],query:a.formatString(),projects:[]},t)}gt.displayName="TransactionOverview",ht.displayName="OverviewContentWrapper";const yt=(0,f.Z)((0,y.Z)((0,v.Z)(gt)))},"./app/views/performance/transactionSummary/transactionOverview/metricEvents/metricsEventsDropdown.tsx":(e,t,n)=>{n.d(t,{n:()=>c});var r=n("./app/components/acl/feature.tsx"),a=n("./app/components/forms/compactSelect.tsx"),s=n("./app/locale.tsx"),i=n("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l={[i.nl.unset]:(0,s.t)("Auto"),[i.nl.metrics]:(0,s.t)("Auto (ingested)"),[i.nl.transactions]:(0,s.t)("Auto (stored)")};function c(){return(0,o.tZ)(r.Z,{features:["performance-use-metrics"],children:(0,o.tZ)(u,{})})}function u(){const e=(0,i.Eg)(),t=function(e){const t=l[e.autoSampleState],n=(0,s.t)("Sample");return[{value:i.oR.auto,prefix:n,label:t},{value:i.oR.metricsOnly,prefix:n,label:(0,s.t)("Ingested only")},{value:i.oR.transactionsOnly,prefix:n,label:(0,s.t)("Stored only")}]}(e),n=t.find((t=>{let{value:n}=t;return n===e.metricSettingState}))||t[0];return(0,o.tZ)(a.Z,{triggerProps:{prefix:n.prefix},value:n.value,options:t,onChange:t=>e.setMetricSettingState(t.value)})}c.displayName="MetricsEventsDropdown",u.displayName="InnerDropdown"},"./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx":(e,t,n)=>{function r(e){let{orgSlug:t,transaction:n,query:r,spanSlug:a,projectID:s}=e;const i=function(e){let{orgSlug:t,spanSlug:n}=e;return`/organizations/${t}/performance/summary/spans/${encodeURIComponent(n.op)}:${n.group}/`}({orgSlug:t,spanSlug:a});return{pathname:i,query:{transaction:n,project:s,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query}}}let a;n.d(t,{BP:()=>r,wL:()=>a}),function(e){e.MIN="min",e.MAX="max"}(a||(a={}))},"./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx":(e,t,n)=>{n.d(t,{Z:()=>g});var r=n("./app/components/gridEditable/index.tsx"),a=n("./app/components/gridEditable/sortLink.tsx"),s=n("./app/components/links/link.tsx"),i=n("./app/locale.tsx"),o=n("./app/utils.tsx"),l=n("./app/utils/discover/fieldRenderers.tsx"),c=n("./app/utils/discover/fields.tsx"),u=n("./app/utils/discover/styles.tsx"),p=n("./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx"),d=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),m=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){const{location:t,organization:n,transactionName:a,isLoading:s,suspectSpans:i,totals:l,sort:c,project:u}=e,p=i.map((e=>({operation:e.op,group:e.group,description:e.description,totalCount:e.count,frequency:(0,o.ri)(e.frequency)&&(0,o.ri)(null==l?void 0:l["count()"])?Math.min(1,e.frequency/l["count()"]):null,avgOccurrences:e.avgOccurrences,p50ExclusiveTime:e.p50ExclusiveTime,p75ExclusiveTime:e.p75ExclusiveTime,p95ExclusiveTime:e.p95ExclusiveTime,p99ExclusiveTime:e.p99ExclusiveTime,sumExclusiveTime:e.sumExclusiveTime})));return(0,m.tZ)(r.ZP,{isLoading:s,data:p,columnOrder:f[c].map((e=>y[e])),columnSortBy:[],grid:{renderHeadCell:h,renderBodyCell:v(t,n,a,u)},location:t})}function h(e,t){const n=(0,c.qG)(e.key,x[e.key]);return(0,m.tZ)(a.Z,{title:e.name,align:n,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function v(e,t,n,r){return(a,o)=>{const c=(0,l.Js)(a.key,x);if("description"===a.key){var d;const l=(0,p.BP)({orgSlug:t.slug,transaction:n,query:e.query,spanSlug:{op:o.operation,group:o.group},projectID:null==r?void 0:r.id});return(0,m.tZ)(u.W2,{children:(0,m.tZ)(s.Z,{to:l,children:null!==(d=o[a.key])&&void 0!==d?d:(0,i.t)("(unnamed span)")})})}return c(o,{location:e,organization:t})}}g.displayName="SuspectSpansTable",h.displayName="renderHeadCell";const f={[d.g.COUNT]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.g.AVG_OCCURRENCE]:["operation","description","avgOccurrences","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.g.SUM_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.p.P50_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p50ExclusiveTime","sumExclusiveTime"],[d.p.P75_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.p.P95_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p95ExclusiveTime","sumExclusiveTime"],[d.p.P99_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p99ExclusiveTime","sumExclusiveTime"]},y={operation:{key:"operation",name:(0,i.t)("Span Operation"),width:r.z7},description:{key:"description",name:(0,i.t)("Span Name"),width:r.z7},totalCount:{key:"totalCount",name:(0,i.t)("Total Count"),width:r.z7},frequency:{key:"frequency",name:(0,i.t)("Frequency"),width:r.z7},avgOccurrences:{key:"avgOccurrences",name:(0,i.t)("Average Occurrences"),width:r.z7},p50ExclusiveTime:{key:"p50ExclusiveTime",name:(0,i.t)("P50 Self Time"),width:r.z7},p75ExclusiveTime:{key:"p75ExclusiveTime",name:(0,i.t)("P75 Self Time"),width:r.z7},p95ExclusiveTime:{key:"p95ExclusiveTime",name:(0,i.t)("P95 Self Time"),width:r.z7},p99ExclusiveTime:{key:"p99ExclusiveTime",name:(0,i.t)("P99 Self Time"),width:r.z7},sumExclusiveTime:{key:"sumExclusiveTime",name:(0,i.t)("Total Self Time"),width:r.z7}},x={operation:"string",description:"string",totalCount:"integer",frequency:"percentage",avgOccurrences:"number",p50ExclusiveTime:"duration",p75ExclusiveTime:"duration",p95ExclusiveTime:"duration",p99ExclusiveTime:"duration",sumExclusiveTime:"duration"}},"./app/views/performance/transactionSummary/transactionVitals/constants.tsx":(e,t,n)=>{n.d(t,{GW:()=>o,PE:()=>u,QB:()=>p,sE:()=>i}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("./app/utils/discover/fields.tsx"),a=n("./app/utils/performance/vitals/constants.tsx"),s=n("./app/utils/theme.tsx");const i=100,o=.75,l=[{vitals:[r.Zl.FP,r.Zl.FCP,r.Zl.LCP],min:0},{vitals:[r.Zl.FID],min:0,precision:2},{vitals:[r.Zl.CLS],min:0,precision:2}],c=[...s.ZP.charts.getColorPalette(l.reduce(((e,t)=>{let{vitals:n}=t;return e+n.length}),0)-1)].reverse(),u=l.map((e=>({...e,colors:c.splice(0,e.vitals.length)}))),p=l.reduce(((e,t)=>{let{vitals:n}=t;return n.forEach((t=>{const n=a.r9[t].slug;e.push(`${n}Start`),e.push(`${n}End`)})),e}),[])},"./app/views/performance/vitalDetail/vitalInfo.tsx":(e,t,n)=>{n.d(t,{Z:()=>o});var r=n("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),a=n("./app/views/performance/landing/vitalsCards.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{vital:t,location:n,isLoading:i,hideBar:o,hideStates:l,hideVitalPercentNames:c,hideVitalThresholds:u,hideDurationDetail:p}=e;const d=Array.isArray(t)?t:[t],m={vital:t,showBar:!o,showStates:!l,showVitalPercentNames:!c,showVitalThresholds:!u,showDurationDetail:!p};return(0,s.tZ)(r.Z,{location:n,vitals:d,children:e=>{let{isLoading:t,vitalsData:n}=e;return(0,s.tZ)(a.JO,{...m,isLoading:i||t,data:n})}})}i.displayName="VitalInfo";const o=i}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_rules_metric_constants_tsx-app_views_alerts_wizard_options_tsx-app_views_per-524918.b1e2b65bb26f680ba4fc7be405d55980.js.map