(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_releases_list_index_tsx-node_modules_lodash_mean_js-node_modules_lodash_omitBy_js","node_modules_lodash_mean_js"],{"./app/components/charts/chartZoom.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>Z});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("../node_modules/moment/moment.js"),i=s.n(n),a=s("../node_modules/query-string/index.js"),l=s("./app/actionCreators/pageFilters.tsx"),d=s("./app/components/charts/components/dataZoomInside.tsx");s("../node_modules/echarts/lib/component/dataZoomSlider.js");const p={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function c(e){return e&&Array.isArray(e)?e:[{...p,...e}]}var h=s("./app/components/charts/components/toolBox.tsx"),u=s("./app/utils/callIfFunction.tsx"),m=s("./app/utils/dates.tsx");const g=e=>e?i().utc(e).format(i().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class y extends r.Component{constructor(e){var t;super(e),t=this,(0,o.Z)(this,"history",void 0),(0,o.Z)(this,"currentPeriod",void 0),(0,o.Z)(this,"zooming",null),(0,o.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:g(e.start),end:g(e.end)}})),(0,o.Z)(this,"setPeriod",(function(e){let{period:s,start:o,end:r}=e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:i,onZoom:d,usePageDate:p}=t.props,c=g(o),h=g(r);n&&t.history.push(t.currentPeriod),(0,u.g)(d,{period:s,start:c,end:h}),t.zooming=()=>{if(p&&i){const e={...i.location.query,pageStart:o?(0,m.v5)(o):void 0,pageEnd:r?(0,m.v5)(r):void 0,pageStatsPeriod:null!=s?s:void 0};a.stringify(e)!==a.stringify(i.location.query)&&i.push({pathname:i.location.pathname,query:e})}else(0,l.dR)({period:s,start:c?(0,m.hC)(c):c,end:h?(0,m.hC)(h):h},i);t.saveCurrentPeriod({period:s,start:o,end:r})}})),(0,o.Z)(this,"handleChartReady",(e=>{(0,u.g)(this.props.onChartReady,e)})),(0,o.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],(0,u.g)(this.props.onRestore,e,t))})),(0,o.Z)(this,"handleDataZoom",((e,t)=>{const s=t.getModel(),{startValue:o,endValue:r}=s._payload.batch[0];if(null===o&&null===r){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=i().utc(o),t=i().utc(r);this.setPeriod({period:null,start:e,end:t},!0)}(0,u.g)(this.props.onDataZoom,e,t)})),(0,o.Z)(this,"handleChartFinished",((e,t)=>{var s;"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const o=null===(s=t._componentsViews)||void 0===s?void 0:s.find((e=>e._features&&e._features.dataZoom));o&&!o._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,u.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:s,disabled:o,children:r,xAxisIndex:n,router:i,onZoom:a,onRestore:l,onChartReady:p,onDataZoom:u,onFinished:g,showSlider:y,chartZoomOptions:Z,...v}=this.props,S=null!=e?e:void 0,x=t?(0,m.hC)(t):void 0,f=s?(0,m.hC)(s):void 0;return r(o?{utc:S,start:x,end:f,...v}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:S,start:x,end:f,dataZoom:y?[...c({xAxisIndex:n,...Z}),...(0,d.Z)({xAxisIndex:n,...Z})]:(0,d.Z)({xAxisIndex:n,...Z}),showTimeInTooltip:!0,toolBox:(0,h.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...v})}}y.displayName="ChartZoom";const Z=y},"./app/components/charts/components/dataZoomInside.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r}),s("../node_modules/echarts/lib/component/dataZoomInside.js");const o={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function r(e){return e&&Array.isArray(e)?e:[{...o,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,s)=>{"use strict";function o(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function r(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:o(t),...e}}s.d(t,{Z:()=>r})},"./app/components/charts/lineChart.tsx":(e,t,s)=>{"use strict";s.d(t,{w:()=>i});var o=s("./app/components/charts/series/lineSeries.tsx"),r=s("./app/components/charts/baseChart.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{series:t,seriesOptions:s,...i}=e;return(0,n.tZ)(r.Z,{...i,series:t.map((e=>{let{seriesName:t,data:r,dataArray:n,...i}=e;return(0,o.Z)({...s,...i,name:t,data:n||(null==r?void 0:r.map((e=>{let{value:t,name:s}=e;return[s,t]}))),animation:!1,animationThreshold:1,animationDuration:0})}))})}i.displayName="LineChart"},"./app/components/charts/loadingPanel.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/loadingMask.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,o.Z)((e=>{let{height:t,...s}=e;return(0,n.tZ)("div",{...s,children:(0,n.tZ)(r.Z,{})})}),{target:"eumb2md0"})("flex:1;flex-shrink:0;overflow:hidden;height:",(e=>e.height),";position:relative;border-color:transparent;margin-bottom:0;");i.defaultProps={height:"200px"};const a=i},"./app/components/charts/transitionChart.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("./app/components/charts/loadingPanel.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends r.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{prevReloading:this.props.reloading,prevLoading:this.props.loading,key:1})}static getDerivedStateFromProps(e,t){const s=t.prevReloading,o=e.reloading,r=t.prevLoading,n=e.loading;return r!==n?{prevReloading:o,prevLoading:n,key:t.key+1}:n?{prevReloading:o,prevLoading:n,key:t.key}:s&&!o?{prevReloading:o,prevLoading:n,key:t.key+1}:{prevReloading:o,prevLoading:n,key:t.key}}render(){const{height:e,loading:t,reloading:s}=this.props;return t&&!s?(0,i.tZ)(n.Z,{height:e,"data-test-id":"events-request-loading"}):(0,i.tZ)(r.Fragment,{children:this.props.children},String(this.state.key))}}a.displayName="TransitionChart",(0,o.Z)(a,"defaultProps",{height:"200px"});const l=a},"./app/components/charts/transparentLoadingMask.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/loadingMask.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,o.Z)((e=>{let{className:t,visible:s,children:o,...i}=e;const a=s?{...i,"data-test-id":"loading-placeholder"}:i;return(0,n.tZ)(r.Z,{className:t,...a,children:o})}),{target:"ewtkxp50"})((e=>!e.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/components/loadingMask.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const o=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1dnwgq10"})("background-color:",(e=>e.theme.backgroundSecondary),";border-radius:",(e=>e.theme.borderRadius),";position:absolute;top:0;bottom:0;left:0;right:0;")},"./app/components/notAvailable.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/tooltip.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{tooltip:t,className:s}=e;return(0,n.tZ)(r.Z,{title:t,skipWrapper:!0,disabled:void 0===t,children:(0,n.tZ)(a,{className:s,children:"â€”"})})}i.displayName="NotAvailable";const a=(0,o.Z)("div",{target:"e1ickyb10"})("color:",(e=>e.theme.gray200),";"),l=i},"./app/utils/routeTitle.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const o=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0;const r=`${e} - ${t}`,n=o?`${r} - ${o}`:r;return s?`${n} - Sentry`:n}},"./app/views/asyncView.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var o=s("./app/components/asyncComponent.tsx"),r=s("./app/components/sentryDocumentTitle.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends o.Z{getTitle(){return""}render(){return(0,n.tZ)(r.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/releases/detail/overview/releaseArchivedNotice.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("./app/components/alert.tsx"),i=s("./app/components/button.tsx"),a=s("./app/locale.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{onRestore:t,multi:s}=e;return(0,l.BX)(n.Z,{type:"warning",children:[s?(0,a.t)("These releases have been archived."):(0,a.t)("This release has been archived."),!s&&t&&(0,l.BX)(r.Fragment,{children:[" ",(0,l.tZ)(p,{size:"zero",priority:"link",onClick:t,children:(0,a.t)("Restore this release")})]})]})}d.displayName="ReleaseArchivedNotice";const p=(0,o.Z)(i.ZP,{target:"ed64kpf0"})("font-size:inherit;text-decoration:underline;&,&:hover,&:focus,&:active{color:",(e=>e.theme.textColor),";}"),c=d},"./app/views/releases/list/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ts});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-lazyload/lib/index.js"),a=s("../node_modules/lodash/pick.js"),l=s.n(a),d=s("./app/actionCreators/tags.tsx"),p=s("./app/components/alert.tsx"),c=s("./app/components/assistant/guideAnchor.tsx"),h=s("./app/components/datePageFilter.tsx"),u=s("./app/components/environmentPageFilter.tsx"),m=s("./app/components/links/externalLink.tsx"),g=s("./app/components/loadingIndicator.tsx"),y=s("./app/components/noProjectMessage.tsx"),Z=s("./app/components/organizations/pageFilterBar.tsx"),v=s("./app/components/organizations/pageFilters/container.tsx"),S=s("./app/components/organizations/timeRangeSelector/utils.tsx"),x=s("./app/components/pageHeading.tsx"),f=s("./app/components/pagination.tsx"),b=s("./app/components/panels/index.tsx"),j=s("./app/components/projectPageFilter.tsx"),R=s("./app/components/smartSearchBar/index.tsx"),C=s("./app/components/smartSearchBar/types.tsx"),w=s("./app/constants/index.tsx"),_=s("./app/constants/pageFilters.tsx"),P=s("./app/data/platformCategories.tsx"),k=s("./app/icons/index.tsx"),B=s("./app/locale.tsx"),I=s("./app/stores/projectsStore.tsx"),E=s("./app/styles/organization.tsx"),z=s("./app/styles/space.tsx"),A=s("./app/types/index.tsx"),T=s("./app/utils/analytics.tsx"),N=s("./app/utils/discover/fields.tsx"),O=s("./app/utils/projects.tsx"),D=s("./app/utils/routeTitle.tsx"),q=s("./app/utils/withOrganization.tsx"),H=s("./app/utils/withPageFilters.tsx"),U=s("./app/utils/withProjects.tsx"),F=s("./app/views/asyncView.tsx"),$=s("./app/views/settings/components/emptyMessage.tsx"),L=s("./app/views/releases/detail/overview/releaseArchivedNotice.tsx"),V=s("./app/views/releases/utils/index.tsx"),M=s("../node_modules/color/index.js"),X=s.n(M),Q=s("../node_modules/lodash/partition.js"),Y=s.n(Q),G=s("./app/components/button.tsx"),W=s("./app/components/collapsible.tsx"),J=s("./app/components/globalSelectionLink.tsx"),K=s("./app/components/textOverflow.tsx"),ee=s("./app/components/timeSince.tsx"),te=s("./app/components/tooltip.tsx"),se=s("./app/components/version.tsx"),oe=s("./app/components/avatar/avatarList.tsx"),re=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const ne=e=>{let{release:t,withHeading:s=!0}=e;const o=t.commitCount||0,r=t.authors&&t.authors.length||0;if(0===o)return null;const n=[(0,B.tn)("%s commit","%s commits",o),(0,B.t)("by"),(0,B.tn)("%s author","%s authors",r)].join(" ");return(0,re.BX)("div",{className:"release-stats",children:[s&&(0,re.tZ)(ie,{children:n}),(0,re.tZ)("span",{style:{display:"inline-block"},children:(0,re.tZ)(oe.Z,{users:t.authors,avatarSize:25,typeMembers:"authors"})})]})};ne.displayName="ReleaseCardCommits";const ie=(0,r.Z)("div",{target:"e18hpm4o0"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeSmall),";line-height:1.2;font-weight:600;text-transform:uppercase;margin-bottom:",(0,z.Z)(.5),";"),ae=ne;var le=s("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),de=s("./app/components/charts/miniBarChart.tsx"),pe=s("./app/components/count.tsx"),ce=s("./app/components/idBadge/projectBadge.tsx"),he=s("./app/components/links/link.tsx"),ue=s("./app/components/notAvailable.tsx"),me=s("./app/components/organizations/pageFilters/utils.tsx"),ge=s("./app/components/placeholder.tsx"),ye=s("./app/components/tag.tsx"),Ze=s("./app/utils.tsx"),ve=s("./app/components/forms/compactSelect.tsx");const Se=e=>{let{label:t,options:s,selected:o,onSelect:r}=e;const n=Object.entries(s).map((e=>{let[t,{label:s,tooltip:o,disabled:r}]=e;return{value:t,label:s,tooltip:o,isDisabled:r}}));return(0,re.tZ)(ve.Z,{options:n,onChange:e=>r(e.value),value:o,triggerProps:{prefix:t,style:{width:"100%"}}})};Se.displayName="ReleasesDropdown";const xe=Se;let fe;!function(e){e.USERS="users",e.SESSIONS="sessions"}(fe||(fe={}));const be={[fe.SESSIONS]:{label:(0,B.t)("Sessions")},[fe.USERS]:{label:(0,B.t)("Users")}};function je(e){let{selected:t,onSelect:s}=e;return(0,re.tZ)(Ce,{label:(0,B.t)("Display"),options:be,selected:t,onSelect:s})}je.displayName="ReleasesDisplayOptions";const Re=je,Ce=(0,r.Z)(xe,{target:"e1j1105m0"})("z-index:1;@media (max-width: ",(e=>e.theme.breakpoints.large),"){order:3;}");function we(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sm";return e<98?(0,re.tZ)(k.zC,{color:"red300",size:t}):e<99.5?(0,re.tZ)(k.FC,{color:"yellow300",size:t}):(0,re.tZ)(k.DL,{isCircled:!0,color:"green300",size:t})}function _e(e){let{index:t,project:s,organization:o,location:r,getHealthData:n,releaseVersion:a,activeDisplay:l,showPlaceholders:d,showReleaseAdoptionStages:p,isTopRelease:h,adoptionStages:u}=e;const m=(0,le.a)(),{id:g,newGroups:y}=s,Z=n.getCrashCount(a,g,fe.SESSIONS),v=n.getCrashFreeRate(a,g,l),S=n.get24hCountByProject(g,l),x=n.getTimeSeries(a,g,l),f=n.getAdoption(a,g,l),b=p&&(null==u?void 0:u[s.slug])&&(null==u?void 0:u[s.slug].stage),j=Boolean(S&&b&&(0,V.Jl)(s.platform))&&V.EB[b];return(0,re.tZ)(ke,{"data-test-id":"release-card-project-row",children:(0,re.BX)(Je,{showReleaseAdoptionStages:p,children:[(0,re.tZ)(Ke,{children:(0,re.tZ)(ce.Z,{project:s,avatarSize:16})}),p&&(0,re.tZ)(st,{children:j?(0,re.tZ)(te.Z,{title:j.tooltipTitle,isHoverable:!0,children:(0,re.tZ)(he.Z,{to:{pathname:`/organizations/${o.slug}/releases/`,query:{...r.query,query:`release.stage:${b}`}},children:(0,re.tZ)(ye.Z,{type:j.type,children:j.name})})}):(0,re.tZ)(ue.Z,{})}),(0,re.tZ)(tt,{children:d?(0,re.tZ)(Be,{width:"100px"}):(0,re.BX)(Ie,{children:[(0,re.BX)("span",{children:[f?Math.round(f):"0","%"]}),(0,re.tZ)(i.ZP,{debounce:50,height:20,children:(0,re.tZ)(de.Z,{series:x,height:20,isGroupedByDate:!0,showTimeInTooltip:!0,hideDelay:50,tooltipFormatter:e=>{const t=l===fe.USERS?(0,B.tn)("user","users",e):(0,B.tn)("session","sessions",e);return`${e.toLocaleString()} ${t}`},colors:[m.purple300,m.gray200]})})]})}),(0,re.tZ)(ot,{children:d?(0,re.tZ)(Be,{width:"60px"}):(0,Ze.ri)(v)?(0,re.BX)(Ee,{children:[we(v),(0,V.zB)(v)]}):(0,re.tZ)(ue.Z,{})}),(0,re.tZ)(rt,{children:d?(0,re.tZ)(Be,{width:"30px"}):(0,Ze.ri)(Z)?(0,re.tZ)(te.Z,{title:(0,B.t)("Open in Issues"),children:(0,re.tZ)(J.Z,{to:(0,V.eY)(o.slug,s.id,a),children:(0,re.tZ)(pe.Z,{value:Z})})}):(0,re.tZ)(ue.Z,{})}),(0,re.tZ)(et,{children:(0,re.tZ)(te.Z,{title:(0,B.t)("Open in Issues"),children:(0,re.tZ)(J.Z,{to:(0,V.PS)(o.slug,s.id,a),children:(0,re.tZ)(pe.Z,{value:y||0})})})}),(0,re.tZ)(ze,{children:(0,re.tZ)(c.Z,{disabled:!h||0!==t,target:"view_release",children:(0,re.tZ)(G.ZP,{size:"xs",to:{pathname:`/organizations/${o.slug}/releases/${encodeURIComponent(a)}/`,query:{...(0,me.GN)(r.query),project:s.id,yAxis:void 0}},children:(0,B.t)("View")})})})]})})}we.displayName="getCrashFreeIcon",_e.displayName="ReleaseCardProjectRow";const Pe=_e,ke=(0,r.Z)(b.Lv,{target:"e6r8bj84"})("padding:",(0,z.Z)(1)," ",(0,z.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){font-size:",(e=>e.theme.fontSizeMedium),";}"),Be=(0,r.Z)(ge.Z,{target:"e6r8bj83"})("height:15px;display:inline-block;position:relative;top:",(0,z.Z)(.25),";"),Ie=(0,r.Z)("span",{target:"e6r8bj82"})("flex:1;display:inline-grid;grid-template-columns:30px 1fr;gap:",(0,z.Z)(1),";align-items:center;overflow:visible;"),Ee=(0,r.Z)("div",{target:"e6r8bj81"})("display:inline-grid;grid-auto-flow:column;grid-column-gap:",(0,z.Z)(1),";align-items:center;vertical-align:middle;"),ze=(0,r.Z)("div",{target:"e6r8bj80"})((e=>e.theme.overflowEllipsis),";line-height:20px;text-align:right;"),Ae=e=>{var t;let{location:s,selection:o}=e;const r=s.query.healthStatsPeriod||A.$A.TWENTY_FOUR_HOURS,{pathname:n,query:i}=s;return(0,re.BX)(Te,{children:[o.datetime.period!==A.$A.TWENTY_FOUR_HOURS&&(0,re.tZ)(Ne,{to:{pathname:n,query:{...i,healthStatsPeriod:A.$A.TWENTY_FOUR_HOURS}},selected:r===A.$A.TWENTY_FOUR_HOURS,children:(0,B.t)("24h")}),(0,re.tZ)(Ne,{to:{pathname:n,query:{...i,healthStatsPeriod:A.$A.AUTO}},selected:r===A.$A.AUTO,children:o.datetime.start?(0,B.t)("Custom"):null!==(t=o.datetime.period)&&void 0!==t?t:(0,B.t)("14d")})]})};Ae.displayName="ReleaseCardStatsPeriod";const Te=(0,r.Z)("div",{target:"e921hri1"})("display:grid;grid-auto-flow:column;grid-column-gap:",(0,z.Z)(.75),";flex:1;justify-content:flex-end;text-align:right;margin-left:",(0,z.Z)(.5),";"),Ne=(0,r.Z)(he.Z,{target:"e921hri0"})("color:",(e=>e.selected?e.theme.gray400:e.theme.gray300),";&:hover,&:focus{color:",(e=>e.selected?e.theme.gray400:e.theme.gray300),";}"),Oe=(0,H.Z)(Ae);function De(e,t){return 1===e.projects.length?e.projects[0].id:1===t.projects.length&&e.projects.map((e=>e.id)).includes(t.projects[0])?t.projects[0]:void 0}class qe extends n.Component{shouldComponentUpdate(e){return!this.props.reloading||!e.reloading}render(){const{release:e,organization:t,activeDisplay:s,location:o,reloading:r,selection:n,showHealthPlaceholders:i,isTopRelease:a,getHealthData:l,showReleaseAdoptionStages:d}=this.props,{version:p,commitCount:h,lastDeploy:u,dateCreated:m,versionInfo:g}=e,[y,Z]=Y()(e.projects.sort(((e,t)=>e.slug.localeCompare(t.slug))),(e=>!(n.projects.length>0&&!n.projects.includes(-1))||n.projects.includes(e.id)));return(0,re.BX)(Fe,{reloading:r?1:0,"data-test-id":"release-panel",children:[(0,re.BX)($e,{children:[(0,re.BX)(Xe,{children:[(0,re.tZ)(J.Z,{to:{pathname:`/organizations/${t.slug}/releases/${encodeURIComponent(p)}/`,query:{project:De(e,n)}},children:(0,re.tZ)(c.Z,{disabled:!a,target:"release_version",children:(0,re.tZ)(He,{children:(0,re.tZ)(Ue,{version:p,tooltipRawVersion:!0,anchor:!1})})})}),h>0&&(0,re.tZ)(ae,{release:e,withHeading:!1})]}),(0,re.BX)(Le,{children:[(null==g?void 0:g.package)&&(0,re.tZ)(Ve,{ellipsisDirection:"left",children:g.package}),(0,re.tZ)(ee.Z,{date:(null==u?void 0:u.dateFinished)||m}),(null==u?void 0:u.dateFinished)&&` | ${u.environment}`]})]}),(0,re.BX)(Me,{children:[(0,re.tZ)(Qe,{lightText:!0,children:(0,re.BX)(Je,{showReleaseAdoptionStages:d,children:[(0,re.tZ)(Ke,{children:(0,B.t)("Project Name")}),d&&(0,re.tZ)(st,{children:(0,B.t)("Adoption Stage")}),(0,re.BX)(tt,{children:[(0,re.tZ)("span",{children:(0,B.t)("Adoption")}),(0,re.tZ)(Oe,{location:o})]}),(0,re.tZ)(ot,{children:(0,B.t)("Crash Free Rate")}),(0,re.tZ)(rt,{children:(0,B.t)("Crashes")}),(0,re.tZ)(et,{children:(0,B.t)("New Issues")})]})}),(0,re.tZ)(Ye,{children:(0,re.tZ)(W.Z,{expandButton:e=>{let{onExpand:t,numberOfHiddenItems:s}=e;return(0,re.tZ)(Ge,{children:(0,re.tZ)(G.ZP,{priority:"primary",size:"xs",onClick:t,children:(0,B._N)("Show [numberOfHiddenItems] More",{numberOfHiddenItems:s})})})},collapseButton:e=>{let{onCollapse:t}=e;return(0,re.tZ)(We,{children:(0,re.tZ)(G.ZP,{priority:"primary",size:"xs",onClick:t,children:(0,B.t)("Collapse")})})},children:y.map(((r,n)=>(0,re.tZ)(Pe,{index:n,organization:t,project:r,location:o,getHealthData:l,releaseVersion:e.version,activeDisplay:s,showPlaceholders:i,showReleaseAdoptionStages:d,isTopRelease:a,adoptionStages:e.adoptionStages},`${e.version}-${r.slug}-row`)))})}),Z.length>0&&(0,re.tZ)(nt,{"data-test-id":"hidden-projects",children:(0,re.tZ)(te.Z,{title:function(){const e=Z.map((e=>e.slug)).slice(0,5),t=Z.length-e.length;return t&&e.push((0,B.tn)("and %s more","and %s more",t)),e.join(", ")}(),children:(0,re.tZ)(K.Z,{children:1===Z.length?(0,B._N)("[number:1] hidden project",{number:(0,re.tZ)("strong",{})}):(0,B._N)("[number] hidden projects",{number:(0,re.tZ)("strong",{children:Z.length})})})})})]})]})}}qe.displayName="ReleaseCard";const He=(0,r.Z)("div",{target:"e1n0mlk219"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Ue=(0,r.Z)(se.Z,{target:"e1n0mlk218"})((e=>e.theme.overflowEllipsis),";"),Fe=(0,r.Z)(b.s_,{target:"e1n0mlk217"})("opacity:",(e=>e.reloading?.5:1),";pointer-events:",(e=>e.reloading?"none":"auto"),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){display:flex;}"),$e=(0,r.Z)("div",{target:"e1n0mlk216"})("padding:",(0,z.Z)(1.5)," ",(0,z.Z)(2),";flex-shrink:0;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){border-right:1px solid ",(e=>e.theme.border),";min-width:260px;width:22%;max-width:300px;}"),Le=(0,r.Z)("div",{target:"e1n0mlk215"})("font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.gray400),";"),Ve=(0,r.Z)(K.Z,{target:"e1n0mlk214"})("font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";"),Me=(0,r.Z)("div",{target:"e1n0mlk213"})("border-top:1px solid ",(e=>e.theme.border),";flex-grow:1;display:grid;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){border-top:none;}"),Xe=(0,r.Z)("div",{target:"e1n0mlk212"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";display:grid;grid-template-columns:minmax(0, 1fr) max-content;gap:",(0,z.Z)(2),";align-items:center;"),Qe=(0,r.Z)(b.V9,{target:"e1n0mlk211"})("border-top-left-radius:0;padding:",(0,z.Z)(1.5)," ",(0,z.Z)(2),";font-size:",(e=>e.theme.fontSizeSmall),";"),Ye=(0,r.Z)("div",{target:"e1n0mlk210"})({name:"bjn8wh",styles:"position:relative"}),Ge=(0,r.Z)("div",{target:"e1n0mlk29"})("position:absolute;width:100%;bottom:0;display:flex;align-items:center;justify-content:center;background-image:linear-gradient(\n    180deg,\n    ",(e=>X()(e.theme.background).alpha(0).string())," 0,\n    ",(e=>e.theme.background),"\n  );background-repeat:repeat-x;border-bottom:",(0,z.Z)(1)," solid ",(e=>e.theme.background),";border-top:",(0,z.Z)(1)," solid transparent;border-bottom-right-radius:",(e=>e.theme.borderRadius),";@media (max-width: ",(e=>e.theme.breakpoints.medium),"){border-bottom-left-radius:",(e=>e.theme.borderRadius),";}"),We=(0,r.Z)("div",{target:"e1n0mlk28"})({name:"rsdkje",styles:"display:flex;align-items:center;justify-content:center;height:41px"}),Je=(0,r.Z)("div",{target:"e1n0mlk27"})("display:grid;grid-template-columns:1fr 1.4fr 0.6fr 0.7fr;grid-column-gap:",(0,z.Z)(1),";align-items:center;width:100%;@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:1fr 1fr 1fr 0.5fr 0.5fr 0.5fr;}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:1fr 1fr 1fr 0.5fr 0.5fr 0.5fr;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){",(e=>e.showReleaseAdoptionStages?"\n      grid-template-columns: 1fr 0.7fr 1fr 1fr 0.7fr 0.7fr 0.5fr;\n    ":"\n      grid-template-columns: 1fr 1fr 1fr 0.7fr 0.7fr 0.5fr;\n    "),";}"),Ke=(0,r.Z)("div",{target:"e1n0mlk26"})((e=>e.theme.overflowEllipsis),";line-height:20px;"),et=(0,r.Z)(Ke,{target:"e1n0mlk25"})("font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){text-align:right;}"),tt=(0,r.Z)(Ke,{target:"e1n0mlk24"})("display:none;font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;overflow:visible;}&>*{flex:1;}"),st=(0,r.Z)(Ke,{target:"e1n0mlk23"})("display:none;font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){display:flex;overflow:visible;}"),ot=(0,r.Z)(Ke,{target:"e1n0mlk22"})("font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){text-align:center;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){text-align:right;}"),rt=(0,r.Z)(Ke,{target:"e1n0mlk21"})("display:none;font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:block;text-align:right;}"),nt=(0,r.Z)("div",{target:"e1n0mlk20"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";padding:0 ",(0,z.Z)(2),";border-top:1px solid ",(e=>e.theme.border),";overflow:hidden;height:24px;line-height:24px;color:",(e=>e.theme.gray300),";background-color:",(e=>e.theme.backgroundSecondary),";border-bottom-right-radius:",(e=>e.theme.borderRadius),";@media (max-width: ",(e=>e.theme.breakpoints.medium),"){border-bottom-left-radius:",(e=>e.theme.borderRadius),";}"),it=qe;var at=s("../node_modules/lodash/compact.js"),lt=s.n(at),dt=s("../node_modules/moment/moment.js"),pt=s.n(dt),ct=s("./app/components/charts/chartZoom.tsx"),ht=s("./app/components/charts/lineChart.tsx"),ut=s("./app/components/charts/sessionsRequest.tsx"),mt=s("./app/components/charts/styles.tsx"),gt=s("./app/components/charts/transitionChart.tsx"),yt=s("./app/components/charts/transparentLoadingMask.tsx"),Zt=s("./app/components/charts/utils.tsx"),vt=s("./app/components/organizations/pageFilters/parse.tsx"),St=s("./app/utils/formatters.tsx"),xt=s("./app/utils/queryString.tsx"),ft=s("./app/utils/sessions.tsx"),bt=s("./app/utils/withApi.tsx"),jt=s("../node_modules/lodash/isEqual.js"),Rt=s.n(jt),Ct=s("../node_modules/lodash/omit.js"),wt=s.n(Ct),_t=s("./app/actionCreators/indicator.tsx"),Pt=s("./app/utils/tokenizeSearch.tsx");function kt(e){return wt()(e,["api","organization","children","selection.datetime.utc","location"])}function Bt(e){const t=(0,Zt.Nm)(e);return t>=Zt.$i?"1d":t>=Zt.IZ?"6h":t>Zt.w3?"4h":"1h"}function It(e,t,s){var o;return null===(o=t.series[s])||void 0===o||o.forEach(((t,s)=>{var o;return e[s]=(null!==(o=e[s])&&void 0!==o?o:0)+t})),e}function Et(e){switch(e){case fe.USERS:return A.kI.USERS;case fe.SESSIONS:default:return A.kI.SESSIONS}}class zt extends n.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{loading:!1,errored:!1,statusCountByReleaseInPeriod:null,totalCountByReleaseIn24h:null,totalCountByProjectIn24h:null,statusCountByProjectInPeriod:null,totalCountByReleaseInPeriod:null,totalCountByProjectInPeriod:null}),(0,o.Z)(this,"fetchData",(async()=>{const{api:e,healthStatsPeriod:t,disable:s}=this.props;if(s)return;e.clear(),this.setState({loading:!0,errored:!1,statusCountByReleaseInPeriod:null,totalCountByReleaseIn24h:null,totalCountByProjectIn24h:null});const o=[this.fetchStatusCountByReleaseInPeriod(),this.fetchTotalCountByReleaseIn24h(),this.fetchTotalCountByProjectIn24h()];t===A.$A.AUTO&&(o.push(this.fetchStatusCountByProjectInPeriod()),o.push(this.fetchTotalCountByReleaseInPeriod()),o.push(this.fetchTotalCountByProjectInPeriod()));try{const[e,t,s,r,n,i]=await Promise.all(o);this.setState({loading:!1,statusCountByReleaseInPeriod:e,totalCountByReleaseIn24h:t,totalCountByProjectIn24h:s,statusCountByProjectInPeriod:r,totalCountByReleaseInPeriod:n,totalCountByProjectInPeriod:i})}catch(e){var r,n;(0,_t.Iw)(null!==(r=null===(n=e.responseJSON)||void 0===n?void 0:n.detail)&&void 0!==r?r:(0,B.t)("Error loading health data")),this.setState({loading:!1,errored:!0})}})),(0,o.Z)(this,"getHealthData",(()=>({getCrashCount:this.getCrashCount,getCrashFreeRate:this.getCrashFreeRate,get24hCountByRelease:this.get24hCountByRelease,get24hCountByProject:this.get24hCountByProject,getTimeSeries:this.getTimeSeries,getAdoption:this.getAdoption}))),(0,o.Z)(this,"getCrashCount",((e,t,s)=>{var o;const{statusCountByReleaseInPeriod:r}=this.state,n=Et(s);return null==r||null===(o=r.groups.find((s=>{let{by:o}=s;return o.release===e&&o.project===t&&"crashed"===o["session.status"]})))||void 0===o?void 0:o.totals[n]})),(0,o.Z)(this,"getCrashFreeRate",((e,t,s)=>{var o;const{statusCountByReleaseInPeriod:r}=this.state,n=Et(s),i=null==r||null===(o=r.groups.filter((s=>{let{by:o}=s;return o.release===e&&o.project===t})))||void 0===o?void 0:o.reduce(((e,t)=>e+t.totals[n]),0),a=this.getCrashCount(e,t,s);return(0,Ze.ri)(i)&&0!==i?(0,V.Mf)(100-(0,Ze.aQ)(null!=a?a:0,null!=i?i:0)):null})),(0,o.Z)(this,"get24hCountByRelease",((e,t,s)=>{var o;const{totalCountByReleaseIn24h:r}=this.state,n=Et(s);return null==r||null===(o=r.groups.filter((s=>{let{by:o}=s;return o.release===e&&o.project===t})))||void 0===o?void 0:o.reduce(((e,t)=>e+t.totals[n]),0)})),(0,o.Z)(this,"getPeriodCountByRelease",((e,t,s)=>{var o;const{totalCountByReleaseInPeriod:r}=this.state,n=Et(s);return null==r||null===(o=r.groups.filter((s=>{let{by:o}=s;return o.release===e&&o.project===t})))||void 0===o?void 0:o.reduce(((e,t)=>e+t.totals[n]),0)})),(0,o.Z)(this,"get24hCountByProject",((e,t)=>{var s;const{totalCountByProjectIn24h:o}=this.state,r=Et(t);return null==o||null===(s=o.groups.filter((t=>{let{by:s}=t;return s.project===e})))||void 0===s?void 0:s.reduce(((e,t)=>e+t.totals[r]),0)})),(0,o.Z)(this,"getPeriodCountByProject",((e,t)=>{var s;const{totalCountByProjectInPeriod:o}=this.state,r=Et(t);return null==o||null===(s=o.groups.filter((t=>{let{by:s}=t;return s.project===e})))||void 0===s?void 0:s.reduce(((e,t)=>e+t.totals[r]),0)})),(0,o.Z)(this,"getTimeSeries",((e,t,s)=>{const{healthStatsPeriod:o}=this.props;return o===A.$A.AUTO?this.getPeriodTimeSeries(e,t,s):this.get24hTimeSeries(e,t,s)})),(0,o.Z)(this,"get24hTimeSeries",((e,t,s)=>{var o,r,n;const{totalCountByReleaseIn24h:i,totalCountByProjectIn24h:a}=this.state,l=Et(s),d=null!==(o=null==a?void 0:a.intervals)&&void 0!==o?o:[],p=null==a||null===(r=a.groups.find((e=>{let{by:s}=e;return s.project===t})))||void 0===r?void 0:r.series[l],c=null==i||null===(n=i.groups.find((s=>{let{by:o}=s;return o.project===t&&o.release===e})))||void 0===n?void 0:n.series[l];return[{seriesName:(0,B.t)("This Release"),data:null==d?void 0:d.map(((e,t)=>{var s;return{name:pt()(e).valueOf(),value:null!==(s=null==c?void 0:c[t])&&void 0!==s?s:0}}))},{seriesName:(0,B.t)("Total Project"),data:null==d?void 0:d.map(((e,t)=>{var s;return{name:pt()(e).valueOf(),value:null!==(s=null==p?void 0:p[t])&&void 0!==s?s:0}})),z:0}]})),(0,o.Z)(this,"getPeriodTimeSeries",((e,t,s)=>{var o,r,n;const{statusCountByReleaseInPeriod:i,statusCountByProjectInPeriod:a}=this.state,l=Et(s),d=null!==(o=null==a?void 0:a.intervals)&&void 0!==o?o:[],p=null==a||null===(r=a.groups.filter((e=>{let{by:s}=e;return s.project===t})))||void 0===r?void 0:r.reduce(((e,t)=>It(e,t,l)),[]),c=null==i||null===(n=i.groups.filter((s=>{let{by:o}=s;return o.project===t&&o.release===e})))||void 0===n?void 0:n.reduce(((e,t)=>It(e,t,l)),[]);return[{seriesName:(0,B.t)("This Release"),data:null==d?void 0:d.map(((e,t)=>{var s;return{name:pt()(e).valueOf(),value:null!==(s=null==c?void 0:c[t])&&void 0!==s?s:0}}))},{seriesName:(0,B.t)("Total Project"),data:null==d?void 0:d.map(((e,t)=>{var s;return{name:pt()(e).valueOf(),value:null!==(s=null==p?void 0:p[t])&&void 0!==s?s:0}})),z:0}]})),(0,o.Z)(this,"getAdoption",((e,t,s)=>{const{healthStatsPeriod:o}=this.props,r=(o===A.$A.AUTO?this.getPeriodCountByRelease:this.get24hCountByRelease)(e,t,s),n=(o===A.$A.AUTO?this.getPeriodCountByProject:this.get24hCountByProject)(t,s);return(0,Ze.ri)(r)&&(0,Ze.ri)(n)?(0,Ze.aQ)(r,n):void 0}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){this.props.releasesReloading||Rt()(kt(e),kt(this.props))||this.fetchData()}get path(){const{organization:e}=this.props;return`/organizations/${e.slug}/sessions/`}get baseQueryParams(){const{location:e,selection:t,defaultStatsPeriod:s,releases:o}=this.props;return{query:new Pt.MY(o.reduce(((e,t,s,o)=>(e.push(`release:"${t}"`),s<o.length-1&&e.push("OR"),e)),[])).formatString(),interval:Bt(t.datetime),...(0,vt.fK)(l()(e.query,Object.values(_.nF)),{defaultStatsPeriod:s})}}async fetchStatusCountByReleaseInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:[...new Set([...t.map((e=>Et(e))),"sum(session)"])],groupBy:["project","release","session.status"]}})}async fetchStatusCountByProjectInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:[...new Set([...t.map((e=>Et(e))),"sum(session)"])],groupBy:["project","session.status"]}})}async fetchTotalCountByReleaseIn24h(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:t.map((e=>Et(e))),groupBy:["project","release"],interval:"1h",statsPeriod:"24h"}})}async fetchTotalCountByReleaseInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:t.map((e=>Et(e))),groupBy:["project","release"]}})}async fetchTotalCountByProjectIn24h(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:t.map((e=>Et(e))),groupBy:["project"],interval:"1h",statsPeriod:"24h"}})}async fetchTotalCountByProjectInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:t.map((e=>Et(e))),groupBy:["project"]}})}render(){const{loading:e,errored:t}=this.state,{children:s}=this.props;return s({isHealthLoading:e,errored:t,getHealthData:this.getHealthData()})}}zt.displayName="ReleasesRequest";const At=(0,bt.Z)(zt);class Tt extends n.Component{constructor(){super(...arguments),(0,o.Z)(this,"handleClick",(e=>{const{organization:t,router:s,selection:o,location:r}=this.props,n=o.projects[0];s.push({pathname:`/organizations/${null==t?void 0:t.slug}/releases/${encodeURIComponent(e.seriesId)}/`,query:{project:n,environment:r.query.environment}})}))}getInterval(){const{organization:e,location:t}=this.props,s={start:(0,xt.ro)(t.query.start),end:(0,xt.ro)(t.query.end),period:(0,xt.ro)(t.query.statsPeriod)},o=(0,Zt.Nm)(s);return e.features.includes("minute-resolution-sessions")&&o<360?"10m":o>=Zt.IZ?"1d":"1h"}getReleasesSeries(e){var t;const{activeDisplay:s}=this.props;let o=null!==(t=null==e?void 0:e.groups.map((e=>e.by.release)))&&void 0!==t?t:[];return null!=e&&e.groups&&e.groups.length>50&&(o=e.groups.sort(((e,t)=>t.totals["sum(session)"]-e.totals["sum(session)"])).slice(0,50).map((e=>e.by.release))),o?o.map((t=>({id:t,seriesName:(0,St.ko)(t),data:(0,ft.hD)([null==e?void 0:e.groups.find((e=>{let{by:s}=e;return s.release===t}))],null==e?void 0:e.groups,null==e?void 0:e.intervals,Et(s)),emphasis:{focus:"series"}}))):null}renderEmpty(){return(0,re.BX)(b.s_,{children:[(0,re.BX)(b.N,{withPadding:!0,children:[(0,re.tZ)(Ot,{children:(0,re.tZ)(ge.Z,{height:"24px"})}),(0,re.tZ)(ge.Z,{height:"200px"})]}),(0,re.tZ)(qt,{children:(0,re.tZ)(ge.Z,{height:"34px"})})]})}render(){const{activeDisplay:e,router:t,selection:s,api:o,organization:r,location:n}=this.props,{start:i,end:a,period:d,utc:p}=s.datetime,c=this.getInterval(),h=Et(e);return(0,re.tZ)(ut.Z,{api:o,organization:r,interval:c,groupBy:["release"],field:[h],...(0,vt.fK)(l()(n.query,Object.values(_.nF))),children:s=>{let{response:o,loading:r,reloading:n}=s;const l=(0,ft.sA)(null==o?void 0:o.groups,h),u=this.getReleasesSeries(o);if(r)return this.renderEmpty();if(null==u||!u.length)return null;const m=u[0].data.length,g=u[0].data.map((e=>e.name)),y=-1===u.findIndex((e=>e.data[m-1].value>0));return(0,re.BX)(b.s_,{children:[(0,re.BX)(b.N,{withPadding:!0,children:[(0,re.tZ)(Ot,{children:(0,re.tZ)(Dt,{children:(0,B.t)("Release Adoption")})}),(0,re.BX)(gt.Z,{loading:r,reloading:n,children:[(0,re.tZ)(yt.Z,{visible:n}),(0,re.tZ)(ct.Z,{router:t,period:d,utc:p,start:i,end:a,children:e=>(0,re.tZ)(ht.w,{...e,grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},series:u.map((e=>({...e,data:y?e.data.slice(0,-1):e.data}))),yAxis:{min:0,max:100,type:"value",interval:10,splitNumber:10,data:[0,10,20,30,40,50,60,70,80,90,100],axisLabel:{formatter:"{value}%"}},xAxis:{show:!0,min:g[0],max:g[m-1],type:"time",data:g},tooltip:{formatter:e=>{const t=Array.isArray(e)?e:[e],s=t[0].data[0],[r,n,i,...a]=t.filter((e=>e.data[1]>0)).sort(((e,t)=>t.data[1]-e.data[1])),l=a.reduce(((e,t)=>e+t.data[1]),0),d=lt()([r,n,i]);if(a.length&&d.push({seriesName:(0,B.tn)("%s Other","%s Others",a.length),data:[s,l],marker:'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;"></span>'}),!d.length)return"<div/>";const p=(0,vt.su)(c)||{periodLength:"d",period:"1"},h=pt()(s).format("MMM D LT"),u=(t[0].dataIndex===m-1?pt()(null==o?void 0:o.end):pt()(s).add(parseInt(p.period,10),p.periodLength)).format("MMM D LT");return['<div class="tooltip-series">',d.map((e=>`<div><span class="tooltip-label">${e.marker}<strong>${e.seriesName&&(0,Zt.oS)(e.seriesName,12)}</strong></span>${e.data[1].toFixed(2)}%</div>`)).join(""),"</div>",`<div class="tooltip-date">${h} &mdash; ${u}</div>`,'<div class="tooltip-arrow"></div>'].join("")}},onClick:this.handleClick})})]})]}),(0,re.tZ)(qt,{children:(0,re.BX)(mt.m2,{children:[(0,re.tZ)(mt.OT,{children:(0,B._N)("Total [display]",{display:e===fe.USERS?"Users":"Sessions"})}),(0,re.tZ)(mt.uN,{children:(0,re.tZ)(pe.Z,{value:l||0})})]})})]})}})}}Tt.displayName="ReleasesAdoptionChart";const Nt=(0,bt.Z)(Tt),Ot=(0,r.Z)(mt.ws,{target:"e1vlt8wr2"})("margin-bottom:",(0,z.Z)(1),";"),Dt=(0,r.Z)("header",{target:"e1vlt8wr1"})({name:"ho1qnd",styles:"display:flex;flex-direction:row"}),qt=(0,r.Z)(b.jH,{target:"e1vlt8wr0"})("display:flex;align-items:center;padding:",(0,z.Z)(1)," 20px;");var Ht=s("./app/views/releases/list/releasesPromo.tsx");let Ut;function Ft(e){let{selected:t,selectedDisplay:s,onSelect:o,environments:r}=e;const n={[Ut.DATE]:{label:(0,B.t)("Date Created")},[Ut.SESSIONS]:{label:(0,B.t)("Total Sessions")},...s===fe.USERS?{[Ut.USERS_24_HOURS]:{label:(0,B.t)("Active Users")},[Ut.CRASH_FREE_USERS]:{label:(0,B.t)("Crash Free Users")}}:{[Ut.SESSIONS_24_HOURS]:{label:(0,B.t)("Active Sessions")},[Ut.CRASH_FREE_SESSIONS]:{label:(0,B.t)("Crash Free Sessions")}},[Ut.BUILD]:{label:(0,B.t)("Build Number")},[Ut.SEMVER]:{label:(0,B.t)("Semantic Version")}},i=1!==r.length;return n[Ut.ADOPTION]={label:(0,B.t)("Date Adopted"),disabled:i,tooltip:i?(0,B.t)("Select one environment to use this sort option."):void 0},(0,re.tZ)(Lt,{label:(0,B.t)("Sort By"),options:n,selected:t,onSelect:o})}!function(e){e.CRASH_FREE_USERS="crash_free_users",e.CRASH_FREE_SESSIONS="crash_free_sessions",e.USERS_24_HOURS="users_24h",e.SESSIONS_24_HOURS="sessions_24h",e.SESSIONS="sessions",e.DATE="date",e.BUILD="build",e.SEMVER="semver",e.ADOPTION="adoption"}(Ut||(Ut={})),Ft.displayName="ReleasesSortOptions";const $t=Ft,Lt=(0,r.Z)(xe,{target:"e1oouhtz0"})("z-index:2;@media (max-width: ",(e=>e.theme.breakpoints.large),"){order:2;}");let Vt;!function(e){e.ACTIVE="active",e.ARCHIVED="archived"}(Vt||(Vt={}));const Mt={[Vt.ACTIVE]:{label:(0,B.t)("Active")},[Vt.ARCHIVED]:{label:(0,B.t)("Archived")}};function Xt(e){let{selected:t,onSelect:s}=e;return(0,re.tZ)(Yt,{label:(0,B.t)("Status"),options:Mt,selected:t,onSelect:s})}Xt.displayName="ReleasesStatusOptions";const Qt=Xt,Yt=(0,r.Z)(xe,{target:"e1hsr3x60"})("z-index:3;@media (max-width: ",(e=>e.theme.breakpoints.large),"){order:1;}");class Gt extends F.Z{constructor(){super(...arguments),(0,o.Z)(this,"shouldReload",!0),(0,o.Z)(this,"shouldRenderBadRequests",!0),(0,o.Z)(this,"handleSearch",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,query:e}})})),(0,o.Z)(this,"handleSortBy",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,sort:e}})})),(0,o.Z)(this,"handleDisplay",(e=>{const{location:t,router:s}=this.props;let o=t.query.sort;o===Ut.USERS_24_HOURS&&e===fe.SESSIONS?o=Ut.SESSIONS_24_HOURS:o===Ut.SESSIONS_24_HOURS&&e===fe.USERS?o=Ut.USERS_24_HOURS:o===Ut.CRASH_FREE_USERS&&e===fe.SESSIONS?o=Ut.CRASH_FREE_SESSIONS:o===Ut.CRASH_FREE_SESSIONS&&e===fe.USERS&&(o=Ut.CRASH_FREE_USERS),s.push({...t,query:{...t.query,cursor:void 0,display:e,sort:o}})})),(0,o.Z)(this,"handleStatus",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,status:e}})})),(0,o.Z)(this,"trackAddReleaseHealth",(()=>{const{organization:e,selection:t}=this.props;e.id&&t.projects[0]&&(0,T.ec)({eventKey:"releases_list.click_add_release_health",eventName:"Releases List: Click Add Release Health",organization_id:parseInt(e.id,10),project_id:t.projects[0]})})),(0,o.Z)(this,"tagValueLoader",((e,t)=>{const{location:s,organization:o}=this.props,{project:r}=s.query;return(0,d.Fo)(this.api,o.slug,e,t,r?[r]:null,s.query)})),(0,o.Z)(this,"getTagValues",(async(e,t)=>(await this.tagValueLoader(e.key,t)).map((e=>{let{value:t}=e;return t}))))}getTitle(){return(0,D.Z)((0,B.t)("Releases"),this.props.organization.slug,!1)}getEndpoints(){const{organization:e,location:t}=this.props,{statsPeriod:s}=t.query,o=this.getSort(),r=this.getStatus(),n={...l()(t.query,["project","environment","cursor","query","sort"]),summaryStatsPeriod:s,per_page:20,flatten:o===Ut.DATE?0:1,adoptionStages:1,status:r===Vt.ARCHIVED?A.dE.Archived:A.dE.Active};return[["releases",`/organizations/${e.slug}/releases/`,{query:n},{disableEntireQuery:!0}]]}componentDidUpdate(e,t){super.componentDidUpdate(e,t),t.releases!==this.state.releases&&(0,i.be)()}getQuery(){const{query:e}=this.props.location.query;return"string"==typeof e?e:void 0}getSort(){const{environments:e}=this.props.selection,{sort:t}=this.props.location.query;return t===Ut.ADOPTION&&1!==e.length?Ut.DATE:Object.values(Ut).includes(t)?t:Ut.DATE}getDisplay(){const{display:e}=this.props.location.query;return e===fe.USERS?fe.USERS:fe.SESSIONS}getStatus(){const{status:e}=this.props.location.query;return e===Vt.ARCHIVED?Vt.ARCHIVED:Vt.ACTIVE}getSelectedProject(){const{selection:e,projects:t}=this.props,s=e.projects&&1===e.projects.length&&e.projects[0];return null==t?void 0:t.find((e=>e.id===`${s}`))}get projectHasSessions(){var e,t;return null!==(e=null===(t=this.getSelectedProject())||void 0===t?void 0:t.hasSessions)&&void 0!==e?e:null}shouldShowLoadingIndicator(){const{loading:e,releases:t,reloading:s}=this.state;return e&&!s||e&&!(null!=t&&t.length)}renderLoading(){return this.renderBody()}renderError(){return this.renderBody()}get shouldShowQuickstart(){const{releases:e}=this.state,t=this.getSelectedProject(),s=null==t?void 0:t.features.includes("releases");return!(null!=e&&e.length)&&!s&&t}renderEmptyMessage(){const{location:e}=this.props,{statsPeriod:t,start:s,end:o}=e.query,r=this.getQuery(),n=this.getSort(),i=this.getStatus(),a=s&&o?(0,B.t)("time range"):(0,S.T)(t||w.GY).toLowerCase();return r&&r.length?(0,re.tZ)(b.s_,{children:(0,re.tZ)($.Z,{icon:(0,re.tZ)(k.jV,{size:"xl"}),size:"large",children:`${(0,B.t)("There are no releases that match")}: '${r}'.`})}):n===Ut.USERS_24_HOURS?(0,re.tZ)(b.s_,{children:(0,re.tZ)($.Z,{icon:(0,re.tZ)(k.jV,{size:"xl"}),size:"large",children:(0,B.t)("There are no releases with active user data (users in the last 24 hours).")})}):n===Ut.SESSIONS_24_HOURS?(0,re.tZ)(b.s_,{children:(0,re.tZ)($.Z,{icon:(0,re.tZ)(k.jV,{size:"xl"}),size:"large",children:(0,B.t)("There are no releases with active session data (sessions in the last 24 hours).")})}):n===Ut.BUILD||n===Ut.SEMVER?(0,re.tZ)(b.s_,{children:(0,re.tZ)($.Z,{icon:(0,re.tZ)(k.jV,{size:"xl"}),size:"large",children:(0,B.t)("There are no releases with semantic versioning.")})}):n!==Ut.DATE?(0,re.tZ)(b.s_,{children:(0,re.tZ)($.Z,{icon:(0,re.tZ)(k.jV,{size:"xl"}),size:"large",children:`${(0,B.t)("There are no releases with data in the")} ${a}.`})}):i===Vt.ARCHIVED?(0,re.tZ)(b.s_,{children:(0,re.tZ)($.Z,{icon:(0,re.tZ)(k.jV,{size:"xl"}),size:"large",children:(0,B.t)("There are no archived releases.")})}):(0,re.tZ)(b.s_,{children:(0,re.tZ)($.Z,{icon:(0,re.tZ)(k.jV,{size:"xl"}),size:"large",children:`${(0,B.t)("There are no releases with data in the")} ${a}.`})})}renderHealthCta(){const{organization:e}=this.props,{releases:t}=this.state,s=this.getSelectedProject();return s&&!1===this.projectHasSessions&&null!=t&&t.length?(0,re.tZ)(O.Z,{orgId:e.slug,slugs:[s.slug],children:e=>{let{projects:t,initiallyLoaded:s,fetchError:o}=e;const r=t&&1===t.length&&t[0],n=r&&r.platform&&P.an.includes(r.platform);return s&&!o&&n?(0,re.tZ)(p.Z,{type:"info",showIcon:!0,children:(0,re.BX)(Wt,{children:[(0,re.tZ)("div",{children:(0,B.t)("To track user adoption, crash rates, session data and more, add Release Health to your current setup.")}),(0,re.tZ)(m.Z,{href:"https://docs.sentry.io/product/releases/setup/#release-health",onClick:this.trackAddReleaseHealth,children:(0,B.t)("Add Release Health")})]})}):null}}):null}renderInnerBody(e,t){const{location:s,selection:o,organization:r,router:i}=this.props,{releases:a,reloading:l,releasesPageLinks:d}=this.state,p=this.getSelectedProject(),c=null==p?void 0:p.features.includes("releases");return this.shouldShowLoadingIndicator()?(0,re.tZ)(g.Z,{}):null!=a&&a.length||!c?this.shouldShowQuickstart?(0,re.tZ)(Ht.Z,{organization:r,project:p}):(0,re.tZ)(At,{releases:a.map((e=>{let{version:t}=e;return t})),organization:r,selection:o,location:s,display:[this.getDisplay()],releasesReloading:l,healthStatsPeriod:s.query.healthStatsPeriod,children:c=>{var h;let{isHealthLoading:u,getHealthData:m}=c;const g=1===(null===(h=o.projects)||void 0===h?void 0:h.length)&&o.projects[0]!==_.mP,y=(null==p?void 0:p.platform)&&(0,V.Jl)(p.platform);return(0,re.BX)(n.Fragment,{children:[g&&this.projectHasSessions&&y&&(0,re.tZ)(Nt,{organization:r,selection:o,location:s,router:i,activeDisplay:e}),a.map(((n,i)=>(0,re.tZ)(it,{activeDisplay:e,release:n,organization:r,location:s,selection:o,reloading:l,showHealthPlaceholders:u,isTopRelease:0===i,getHealthData:m,showReleaseAdoptionStages:t},`${n.version}-${n.projects[0].slug}`))),(0,re.tZ)(f.Z,{pageLinks:d})]})}}):this.renderEmptyMessage()}renderBody(){const{organization:e,selection:t}=this.props,{releases:s,reloading:o,error:r}=this.state,n=this.getSort(),i=this.getStatus(),a=this.getDisplay(),l=t.projects.map((e=>`${e}`)).map(I.Z.getById).some((e=>(null==e?void 0:e.platform)&&(0,V.Jl)(e.platform)))&&1===t.environments.length,d=s&&s.length>0;return(0,re.tZ)(v.Z,{showAbsolute:!1,children:(0,re.tZ)(E.JH,{children:(0,re.BX)(y.Z,{organization:e,children:[(0,re.tZ)(E.mr,{children:(0,re.tZ)(x.Z,{children:(0,B.t)("Releases")})}),this.renderHealthCta(),(0,re.BX)(Jt,{condensed:!0,children:[(0,re.tZ)(j.Z,{}),(0,re.tZ)(u.Z,{}),(0,re.tZ)(h.Z,{alignDropdown:"left",hint:(0,B.t)("Changing this date range will recalculate the release metrics.")})]}),this.shouldShowQuickstart?null:(0,re.BX)(Kt,{children:[(0,re.tZ)(c.Z,{target:"releases_search",position:"bottom",disabled:!d,children:(0,re.tZ)(es,{searchSource:"releases",query:this.getQuery(),placeholder:(0,B.t)("Search by version, build, package, or stage"),hasRecentSearches:!1,supportedTags:{...N.jg,release:{key:"release",name:"release"}},maxMenuHeight:500,supportedTagType:C.q.PROPERTY,onSearch:this.handleSearch,onGetTagValues:this.getTagValues})}),(0,re.tZ)(Qt,{selected:i,onSelect:this.handleStatus}),(0,re.tZ)($t,{selected:n,selectedDisplay:a,onSelect:this.handleSortBy,environments:t.environments}),(0,re.tZ)(Re,{selected:a,onSelect:this.handleDisplay})]}),!o&&i===Vt.ARCHIVED&&!(null==s||!s.length)&&(0,re.tZ)(L.Z,{multi:!0}),r?super.renderError(new Error("Unable to load all required endpoints")):this.renderInnerBody(a,l)]})})})}}const Wt=(0,r.Z)("div",{target:"e14zcdo93"})("display:flex;align-items:flex-start;justify-content:flex-start;gap:",(0,z.Z)(2),";>*:nth-child(1){flex:1;}flex-direction:column;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){flex-direction:row;}"),Jt=(0,r.Z)(Z.Z,{target:"e14zcdo92"})("margin-bottom:",(0,z.Z)(2),";"),Kt=(0,r.Z)("div",{target:"e14zcdo91"})("display:grid;grid-template-columns:1fr repeat(3, max-content);gap:",(0,z.Z)(2),";margin-bottom:",(0,z.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:repeat(3, 1fr);}@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:minmax(0, 1fr);}"),es=(0,r.Z)(R.Z,{target:"e14zcdo90"})("@media (max-width: ",(e=>e.theme.breakpoints.medium),"){grid-column:1/-1;}"),ts=(0,U.Z)((0,q.Z)((0,H.Z)(Gt)))},"../node_modules/lodash/_baseMean.js":(e,t,s)=>{var o=s("../node_modules/lodash/_baseSum.js");e.exports=function(e,t){var s=null==e?0:e.length;return s?o(e,t)/s:NaN}},"../node_modules/lodash/_baseSum.js":e=>{e.exports=function(e,t){for(var s,o=-1,r=e.length;++o<r;){var n=t(e[o]);void 0!==n&&(s=void 0===s?n:s+n)}return s}},"../node_modules/lodash/mean.js":(e,t,s)=>{var o=s("../node_modules/lodash/_baseMean.js"),r=s("../node_modules/lodash/identity.js");e.exports=function(e){return o(e,r)}},"../node_modules/lodash/negate.js":e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"../node_modules/lodash/omitBy.js":(e,t,s)=>{var o=s("../node_modules/lodash/_baseIteratee.js"),r=s("../node_modules/lodash/negate.js"),n=s("../node_modules/lodash/pickBy.js");e.exports=function(e,t){return n(e,r(o(t)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_releases_list_index_tsx-node_modules_lodash_mean_js-node_modules_lodash_omitBy_js.4e525e24f2a86f0f117f6db57e094893.js.map