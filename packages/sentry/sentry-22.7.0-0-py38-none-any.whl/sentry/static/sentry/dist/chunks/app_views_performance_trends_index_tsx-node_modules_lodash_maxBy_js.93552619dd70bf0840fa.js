(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_trends_index_tsx-node_modules_lodash_maxBy_js"],{"./app/views/performance/trends/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>L});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),a=r("./app/components/noProjectMessage.tsx"),i=r("./app/components/sentryDocumentTitle.tsx"),p=r("./app/locale.tsx"),l=r("./app/styles/organization.tsx"),d=r("./app/utils/withApi.tsx"),c=r("./app/utils/withOrganization.tsx"),m=r("./app/utils/withPageFilters.tsx"),u=r("./app/utils/withProjects.tsx"),h=r("./app/views/performance/data.tsx"),g=r("../node_modules/react-router/es/index.js"),f=r("./app/components/alert.tsx"),x=r("./app/components/breadcrumbs.tsx"),Z=r("./app/components/datePageFilter.tsx"),y=r("./app/components/environmentPageFilter.tsx"),v=r("./app/components/events/searchBar.tsx"),w=r("./app/components/forms/compactSelect.tsx"),b=r("./app/components/layouts/thirds.tsx"),_=r("./app/components/organizations/pageFilterBar.tsx"),j=r("./app/components/organizations/pageFilters/container.tsx"),P=r("./app/components/projectPageFilter.tsx"),T=r("./app/constants/index.tsx"),C=r("./app/styles/space.tsx"),F=r("./app/utils/analytics.tsx"),q=r("./app/utils/discover/fields.tsx"),S=r("./app/utils/queryString.tsx"),E=r("./app/utils/tokenizeSearch.tsx"),z=r("./app/views/performance/utils.tsx"),V=r("./app/views/performance/trends/changedTransactions.tsx"),k=r("./app/views/performance/trends/types.tsx"),D=r("./app/views/performance/trends/utils.tsx"),B=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const I={start:null,end:null,utc:!1,period:D._1};class O extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{}),(0,n.Z)(this,"handleSearch",(e=>{const{location:t}=this.props,r=(0,D.Ws)();g.browserHistory.push({pathname:t.pathname,query:{...t.query,...r,query:String(e).trim()||void 0}})})),(0,n.Z)(this,"setError",(e=>{this.setState({error:e})})),(0,n.Z)(this,"handleTrendFunctionChange",(e=>{const{organization:t,location:r}=this.props,n={};Object.values(k.ER).forEach((e=>{const t=(0,D.j_)(e);n[t]=void 0})),(0,F.ec)({eventKey:"performance_views.trends.change_function",eventName:"Performance Views: Change Function",organization_id:parseInt(t.id,10),function_name:e}),this.setState({previousTrendFunction:(0,D.CE)(r).field});const s=(0,D.Ws)();g.browserHistory.push({pathname:r.pathname,query:{...r.query,...n,...s,trendFunction:e}})})),(0,n.Z)(this,"handleParameterChange",(e=>{const{organization:t,location:r}=this.props,n=(0,D.Ws)();(0,F.ec)({eventKey:"performance_views.trends.change_parameter",eventName:"Performance Views: Change Parameter",organization_id:parseInt(t.id,10),parameter_name:e}),g.browserHistory.push({pathname:r.pathname,query:{...r.query,...n,trendParameter:e}})}))}renderError(){const{error:e}=this.state;return e?(0,B.tZ)(f.Z,{type:"error",showIcon:!0,children:e}):null}getPerformanceLink(){const{location:e}=this.props,t={...e.query},r=(0,S.ro)(e.query.query,""),n=new E.MY(r);return n.removeFilter("tpm()"),n.removeFilter("confidence()"),n.removeFilter("transaction.duration"),t.query=n.formatString(),{pathname:(0,z.de)(this.props.organization),query:t}}render(){const{organization:e,eventView:t,location:r,projects:n}=this.props,{previousTrendFunction:s}=this.state,o=t.clone();(0,D.iF)(o,r);const a=(0,q.db)(e,[{field:"absolute_correlation()"},{field:"trend_percentage()"},{field:"trend_difference()"},{field:"count_percentage()"},{field:"tpm()"},{field:"tps()"}],["epm()","eps()"]),i=(0,D.CE)(r),l=(0,D.IO)(r,n,t.project),d=(0,z.Ov)(r);return(0,B.BX)(j.Z,{defaultSelection:{datetime:I},children:[(0,B.tZ)(b.h4,{children:(0,B.BX)(b.oB,{children:[(0,B.tZ)(x.Z,{crumbs:[{label:"Performance",to:this.getPerformanceLink()},{label:"Trends"}]}),(0,B.tZ)(b.Dx,{children:(0,p.t)("Trends")})]})}),(0,B.tZ)(b.uT,{children:(0,B.tZ)(b.or,{fullWidth:!0,children:(0,B.BX)(N,{location:r,eventView:t,projects:n,children:[(0,B.BX)(R,{children:[(0,B.BX)(_.Z,{condensed:!0,children:[(0,B.tZ)(P.Z,{}),(0,B.tZ)(y.Z,{}),(0,B.tZ)(Z.Z,{alignDropdown:"left"})]}),(0,B.tZ)(X,{searchSource:"trends",organization:e,projectIds:o.project,query:d,fields:a,onSearch:this.handleSearch,maxQueryLength:T.dI}),(0,B.tZ)(w.Z,{triggerProps:{prefix:(0,p.t)("Percentile")},value:i.field,options:D.T1.map((e=>{let{label:t,field:r}=e;return{value:r,label:t}})),onChange:e=>this.handleTrendFunctionChange(e.value)}),(0,B.tZ)(w.Z,{triggerProps:{prefix:(0,p.t)("Parameter")},value:l.label,options:D.cs.map((e=>{let{label:t}=e;return{value:t,label:t}})),onChange:e=>this.handleParameterChange(e.value)})]}),(0,B.BX)(H,{children:[(0,B.tZ)(V.Z,{trendChangeType:k.ER.IMPROVED,previousTrendFunction:s,trendView:o,location:r,setError:this.setError}),(0,B.tZ)(V.Z,{trendChangeType:k.ER.REGRESSION,previousTrendFunction:s,trendView:o,location:r,setError:this.setError})]})]})})})]})}}O.displayName="TrendsContent";class N extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"hasPushedDefaults",!1)}render(){const{children:e,location:t,eventView:r,projects:n}=this.props,s=(0,S.ro)(t.query.query),a=(0,D.IO)(t,n,r.project),i=new E.MY(s||"");if(s||this.hasPushedDefaults)return this.hasPushedDefaults=!0,(0,B.tZ)(o.Fragment,{children:e});this.hasPushedDefaults=!0,i.setFilterValues("tpm()",[">0.01"]),i.setFilterValues(a.column,[">0",`<${D.bg}`]);const p=i.formatString();return r.query=p,g.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:String(p).trim()||void 0}}),null}}N.displayName="DefaultTrends";const R=(0,s.Z)("div",{target:"e1yf76wj2"})("display:grid;gap:",(0,C.Z)(2),";margin-bottom:",(0,C.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(3, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto 1fr auto auto;}"),X=(0,s.Z)(v.Z,{target:"e1yf76wj1"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/5;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),H=(0,s.Z)("div",{target:"e1yf76wj0"})("display:grid;gap:",(0,C.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(2, minmax(0, 1fr));}"),M=(0,m.Z)(O);class W extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{eventView:(0,h.C)(this.props.location,this.props.projects,{isTrends:!0}),error:void 0}),(0,n.Z)(this,"setError",(e=>{this.setState({error:e})}))}static getDerivedStateFromProps(e,t){return{...t,eventView:(0,h.C)(e.location,e.projects,{isTrends:!0})}}getDocumentTitle(){return[(0,p.t)("Trends"),(0,p.t)("Performance")].join(" - ")}renderContent(){const{organization:e,location:t,projects:r}=this.props,{eventView:n}=this.state;return(0,B.tZ)(M,{organization:e,location:t,eventView:n,projects:r})}render(){const{organization:e}=this.props;return(0,B.tZ)(i.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,B.tZ)(G,{children:(0,B.tZ)(a.Z,{organization:e,children:this.renderContent()})})})}}W.displayName="TrendsSummary";const L=(0,c.Z)((0,u.Z)((0,m.Z)((0,d.Z)(W)))),G=(0,s.Z)(l.JH,{target:"e183k9ay0"})({name:"1hcx8jb",styles:"padding:0"})},"../node_modules/lodash/maxBy.js":(e,t,r)=>{var n=r("../node_modules/lodash/_baseExtremum.js"),s=r("../node_modules/lodash/_baseGt.js"),o=r("../node_modules/lodash/_baseIteratee.js");e.exports=function(e,t){return e&&e.length?n(e,o(t,2),s):void 0}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_trends_index_tsx-node_modules_lodash_maxBy_js.9b27b919fb97c3c4333e5ced88480561.js.map