"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_content_tsx"],{"./app/components/charts/chartZoom.tsx":(e,t,o)=>{o.d(t,{Z:()=>v});var n=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(o("../node_modules/core-js/modules/web.dom-collections.iterator.js"),o("../node_modules/react/index.js")),r=o("../node_modules/moment/moment.js"),i=o.n(r),a=o("../node_modules/query-string/index.js"),l=o("./app/actionCreators/pageFilters.tsx"),d=o("./app/components/charts/components/dataZoomInside.tsx");o("../node_modules/echarts/lib/component/dataZoomSlider.js");const p={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function c(e){return e&&Array.isArray(e)?e:[{...p,...e}]}var u=o("./app/components/charts/components/toolBox.tsx"),m=o("./app/utils/callIfFunction.tsx"),g=o("./app/utils/dates.tsx");const h=e=>e?i().utc(e).format(i().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class x extends s.Component{constructor(e){var t;super(e),t=this,(0,n.Z)(this,"history",void 0),(0,n.Z)(this,"currentPeriod",void 0),(0,n.Z)(this,"zooming",null),(0,n.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:h(e.start),end:h(e.end)}})),(0,n.Z)(this,"setPeriod",(function(e){let{period:o,start:n,end:s}=e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:i,onZoom:d,usePageDate:p}=t.props,c=h(n),u=h(s);r&&t.history.push(t.currentPeriod),(0,m.g)(d,{period:o,start:c,end:u}),t.zooming=()=>{if(p&&i){const e={...i.location.query,pageStart:n?(0,g.v5)(n):void 0,pageEnd:s?(0,g.v5)(s):void 0,pageStatsPeriod:null!=o?o:void 0};a.stringify(e)!==a.stringify(i.location.query)&&i.push({pathname:i.location.pathname,query:e})}else(0,l.dR)({period:o,start:c?(0,g.hC)(c):c,end:u?(0,g.hC)(u):u},i);t.saveCurrentPeriod({period:o,start:n,end:s})}})),(0,n.Z)(this,"handleChartReady",(e=>{(0,m.g)(this.props.onChartReady,e)})),(0,n.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],(0,m.g)(this.props.onRestore,e,t))})),(0,n.Z)(this,"handleDataZoom",((e,t)=>{const o=t.getModel(),{startValue:n,endValue:s}=o._payload.batch[0];if(null===n&&null===s){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=i().utc(n),t=i().utc(s);this.setPeriod({period:null,start:e,end:t},!0)}(0,m.g)(this.props.onDataZoom,e,t)})),(0,n.Z)(this,"handleChartFinished",((e,t)=>{var o;"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const n=null===(o=t._componentsViews)||void 0===o?void 0:o.find((e=>e._features&&e._features.dataZoom));n&&!n._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:o,disabled:n,children:s,xAxisIndex:r,router:i,onZoom:a,onRestore:l,onChartReady:p,onDataZoom:m,onFinished:h,showSlider:x,chartZoomOptions:v,...f}=this.props,y=null!=e?e:void 0,Z=t?(0,g.hC)(t):void 0,b=o?(0,g.hC)(o):void 0;return s(n?{utc:y,start:Z,end:b,...f}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:y,start:Z,end:b,dataZoom:x?[...c({xAxisIndex:r,...v}),...(0,d.Z)({xAxisIndex:r,...v})]:(0,d.Z)({xAxisIndex:r,...v}),showTimeInTooltip:!0,toolBox:(0,u.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...f})}}x.displayName="ChartZoom";const v=x},"./app/components/charts/components/dataZoomInside.tsx":(e,t,o)=>{o.d(t,{Z:()=>s}),o("../node_modules/echarts/lib/component/dataZoomInside.js");const n={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function s(e){return e&&Array.isArray(e)?e:[{...n,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,o)=>{function n(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function s(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:n(t),...e}}o.d(t,{Z:()=>s})},"./app/components/charts/loadingPanel.tsx":(e,t,o)=>{o.d(t,{Z:()=>a});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("./app/components/loadingMask.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,n.Z)((e=>{let{height:t,...o}=e;return(0,r.tZ)("div",{...o,children:(0,r.tZ)(s.Z,{})})}),{target:"eumb2md0"})("flex:1;flex-shrink:0;overflow:hidden;height:",(e=>e.height),";position:relative;border-color:transparent;margin-bottom:0;");i.defaultProps={height:"200px"};const a=i},"./app/components/charts/optionSelector.tsx":(e,t,o)=>{o.d(t,{Z:()=>u});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(o("../node_modules/core-js/modules/es.array.includes.js"),o("../node_modules/react/index.js")),r=o("./app/components/featureBadge.tsx"),i=o("./app/components/forms/compactSelect.tsx"),a=o("./app/components/truncate.tsx"),l=o("./app/utils.tsx"),d=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{options:t,onChange:o,selected:n,title:r,featureType:p,multiple:u,...m}=e;const g=(0,s.useMemo)((()=>t.map((e=>({...e,label:(0,d.tZ)(a.Z,{value:String(e.label),maxLength:60,expandDirection:"left"})})))),[t]);return(0,d.tZ)(i.Z,{options:g,value:n,onChange:function(e){o(u?e.map((e=>e.value)):e.value)},isOptionDisabled:function(e){return e.disabled||u&&3===n.length&&!n.includes(e.value)},multiple:u,triggerProps:{size:"sm",borderless:!0,prefix:(0,d.BX)(s.Fragment,{children:[r,(0,l.ri)(p)?(0,d.tZ)(c,{type:p}):null]})},placement:"bottom right",...m})}p.displayName="OptionSelector";const c=(0,n.Z)(r.Z,{target:"e1a4edto0"})({name:"6og82r",styles:"margin-left:0px"}),u=p},"./app/components/charts/transitionChart.tsx":(e,t,o)=>{o.d(t,{Z:()=>l});var n=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(o("../node_modules/core-js/modules/web.dom-collections.iterator.js"),o("../node_modules/react/index.js")),r=o("./app/components/charts/loadingPanel.tsx"),i=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{prevReloading:this.props.reloading,prevLoading:this.props.loading,key:1})}static getDerivedStateFromProps(e,t){const o=t.prevReloading,n=e.reloading,s=t.prevLoading,r=e.loading;return s!==r?{prevReloading:n,prevLoading:r,key:t.key+1}:r?{prevReloading:n,prevLoading:r,key:t.key}:o&&!n?{prevReloading:n,prevLoading:r,key:t.key+1}:{prevReloading:n,prevLoading:r,key:t.key}}render(){const{height:e,loading:t,reloading:o}=this.props;return t&&!o?(0,i.tZ)(r.Z,{height:e,"data-test-id":"events-request-loading"}):(0,i.tZ)(s.Fragment,{children:this.props.children},String(this.state.key))}}a.displayName="TransitionChart",(0,n.Z)(a,"defaultProps",{height:"200px"});const l=a},"./app/components/charts/transparentLoadingMask.tsx":(e,t,o)=>{o.d(t,{Z:()=>i});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("./app/components/loadingMask.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,n.Z)((e=>{let{className:t,visible:o,children:n,...i}=e;const a=o?{...i,"data-test-id":"loading-placeholder"}:i;return(0,r.tZ)(s.Z,{className:t,...a,children:n})}),{target:"ewtkxp50"})((e=>!e.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/components/gridEditable/sortLink.tsx":(e,t,o)=>{o.d(t,{Z:()=>m});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("../node_modules/lodash/omit.js"),r=o.n(s),i=o("./app/components/links/link.tsx"),a=o("./app/icons/index.tsx"),l=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{align:t,title:o,canSort:n,generateSortLink:s,onClick:r,direction:i}=e;const a=s();if(!a||!n)return(0,l.tZ)(c,{align:t,children:o});const d=i?(0,l.tZ)(u,{size:"xs",direction:"desc"===i?"down":"up"}):null;return(0,l.BX)(p,{align:t,to:a,onClick:r,children:[o," ",d]})}d.displayName="SortLink";const p=(0,n.Z)((e=>{const t=r()(e,["align"]);return(0,l.tZ)(i.Z,{...t})}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),c=(0,n.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),u=(0,n.Z)(a.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"}),m=d},"./app/components/loadingMask.tsx":(e,t,o)=>{o.d(t,{Z:()=>n});const n=(0,o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1dnwgq10"})("background-color:",(e=>e.theme.backgroundSecondary),";border-radius:",(e=>e.theme.borderRadius),";position:absolute;top:0;bottom:0;left:0;right:0;")},"./app/components/performanceDuration.tsx":(e,t,o)=>{o.d(t,{Z:()=>a});var n=o("./app/components/duration.tsx"),s=o("./app/utils.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){const t=function(e){return(0,s.ri)(e.nanoseconds)}(e)?e.nanoseconds/1e9:function(e){return(0,s.ri)(e.milliseconds)}(e)?e.milliseconds/1e3:e.seconds;return(0,r.tZ)(n.Z,{abbreviation:e.abbreviation,seconds:t,fixedDigits:2})}i.displayName="PerformanceDuration";const a=i},"./app/utils/discover/charts.tsx":(e,t,o)=>{o.d(t,{CX:()=>a,gu:()=>l});var n=o("./app/locale.tsx"),s=o("./app/utils.tsx"),r=o("./app/utils/discover/fields.tsx"),i=o("./app/utils/formatters.tsx");function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(0,s.ri)(e))return"â€”";switch((0,r.Px)(t)){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,i.rl)(e,2);case"duration":return(0,i.g9)(e/1e3,2,!0);default:return e.toString()}}function l(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch((0,r.Px)(t)){case"integer":case"number":return o?(0,i.Du)(e):e.toLocaleString();case"percentage":return(0,i.rl)(e,0);case"duration":return d(e);default:return e.toString()}}function d(e){if(0===e)return"0";if(e>=i.ps){const t=(e/i.ps).toFixed(0);return(0,n.t)("%swk",t)}if(e>=i.x4){const t=(e/i.x4).toFixed(0);return(0,n.t)("%sd",t)}if(e>=i.kr){const t=(e/i.kr).toFixed(0);return(0,n.t)("%shr",t)}if(e>=i.EB){const t=(e/i.EB).toFixed(0);return(0,n.t)("%smin",t)}if(e>=i.sh){const t=(e/i.sh).toFixed(0);return(0,n.t)("%ss",t)}const t=e.toFixed(0);return(0,n.t)("%sms",t)}},"./app/utils/profiling/hooks/useProfileFilters.tsx":(e,t,o)=>{o.d(t,{J:()=>a}),o("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=o("../node_modules/react/index.js"),s=o("./app/components/organizations/pageFilters/parse.tsx"),r=o("./app/utils/useApi.tsx"),i=o("./app/utils/useOrganization.tsx");function a(e){let{query:t,selection:o}=e;const a=(0,r.Z)(),l=(0,i.Z)(),[d,p]=(0,n.useState)({});return(0,n.useEffect)((()=>{if(o)return function(e,t,o,n){return e.requestPromise(`/organizations/${t.slug}/profiling/filters/`,{method:"GET",query:{query:o,project:n.projects,environment:n.environments,...(0,s.fK)(n.datetime)}})}(a,l,t,o).then((e=>{const t=e.reduce(((e,t)=>(e[t.key]={...t,predefined:!0},e)),{});p(t)})),()=>a.clear()}),[a,l,t,o]),d}},"./app/utils/profiling/hooks/useProfiles.tsx":(e,t,o)=>{o.d(t,{n:()=>p}),o("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=o("../node_modules/react/index.js"),s=o("../node_modules/@sentry/hub/esm/exports.js"),r=o("./app/components/organizations/pageFilters/parse.tsx"),i=o("./app/locale.tsx"),a=o("./app/utils.tsx"),l=o("./app/utils/useApi.tsx"),d=o("./app/utils/useOrganization.tsx");function p(e){let{cursor:t,limit:o,query:p,selection:c}=e;const u=(0,l.Z)(),m=(0,d.Z)(),[g,h]=(0,n.useState)({type:"initial"});return(0,n.useEffect)((()=>{if((0,a.ri)(c))return h({type:"loading"}),function(e,t,o){let{cursor:n,limit:s,query:i,selection:a}=o;return e.requestPromise(`/organizations/${t.slug}/profiling/profiles/`,{method:"GET",includeAllArgs:!0,query:{cursor:n,query:i,per_page:s,project:a.projects,environment:a.environments,...(0,r.fK)(a.datetime)}})}(u,m,{cursor:t,limit:o,query:p,selection:c}).then((e=>{var t;let[o,,n]=e;h({type:"resolved",data:{traces:o,pageLinks:null!==(t=null==n?void 0:n.getResponseHeader("Link"))&&void 0!==t?t:null}})})).catch((e=>{h({type:"errored",error:(0,i.t)("Error: Unable to load profiles")}),s.Tb(e)})),()=>u.clear()}),[u,m,t,o,p,c]),g}},"./app/utils/profiling/routes.tsx":(e,t,o)=>{function n(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/`}function s(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/onboarding/`}function r(e){let{orgSlug:t,projectSlug:o,profileId:n}=e;return`/organizations/${t}/profiling/profile/${o}/${n}/flamegraph/`}function i(e){let{orgSlug:t,projectSlug:o,profileId:n}=e;return`/organizations/${t}/profiling/profile/${o}/${n}/details/`}function a(e){let{location:t,orgSlug:o,query:s}=e;return{pathname:n({orgSlug:o}),query:{...null==t?void 0:t.query,...s}}}function l(e){let{location:t,orgSlug:o,projectSlug:n,transaction:s,query:r}=e;const i=function(e){let{orgSlug:t,projectSlug:o}=e;return`/organizations/${t}/profiling/summary/${o}/`}({orgSlug:o,projectSlug:n});return{pathname:i,query:{...null==t?void 0:t.query,...r,transaction:s}}}function d(e){let{location:t,orgSlug:o,projectSlug:n,profileId:s,query:i}=e;return{pathname:r({orgSlug:o,projectSlug:n,profileId:s}),query:{...null==t?void 0:t.query,...i}}}function p(e){let{location:t,orgSlug:o,projectSlug:n,profileId:s,query:r}=e;return{pathname:i({orgSlug:o,projectSlug:n,profileId:s}),query:{...null==t?void 0:t.query,...r}}}o.d(t,{E7:()=>n,J:()=>d,Qy:()=>p,R0:()=>l,XR:()=>a,i5:()=>s,vd:()=>r,zF:()=>i})},"./app/utils/profiling/tableRenderer.tsx":(e,t,o)=>{o.d(t,{w:()=>r});var n=o("./app/components/gridEditable/sortLink.tsx"),s=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){return(t,o)=>(0,s.tZ)(n.Z,{align:e.has(t.key)?"right":"left",title:t.name,direction:void 0,canSort:!1,generateSortLink:()=>{}})}},"./app/utils/useLocation.tsx":(e,t,o)=>{o.d(t,{T:()=>s});var n=o("./app/utils/useRouteContext.tsx");function s(){return(0,n.s)().location}},"./app/views/profiling/content.tsx":(e,t,o)=>{o.r(t),o.d(t,{default:()=>Se});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("../node_modules/react/index.js"),r=o("../node_modules/react-router/es/index.js"),i=o("./app/components/alert.tsx"),a=o("./app/components/button.tsx"),l=o("./app/components/datePageFilter.tsx"),d=o("./app/components/environmentPageFilter.tsx"),p=o("./app/components/layouts/thirds.tsx"),c=o("./app/components/noProjectMessage.tsx"),u=o("./app/components/organizations/pageFilterBar.tsx"),m=o("./app/components/organizations/pageFilters/container.tsx"),g=o("./app/components/pageHeading.tsx"),h=o("./app/components/pagination.tsx"),x=(o("../node_modules/core-js/modules/web.dom-collections.iterator.js"),o("./app/components/count.tsx")),v=o("./app/components/dateTime.tsx"),f=o("./app/components/gridEditable/index.tsx"),y=o("./app/components/idBadge/projectBadge.tsx"),Z=o("./app/components/links/link.tsx"),b=o("./app/components/performanceDuration.tsx"),j=o("./app/locale.tsx"),_=o("./app/utils.tsx"),w=o("./app/utils/discover/styles.tsx"),S=o("./app/utils/profiling/routes.tsx"),k=o("./app/utils/profiling/tableRenderer.tsx"),P=o("./app/utils/useLocation.tsx"),z=o("./app/utils/useOrganization.tsx"),C=o("./app/utils/useProjects.tsx"),q=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function L(e){const t=(0,P.T)(),o=(0,z.Z)(),{projects:n}=(0,C.Z)(),r=(0,s.useMemo)((()=>e.transactions.map((e=>{const s=n.find((t=>t.id===e.project_id));return{transaction:s?(0,q.tZ)(Z.Z,{to:(0,S.R0)({location:t,orgSlug:o.slug,projectSlug:s.slug,transaction:e.name}),children:e.name}):e.name,count:e.profiles_count,project:s,p50:e.duration_ms.p50,p75:e.duration_ms.p75,p90:e.duration_ms.p90,p95:e.duration_ms.p95,p99:e.duration_ms.p99,lastSeen:e.last_profile_at}}))),[e.transactions,t,o,n]);return(0,q.tZ)(f.ZP,{isLoading:e.isLoading,error:e.error,data:r,columnOrder:D.map((e=>T[e])),columnSortBy:[],grid:{renderHeadCell:(0,k.w)(A),renderBodyCell:R},location:t})}L.displayName="ProfileTransactionsTable";const A=new Set(["count","p50","p75","p90","p95","p99"]);function R(e,t,o,n){return(0,q.tZ)(F,{column:e,dataRow:t,rowIndex:o,columnIndex:n})}function F(e){let{column:t,dataRow:o}=e;const n=o[t.key];switch(t.key){case"project":return(0,_.ri)(n)?(0,q.tZ)(w.W2,{children:(0,q.tZ)(y.Z,{project:n,avatarSize:16})}):(0,q.tZ)(w.W2,{children:(0,j.t)("n/a")});case"count":return(0,q.tZ)(w.Hw,{children:(0,q.tZ)(x.Z,{value:n})});case"p50":case"p75":case"p90":case"p95":case"p99":return(0,q.tZ)(w.Hw,{children:(0,q.tZ)(b.Z,{milliseconds:n,abbreviation:!0})});case"lastSeen":return(0,q.tZ)(w.W2,{children:(0,q.tZ)(v.Z,{date:n})});default:return(0,q.tZ)(w.W2,{children:n})}}R.displayName="renderTableBody";const D=["transaction","project","lastSeen","p75","p95","count"],T={transaction:{key:"transaction",name:(0,j.t)("Transaction"),width:f.z7},count:{key:"count",name:(0,j.t)("Count"),width:f.z7},project:{key:"project",name:(0,j.t)("Project"),width:f.z7},p50:{key:"p50",name:(0,j.t)("P50"),width:f.z7},p75:{key:"p75",name:(0,j.t)("P75"),width:f.z7},p90:{key:"p90",name:(0,j.t)("P90"),width:f.z7},p95:{key:"p95",name:(0,j.t)("P95"),width:f.z7},p99:{key:"p99",name:(0,j.t)("P99"),width:f.z7},lastSeen:{key:"lastSeen",name:(0,j.t)("Last Seen"),width:f.z7}};var B=o("./app/components/projectPageFilter.tsx"),I=o("./app/components/sentryDocumentTitle.tsx"),E=o("./app/components/smartSearchBar/index.tsx"),M=o("./app/constants/index.tsx"),$=o("./app/styles/organization.tsx"),N=o("./app/styles/space.tsx"),O=o("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),H=o("./app/utils/profiling/hooks/useProfileFilters.tsx"),X=o("./app/utils/profiling/hooks/useProfiles.tsx"),W=o("../node_modules/@sentry/hub/esm/exports.js"),G=o("./app/components/organizations/pageFilters/parse.tsx"),U=o("./app/utils/useApi.tsx");var V=o("./app/utils/queryString.tsx"),J=o("./app/utils/usePageFilters.tsx"),K=o("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),Q=o("../node_modules/moment/moment.js"),Y=o.n(Q),ee=o("../node_modules/moment-timezone/index.js"),te=o.n(ee),oe=o("./app/components/charts/chartZoom.tsx"),ne=o("./app/components/charts/optionSelector.tsx"),se=(o("../node_modules/echarts/lib/chart/scatter.js"),o("./app/utils/theme.tsx")),re=o("./app/components/charts/baseChart.tsx");function ie(e){var t;let{series:o,...n}=e;return(0,q.tZ)(re.Z,{...n,xAxis:{axisPointer:{show:!1,...null===(t=n.xAxis)||void 0===t?void 0:t.axisPointer},...n.xAxis},series:o.map((e=>{let{seriesName:t,data:o,...n}=e;return function(e){return{symbolSize:se.ZP.charts.symbolSize,...e,type:"scatter",emphasis:{...e.emphasis,scale:!0}}}({name:t,data:o.map((e=>{let{name:t,value:o}=e;return[t,o]})),...n,animation:!1})}))})}ie.displayName="ScatterChart";const ae=ie;var le=o("./app/components/charts/styles.tsx"),de=o("./app/components/charts/transitionChart.tsx"),pe=o("./app/components/charts/transparentLoadingMask.tsx"),ce=o("./app/components/charts/utils.tsx"),ue=o("./app/components/panels/index.tsx"),me=o("./app/stores/configStore.tsx"),ge=o("./app/utils/discover/charts.tsx"),he=o("./app/utils/formatters.tsx");o("./app/components/gridEditable/sortLink.tsx");const xe={version:(0,j.t)("App Version"),device_manufacturer:(0,j.t)("Device Manufacturer"),device_model:(0,j.t)("Device Model"),device_os_version:(0,j.t)("Device Os Version"),transaction_name:(0,j.t)("Transaction Name")},ve=Object.entries(xe).map((e=>{let[t,o]=e;return{label:o,value:t}}));function fe(e){let{router:t,location:o,datetime:n,isLoading:i,traces:a}=e;const l=(0,z.Z)(),{projects:d}=(0,C.Z)(),p=(0,K.a)(),c=(0,s.useMemo)((()=>function(e){const t=(0,V.ro)(e.query.colorEncoding);return(0,_.ri)(t)&&xe.hasOwnProperty(t)?t:"transaction_name"}(o)),[o]),u=(0,s.useMemo)((()=>{const e={};for(const t of a){const o="version"===c?`${t.version_name} (build ${t.version_code})`:t[c];e[o]||(e[o]=[]),e[o].push(t)}return e}),[c,a]),m=(0,s.useMemo)((()=>Object.entries(u).map((e=>{let[t,o]=e;return{seriesName:t,data:o.map((e=>({name:1e3*e.timestamp,value:e.trace_duration_ms})))}}))),[u]),g=(0,s.useMemo)((()=>function(e){var t,o;let{data:n,datetime:s,location:i,organization:a,projects:l,theme:d}=e;const p=me.Z.get("user"),c=null==p?void 0:p.options,u=Y().utc(),m=((0,_.ri)(s.end)?Y().utc(s.end):u).valueOf();return{grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},tooltip:{trigger:"item",formatter:e=>{var t,o;const s=null===(t=n[e.seriesName])||void 0===t?void 0:t[e.dataIndex],r=s&&l.find((e=>e.id===s.project_id));return['<div class="tooltip-series">',...[{label:(0,j.t)("Project"),value:null==r?void 0:r.slug},{label:(0,j.t)("App Version"),value:null==s?void 0:s.version_code},{label:(0,j.t)("Duration"),value:(0,_.ri)(null==s?void 0:s.trace_duration_ms)?(0,he.g9)((null==s?void 0:s.trace_duration_ms)/1e3,2,!0):null},{label:(0,j.t)("Transaction"),value:null==s?void 0:s.transaction_name},{label:(0,j.t)("Device Model"),value:null==s?void 0:s.device_model},{label:(0,j.t)("Device Classification"),value:null==s?void 0:s.device_classification},{label:(0,j.t)("Device Manufacturer"),value:null==s?void 0:s.device_manufacturer}].map((e=>{let{label:t,value:o}=e;return`<div><span class="tooltip-label"><strong>${t}</strong></span> ${null!=o?o:(0,j.t)("Unknown")}</div>`})),"</div>",`<div class="tooltip-date">${(0,_.ri)(null==s?void 0:s.timestamp)?te().tz(1e3*(null==s?void 0:s.timestamp),null!==(o=null==c?void 0:c.timezone)&&void 0!==o?o:"").format("lll"):null}</div>`,'<div class="tooltip-arrow"></div>'].join("")}},xAxis:{min:((0,_.ri)(s.start)?Y().utc(s.start):u.subtract(parseInt(null!==(t=s.period)&&void 0!==t?t:"14",10),"h"===(null===(o=s.period)||void 0===o?void 0:o.charAt(s.period.length-1))?"hours":"days")).valueOf(),max:m},yAxis:{axisLabel:{color:d.chartLabel,formatter:e=>(0,ge.gu)(e,"p50()")}},legend:{right:10,top:5,selected:(0,ce.RI)(i)},onClick:e=>{var t;const o=null===(t=n[e.seriesName])||void 0===t?void 0:t[e.dataIndex];if(!(0,_.ri)(o))return;const s=l.find((e=>e.id===o.project_id));(0,_.ri)(s)&&r.browserHistory.push((0,S.zF)({orgSlug:a.slug,projectSlug:s.slug,profileId:o.id}))}}}({data:u,datetime:n,location:o,organization:l,projects:d,theme:p})),[o,n,p,u,l,d]),h=(0,s.useCallback)((e=>{r.browserHistory.push({...o,query:{...o.query,colorEncoding:e}})}),[o]);return(0,q.BX)(ue.s_,{children:[(0,q.tZ)(le.BO,{children:(0,q.tZ)(oe.Z,{router:t,period:n.period,start:n.start,end:n.end,utc:n.utc,children:e=>(0,q.BX)(de.Z,{loading:i,reloading:i,children:[(0,q.tZ)(pe.Z,{visible:i}),(0,q.tZ)(ae,{series:m,...g,...e})]})})}),(0,q.tZ)(le.xx,{children:(0,q.tZ)(le.m2,{children:(0,q.tZ)(ne.Z,{title:(0,j.t)("Group By"),selected:c,options:ve,onChange:h})})})]})}fe.displayName="ProfilingScatterChart";const ye=(0,r.withRouter)(fe);function Ze(e){var t;let{location:o}=e;const n=(0,z.Z)(),{selection:g}=(0,J.Z)(),x=(0,V.ro)(o.query.cursor),v=(0,V.ro)(o.query.query,""),f=(0,H.J)({query:"",selection:g}),y=(0,X.n)({cursor:x,query:v,selection:g}),Z=function(e){let{cursor:t,limit:o,query:n,selection:r}=e;const i=(0,U.Z)(),a=(0,z.Z)(),[l,d]=(0,s.useState)({type:"initial"});return(0,s.useEffect)((()=>{if((0,_.ri)(r))return d({type:"loading"}),function(e,t,o){let{cursor:n,limit:s,query:r,selection:i}=o;return e.requestPromise(`/organizations/${t.slug}/profiling/transactions/`,{method:"GET",includeAllArgs:!0,query:{cursor:n,query:r,per_page:s,project:i.projects,environment:i.environments,...(0,G.fK)(i.datetime)}})}(i,a,{cursor:t,limit:o,query:n,selection:r}).then((e=>{var t;let[o,,n]=e;d({type:"resolved",data:{transactions:o,pageLinks:null!==(t=null==n?void 0:n.getResponseHeader("Link"))&&void 0!==t?t:null}})})).catch((e=>{d({type:"errored",error:(0,j.t)("Error: Unable to load transactions")}),W.Tb(e)})),()=>i.clear()}),[i,a,t,o,n,r]),l}({cursor:x,query:v,selection:g});(0,s.useEffect)((()=>{(0,O.Z)("profiling_views.landing",{organization:n})}),[n]);const b=(0,s.useCallback)((e=>{r.browserHistory.push({...o,query:{...o.query,cursor:void 0,query:e||void 0}})}),[o]),w=(0,s.useCallback)((()=>{r.browserHistory.push((0,S.i5)({orgSlug:n.slug}))}),[n.slug]);return(0,q.tZ)(I.Z,{title:(0,j.t)("Profiling"),orgSlug:n.slug,children:(0,q.tZ)(m.Z,{children:(0,q.tZ)(c.Z,{organization:n,children:(0,q.BX)(be,{children:[(0,q.tZ)(p.h4,{children:(0,q.BX)(je,{children:[(0,q.tZ)(_e,{children:(0,j.t)("Profiling")}),(0,q.tZ)(a.ZP,{onClick:w,children:"Setup Profiling"})]})}),(0,q.tZ)(p.uT,{children:(0,q.BX)(p.or,{fullWidth:!0,children:[(0,q.BX)(we,{children:[(0,q.BX)(u.Z,{condensed:!0,children:[(0,q.tZ)(B.Z,{}),(0,q.tZ)(d.Z,{}),(0,q.tZ)(l.Z,{alignDropdown:"left"})]}),(0,q.tZ)(E.Z,{organization:n,hasRecentSearches:!0,searchSource:"profile_landing",supportedTags:f,query:v,onSearch:b,maxQueryLength:M.dI})]}),"errored"===y.type&&(0,q.tZ)(i.Z,{type:"error",showIcon:!0,children:(0,j.t)("Unable to load profiles")}),(0,q.tZ)(ye,{datetime:null!==(t=null==g?void 0:g.datetime)&&void 0!==t?t:{start:null,end:null,period:null,utc:null},traces:"resolved"===y.type?y.data.traces:[],isLoading:"loading"===y.type}),(0,q.tZ)(L,{error:"errored"===Z.type?(0,j.t)("Unable to load profiles"):null,isLoading:"loading"===Z.type,transactions:"resolved"===Z.type?Z.data.transactions:[]}),(0,q.tZ)(h.Z,{pageLinks:"resolved"===Z.type?Z.data.pageLinks:null})]})})]})})})})}Ze.displayName="ProfilingContent";const be=(0,n.Z)($.JH,{target:"eil9lws3"})({name:"1hcx8jb",styles:"padding:0"}),je=(0,n.Z)(p.oB,{target:"eil9lws2"})({name:"1iix8hw",styles:"display:flex;justify-content:space-between;flex-direction:row"}),_e=(0,n.Z)(g.Z,{target:"eil9lws1"})({name:"ht6xsx",styles:"line-height:40px"}),we=(0,n.Z)("div",{target:"eil9lws0"})("display:grid;gap:",(0,N.Z)(2),";grid-template-columns:min-content auto;margin-bottom:",(0,N.Z)(2),";"),Se=Ze}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_content_tsx.29774214b006dbb5cffddee2c98d2d6d.js.map